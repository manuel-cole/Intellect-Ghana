/* /js/header.js-/js/enhanced-article.js-/js/jcarousellite_1.0.1_custom.min.js-/js/jquery.prettyPhoto.js-/js/jquery.history.js-/js/hgm.video.js-/js/hgm/video/SlideVideo.js-/js/social-v-bar.js-/js/jquery.qtip.min.js-/js/jquery.validate.min.js-/js/jquery.form.js-/js/jquery.hint.js-/js/hgm.newsletter.popup.js-/js/hgm.makemodel.popup.js-/js/email-subscription-block-index.js-/js/hgm/lightbox/main.js-/js/jquery.hgm.adsRefresh.js-/js/jquery.imgfitfill.js-/js/lib/ejs.js-/js/swiper.js-/js/hgm/photo/gallery.js-/js/hgm/photo/Thumbnails.js-/js/hgm/photo/AdGallery.js-/js/hgm/photo/ThumbGallery.js-/js/hgm/photo/YrmdThumbGallery.js-/js/waypoints.min.js-/js/productTour.js-/js/hgm/format.js-/js/lib/handlebars.js-/js/lib/handlebars-helpers.js-/js/hgm/handlebars-helpers.js-/js/listings/ppc.js-/js/listings-and-ppc.js-/js/jquery.dotdotdot.min.js-/js/pricecheck.js-/js/hgm.listingsLink.js-/js/hgm/vote/review.js-/js/recent-user-review.js-/js/find-used-listing.js-/js/jquery.ad-gallery.js-/js/lib/base64-shim.js-/js/hgm/social.js-/js/hgm/auth.js-/js/lib/localStorageDB.js-/js/hgm/showroom/showroom.js-/js/hgm/showroom/Local.js-/js/hgm/showroom/Remote.js-/js/hgm/showroom/user.js-/js/member-dialogs.js-/js/smooth-reload.js-/js/login-popup.js-/js/google-search-index1.js-/js/jquery.groupHover.js-/js/find-car.js-/js/hgm/vhc.js-/js/jquery.selectBoxIt.min.js - 8.8059902191162ms - 06/06/15 09:49:17 PM */

var ie6=false;if(document.all&&!window.opera&&!window.XMLHttpRequest)
{ie6=true;};;

$(document).ready(function(){$(".article_content > p.first_p").css('display','inline');$('.article_content > iframe, .article_content > embed, .article_content > object, .article_content > p > iframe, .article_content > p > embed, .article_content > p > object').each(function(idx,elem){height=($(this).height()/$(this).width())*606;$(this).css({width:'606px',height:height+'px'}).attr('width','606').attr('height',height);});$(".article_content p img").each(function(idx,elem){if($('#static-email-subscribe').length==0){return;}
if($(elem).position()&&$(elem).position().top<$('#static-email-subscribe').position().top+$('#static-email-subscribe').height()){$(elem).remove();$('#static-email-subscribe').after($(elem));$(elem).addClass('float-image');}});var enlargeLinks=$('.image_wrapper').find('a.enlarge');jQuery.each(enlargeLinks,function(i,element){var enlargeLink=$(element).attr('href');if(enlargeLink){var imageWrapper=$(element).closest('.image_wrapper');var $image=$(imageWrapper).find('img');$(element).hide();if(!$(imageWrapper).hasClass('infographic')){$(imageWrapper).css('position','relative').wrap('<a href="#" class="showLg"></a>').append('<div class="icon-zoom-in"></div>').click(function(){hgm.lightBox.open($image.data('url'),$image.attr('title'),$image.data('width'),$image.data('height'));});}
if($(imageWrapper).hasClass('infographic')&&(typeof $.prettyPhoto!=='undefined')){var imageElement=$(imageWrapper).find('img'),imageSrc=$(imageElement).data('src-large')?$(imageElement).data('src-large'):$(imageElement).attr('src'),description=$(imageElement).attr('title');$(imageElement).wrap('<a data-description="'+description+'" class="prettyPhoto" rel="prettyPhoto" href="'+imageSrc+'"></a>');}}});$('.showLg').click(function(e){e.preventDefault();});if(typeof $.prettyPhoto!=='undefined'){$(".infographic .prettyPhoto").prettyPhoto({animation_speed:'normal',padding:0,opacity:0.7,show_title:false,show_description:true,allow_resize:false,counter_separator_label:'/',theme:'light_rounded',default_width:640,default_height:1768,desc_attr_name:'data-description',keyboard_shortcuts:false,modal:true});}});;;
(function(b){function t(a){h=0;a.each(function(){if(b(this).height()>h)h=b(this).outerHeight()});return h}function u(a){w=0;a.each(function(){if(b(this).width()>w)w=b(this).outerWidth()});return w}b.fn.jCarouselLite=function(a){a=b.extend({btnPrev:null,btnNext:null,btnGo:null,btnEvent:"hover",mouseWheel:false,auto:null,speed:200,easing:null,vertical:false,circular:true,visible:3,start:0,scroll:1,pauseOnHover:false,beforeStart:null,afterEnd:null},a||{});return this.each(function(){function v(){return f.slice(c).slice(0, d)}function i(j){if(!p){a.beforeStart&&a.beforeStart.call(this,v());to=c+j;if(a.circular)if(to<=a.start-d-1){e.css(q,-((g-d*2)*k)+"px");c=to==a.start-d-1?g-d*2-1:g-d*2-a.scroll}else if(to>=g-d+1){e.css(q,-(d*k)+"px");c=to==g-d+1?d+1:d+a.scroll}else c=to;else if(to<0||to>g-d)return;else c=to;p=true;e.animate(q=="left"?{left:-(c*k)}:{top:-(c*k)},a.speed,a.easing,function(){if(m){p=false;i(j)}a.afterEnd&&a.afterEnd.call(this,v());p=false});if(!a.circular){b(a.btnPrev+","+a.btnNext).removeClass("disabled"); b(c-a.scroll<0&&a.btnPrev||c+a.scroll>g-d&&a.btnNext||[]).addClass("disabled")}}}var p=false,q=a.vertical?"top":"left",y=a.vertical?"height":"width",n=b(this),e=b("> ul",n),o=b("> li",e),x=o.size(),d=a.visible,r=false,l=false;if(a.circular){ele=o.slice(x-1).clone();b(ele).attr("id","jcarouseellite_temp_0");ele2=o.slice(0,1).clone();b(ele2).attr("id","jcarouseellite_temp_"+(x+1));e.prepend(ele);e.append(ele2);a.start+=d}a.pauseOnHover&&e.hover(function(){r=true},function(){r=false});var f=b("> li", e),g=f.size(),c=a.start;n.show();e.show();f.show();f.css("overflow","hidden");f.css("float",a.vertical?"none":"left");e.css({margin:"0",padding:"0",position:"relative","list-style-type":"none","z-index":"1"});n.css({overflow:"hidden",position:"relative","z-index":"2",left:"0px"});w=u(f);h=t(f);var k=a.vertical?h:w;o=k*g;if(w>0&&h>0){e.css(y,o+"px").css(q,-(c*k));f.css({width:u(f),height:t(f)})}var m=false;if(a.btnPrev)if(a.btnEvent=="hover")b(a.btnPrev).hover(function(){l=m=true;return i(-a.scroll)}, function(){m=false});else a.btnEvent=="click"&&b(a.btnPrev).click(function(){l=true;return i(-a.scroll)});if(a.btnNext)if(a.btnEvent=="hover")b(a.btnNext).hover(function(){l=m=true;return i(a.scroll)},function(){m=false});else a.btnEvent=="click"&&b(a.btnNext).click(function(){l=true;return i(a.scroll)});a.btnGo&&b.each(a.btnGo,function(j,s){b(s).click(function(){l=true;correcti=a.circular?j+1:j;correcti!=c&&i(correcti-c)})});a.mouseWheel&&n.mousewheel&&n.mousewheel(function(j,s){return s>0?i(-a.scroll): i(a.scroll)});a.auto&&setInterval(function(){!r&&!l&&i(a.scroll)},a.auto+a.speed,null);if(!a.circular){b(a.btnPrev+","+a.btnNext).removeClass("disabled");g<=a.visible&&b(a.btnNext).addClass("disabled");b(c-a.scroll<0&&a.btnPrev||c+a.scroll>g-d&&a.btnNext||[]).addClass("disabled")}})}})(jQuery);;;

(function($){$.prettyPhoto={version:'3.0'};$.fn.prettyPhoto=function(pp_settings){pp_settings=jQuery.extend({desc_attr_name:'description',animation_speed:'fast',slideshow:false,autoplay_slideshow:false,opacity:0.80,show_title:true,allow_resize:true,default_width:500,default_height:344,counter_separator_label:'/',theme:'facebook',hideflash:false,wmode:'opaque',autoplay:true,modal:false,overlay_gallery:true,keyboard_shortcuts:false,changepicturecallback:function(){},callback:function(){},markup:'<div class="pp_pic_holder"> \
      <div class="ppt">&nbsp;</div> \
      <div class="pp_top"> \
       <div class="pp_left"></div> \
       <div class="pp_middle"></div> \
       <div class="pp_right"></div> \
      </div> \
      <div class="pp_content_container"> \
       <div class="pp_left"> \
       <div class="pp_right"> \
        <div class="pp_content"> \
         <div class="pp_loaderIcon"></div> \
         <div class="pp_fade"> \
          <a href="#" class="pp_expand" title="Expand the image">Expand</a> \
          <div class="pp_hoverContainer"> \
           <a class="pp_next" href="#">next</a> \
           <a class="pp_previous" href="#">previous</a> \
          </div> \
          <div id="pp_full_res"></div> \
          <div class="pp_details clearfix"> \
           <p class="pp_description"></p> \
           <a class="pp_close" href="#">Close</a> \
           <div class="pp_nav"> \
            <a href="#" class="pp_arrow_previous">Previous</a> \
            <p class="currentTextHolder">0/0</p> \
            <a href="#" class="pp_arrow_next">Next</a> \
           </div> \
          </div> \
         </div> \
        </div> \
       </div> \
       </div> \
      </div> \
      <div class="pp_bottom"> \
       <div class="pp_left"></div> \
       <div class="pp_middle"></div> \
       <div class="pp_right"></div> \
      </div> \
     </div> \
     <div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery"> \
        <a href="#" class="pp_arrow_previous">Previous</a> \
        <ul> \
         {gallery} \
        </ul> \
        <a href="#" class="pp_arrow_next">Next</a> \
       </div>',image_markup:'<img id="fullResImage" src="" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline clearfix">{content}</div>',custom_markup:''},pp_settings);var matchedObjects=this,percentBased=false,correctSizes,pp_open,pp_contentHeight,pp_contentWidth,pp_containerHeight,pp_containerWidth,windowHeight=$(window).height(),windowWidth=$(window).width(),pp_slideshow;doresize=true,scroll_pos=_get_scroll();if(pp_settings.keyboard_shortcuts){$(document).unbind('keydown').keydown(function(e){if(typeof $pp_pic_holder!='undefined'){if($pp_pic_holder.is(':visible')){switch(e.keyCode){case 37:$.prettyPhoto.changePage('previous');break;case 39:$.prettyPhoto.changePage('next');break;case 27:if(!settings.modal)
$.prettyPhoto.close();break;};return false;};};});}
$.prettyPhoto.initialize=function(){settings=pp_settings;if($.browser.msie&&parseInt($.browser.version)==6)settings.theme="light_square";_buildOverlay(this);if(settings.allow_resize)
$(window).scroll(function(){_center_overlay();});_center_overlay();set_position=jQuery.inArray($(this).attr('href'),pp_images);$.prettyPhoto.open();return false;}
$.prettyPhoto.open=function(){if(typeof settings=="undefined"){settings=pp_settings;if($.browser.msie&&$.browser.version==6)settings.theme="light_square";_buildOverlay(this);pp_images=$.makeArray(arguments[0]);pp_titles=(arguments[1])?$.makeArray(arguments[1]):$.makeArray("");pp_descriptions=(arguments[2])?$.makeArray(arguments[2]):$.makeArray("");isSet=(pp_images.length>1)?true:false;set_position=0;}
if($.browser.msie&&$.browser.version==6)$('select').css('visibility','hidden');if(settings.hideflash)$('object,embed').css('visibility','hidden');_checkPosition($(pp_images).size());$('.pp_loaderIcon').show();if($ppt.is(':hidden'))$ppt.css('opacity',0).show();$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity);$pp_pic_holder.find('.currentTextHolder').text((set_position+1)+settings.counter_separator_label+$(pp_images).size());$pp_pic_holder.find('.pp_description').show().html(unescape(pp_descriptions[set_position]));(settings.show_title&&pp_titles[set_position]!="")?$ppt.html(unescape(pp_titles[set_position])):$ppt.html('&nbsp;');movie_width=(parseFloat(grab_param('width',pp_images[set_position])))?grab_param('width',pp_images[set_position]):settings.default_width.toString();movie_height=(parseFloat(grab_param('height',pp_images[set_position])))?grab_param('height',pp_images[set_position]):settings.default_height.toString();if(movie_width.indexOf('%')!=-1||movie_height.indexOf('%')!=-1){movie_height=parseFloat(($(window).height()*parseFloat(movie_height)/100)-150);movie_width=parseFloat(($(window).width()*parseFloat(movie_width)/100)-150);percentBased=true;}else{percentBased=false;}
$pp_pic_holder.fadeIn(function(){imgPreloader="";switch(_getFileType(pp_images[set_position])){case'image':imgPreloader=new Image();nextImage=new Image();if(isSet&&set_position>$(pp_images).size())nextImage.src=pp_images[set_position+1];prevImage=new Image();if(isSet&&pp_images[set_position-1])prevImage.src=pp_images[set_position-1];$pp_pic_holder.find('#pp_full_res')[0].innerHTML=settings.image_markup;$pp_pic_holder.find('#fullResImage').attr('src',pp_images[set_position]);imgPreloader.onload=function(){correctSizes=_fitToViewport(imgPreloader.width,imgPreloader.height);_showContent();};imgPreloader.onerror=function(){alert('Image cannot be loaded. Make sure the path is correct and image exist.');$.prettyPhoto.close();};imgPreloader.src=pp_images[set_position];break;case'youtube':correctSizes=_fitToViewport(movie_width,movie_height);movie='http://www.youtube.com/v/'+grab_param('v',pp_images[set_position]);if(settings.autoplay)movie+="&autoplay=1";toInject=settings.flash_markup.replace(/{width}/g,correctSizes['width']).replace(/{height}/g,correctSizes['height']).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case'vimeo':correctSizes=_fitToViewport(movie_width,movie_height);movie_id=pp_images[set_position];var regExp=/http:\/\/(www\.)?vimeo.com\/(\d+)/;var match=movie_id.match(regExp);movie='http://player.vimeo.com/video/'+match[2]+'?title=0&amp;byline=0&amp;portrait=0';if(settings.autoplay)movie+="&autoplay=1;";vimeo_width=correctSizes['width']+'/embed/?moog_width='+correctSizes['width'];toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,correctSizes['height']).replace(/{path}/g,movie);break;case'quicktime':correctSizes=_fitToViewport(movie_width,movie_height);correctSizes['height']+=15;correctSizes['contentHeight']+=15;correctSizes['containerHeight']+=15;toInject=settings.quicktime_markup.replace(/{width}/g,correctSizes['width']).replace(/{height}/g,correctSizes['height']).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case'flash':correctSizes=_fitToViewport(movie_width,movie_height);flash_vars=pp_images[set_position];flash_vars=flash_vars.substring(pp_images[set_position].indexOf('flashvars')+10,pp_images[set_position].length);filename=pp_images[set_position];filename=filename.substring(0,filename.indexOf('?'));toInject=settings.flash_markup.replace(/{width}/g,correctSizes['width']).replace(/{height}/g,correctSizes['height']).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+'?'+flash_vars);break;case'iframe':correctSizes=_fitToViewport(movie_width,movie_height);frame_url=pp_images[set_position];frame_url=frame_url.substr(0,frame_url.indexOf('iframe')-1);toInject=settings.iframe_markup.replace(/{width}/g,correctSizes['width']).replace(/{height}/g,correctSizes['height']).replace(/{path}/g,frame_url);break;case'custom':correctSizes=_fitToViewport(movie_width,movie_height);toInject=settings.custom_markup;break;case'inline':myClone=$(pp_images[set_position]).clone().css({'width':settings.default_width,'height':settings.default_height}).wrapInner('<div id="pp_full_res"><div class="pp_inline clearfix"></div></div>').appendTo($('body'));correctSizes=_fitToViewport($(myClone).width(),$(myClone).height());$(myClone).remove();toInject=settings.inline_markup.replace(/{content}/g,$(pp_images[set_position]).html());break;};if(!imgPreloader){$pp_pic_holder.find('#pp_full_res')[0].innerHTML=toInject;_showContent();};});return false;};$.prettyPhoto.changePage=function(direction){currentGalleryPage=0;if(direction=='previous'){set_position--;if(set_position<0){set_position=0;return;};}else if(direction=='next'){set_position++;if(set_position>$(pp_images).size()-1){set_position=0;}}else{set_position=direction;};if(!doresize)doresize=true;$('.pp_contract').removeClass('pp_contract').addClass('pp_expand');_hideContent(function(){$.prettyPhoto.open();});};$.prettyPhoto.changeGalleryPage=function(direction){if(direction=='next'){currentGalleryPage++;if(currentGalleryPage>totalPage){currentGalleryPage=0;};}else if(direction=='previous'){currentGalleryPage--;if(currentGalleryPage<0){currentGalleryPage=totalPage;};}else{currentGalleryPage=direction;};itemsToSlide=(currentGalleryPage==totalPage)?pp_images.length-((totalPage)*itemsPerPage):itemsPerPage;$pp_pic_holder.find('.pp_gallery li').each(function(i){$(this).animate({'left':(i*itemWidth)-((itemsToSlide*itemWidth)*currentGalleryPage)});});};$.prettyPhoto.startSlideshow=function(){if(typeof pp_slideshow=='undefined'){$pp_pic_holder.find('.pp_play').unbind('click').removeClass('pp_play').addClass('pp_pause').click(function(){$.prettyPhoto.stopSlideshow();return false;});pp_slideshow=setInterval($.prettyPhoto.startSlideshow,settings.slideshow);}else{$.prettyPhoto.changePage('next');};}
$.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find('.pp_pause').unbind('click').removeClass('pp_pause').addClass('pp_play').click(function(){$.prettyPhoto.startSlideshow();return false;});clearInterval(pp_slideshow);pp_slideshow=undefined;}
$.prettyPhoto.close=function(){clearInterval(pp_slideshow);$pp_pic_holder.stop().find('object,embed').css('visibility','hidden');$('div.pp_pic_holder,div.ppt,.pp_fade').fadeOut(settings.animation_speed,function(){$(this).remove();});$pp_overlay.fadeOut(settings.animation_speed,function(){if($.browser.msie&&$.browser.version==6)$('select').css('visibility','visible');if(settings.hideflash)$('object,embed').css('visibility','visible');$(this).remove();$(window).unbind('scroll');settings.callback();doresize=true;pp_open=false;delete settings;});};_showContent=function(){$('.pp_loaderIcon').hide();$ppt.fadeTo(settings.animation_speed,1);projectedTop=scroll_pos['scrollTop']+((windowHeight/2)-(correctSizes['containerHeight']/2));if(projectedTop<0)projectedTop=0;$pp_pic_holder.find('.pp_content').animate({'height':correctSizes['contentHeight']},settings.animation_speed);$pp_pic_holder.animate({'top':projectedTop,'left':(windowWidth/2)-(correctSizes['containerWidth']/2),'width':correctSizes['containerWidth']},settings.animation_speed,function(){$pp_pic_holder.find('.pp_hoverContainer,#fullResImage').height(correctSizes['height']).width(correctSizes['width']);$pp_pic_holder.find('.pp_fade').fadeIn(settings.animation_speed);if(isSet&&_getFileType(pp_images[set_position])=="image"){$pp_pic_holder.find('.pp_hoverContainer').show();}else{$pp_pic_holder.find('.pp_hoverContainer').hide();}
if(correctSizes['resized'])$('a.pp_expand,a.pp_contract').fadeIn(settings.animation_speed);if(settings.autoplay_slideshow&&!pp_slideshow&&!pp_open)$.prettyPhoto.startSlideshow();settings.changepicturecallback();pp_open=true;});_insert_gallery();};function _hideContent(callback){$pp_pic_holder.find('#pp_full_res object,#pp_full_res embed').css('visibility','hidden');$pp_pic_holder.find('.pp_fade').fadeOut(settings.animation_speed,function(){$('.pp_loaderIcon').show();callback();});};function _checkPosition(setCount){if(set_position==setCount-1){$pp_pic_holder.find('a.pp_next').css('visibility','hidden');$pp_pic_holder.find('a.pp_next').addClass('disabled').unbind('click');}else{$pp_pic_holder.find('a.pp_next').css('visibility','visible');$pp_pic_holder.find('a.pp_next.disabled').removeClass('disabled').bind('click',function(){$.prettyPhoto.changePage('next');return false;});};if(set_position==0){$pp_pic_holder.find('a.pp_previous').css('visibility','hidden').addClass('disabled').unbind('click');}else{$pp_pic_holder.find('a.pp_previous.disabled').css('visibility','visible').removeClass('disabled').bind('click',function(){$.prettyPhoto.changePage('previous');return false;});};(setCount>1)?$('.pp_nav').show():$('.pp_nav').hide();};function _fitToViewport(width,height){resized=false;_getDimensions(width,height);imageWidth=width,imageHeight=height;if(((pp_containerWidth>windowWidth)||(pp_containerHeight>windowHeight))&&doresize&&settings.allow_resize&&!percentBased){resized=true,fitting=false;while(!fitting){if((pp_containerWidth>windowWidth)){imageWidth=(windowWidth-200);imageHeight=(height/width)*imageWidth;}else if((pp_containerHeight>windowHeight)){imageHeight=(windowHeight-200);imageWidth=(width/height)*imageHeight;}else{fitting=true;};pp_containerHeight=imageHeight,pp_containerWidth=imageWidth;};_getDimensions(imageWidth,imageHeight);};return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(pp_containerHeight),containerWidth:Math.floor(pp_containerWidth)+40,contentHeight:Math.floor(pp_contentHeight),contentWidth:Math.floor(pp_contentWidth),resized:resized};};function _getDimensions(width,height){width=parseFloat(width);height=parseFloat(height);$pp_details=$pp_pic_holder.find('.pp_details');$pp_details.width(width);detailsHeight=parseFloat($pp_details.css('marginTop'))+parseFloat($pp_details.css('marginBottom'));$pp_details=$pp_details.clone().appendTo($('body')).css({'position':'absolute','top':-10000});detailsHeight+=$pp_details.height();detailsHeight=(detailsHeight<=34)?36:detailsHeight;if($.browser.msie&&$.browser.version==7)detailsHeight+=8;$pp_details.remove();pp_contentHeight=height+detailsHeight;pp_contentWidth=width;pp_containerHeight=pp_contentHeight+$ppt.height()+$pp_pic_holder.find('.pp_top').height()+$pp_pic_holder.find('.pp_bottom').height();pp_containerWidth=width;}
function _getFileType(itemSrc){if(itemSrc.match(/youtube\.com\/watch/i)){return'youtube';}else if(itemSrc.match(/vimeo\.com/i)){return'vimeo';}else if(itemSrc.indexOf('.mov')!=-1){return'quicktime';}else if(itemSrc.indexOf('.swf')!=-1){return'flash';}else if(itemSrc.indexOf('iframe')!=-1){return'iframe';}else if(itemSrc.indexOf('custom')!=-1){return'custom';}else if(itemSrc.substr(0,1)=='#'){return'inline';}else{return'image';};};function _center_overlay(){if(doresize&&typeof $pp_pic_holder!='undefined'){scroll_pos=_get_scroll();titleHeight=$ppt.height(),contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width();projectedTop=(windowHeight/2)+scroll_pos['scrollTop']-(contentHeight/2);$pp_pic_holder.css({'top':projectedTop,'left':(windowWidth/2)+scroll_pos['scrollLeft']-(contentwidth/2)});};};function _get_scroll(){if(self.pageYOffset){return{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset};}else if(document.documentElement&&document.documentElement.scrollTop){return{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft};}else if(document.body){return{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft};};};function _resize_overlay(){windowHeight=$(window).height(),windowWidth=$(window).width();if(typeof $pp_overlay!="undefined")$pp_overlay.height($(document).height());};function _insert_gallery(){if(isSet&&settings.overlay_gallery&&_getFileType(pp_images[set_position])=="image"){itemWidth=52+5;navWidth=(settings.theme=="facebook")?58:38;itemsPerPage=Math.floor((correctSizes['containerWidth']-100-navWidth)/itemWidth);itemsPerPage=(itemsPerPage<pp_images.length)?itemsPerPage:pp_images.length;totalPage=Math.ceil(pp_images.length/itemsPerPage)-1;if(totalPage==0){navWidth=0;$pp_pic_holder.find('.pp_gallery .pp_arrow_next,.pp_gallery .pp_arrow_previous').hide();}else{$pp_pic_holder.find('.pp_gallery .pp_arrow_next,.pp_gallery .pp_arrow_previous').show();};galleryWidth=itemsPerPage*itemWidth+navWidth;$pp_pic_holder.find('.pp_gallery').width(galleryWidth).css('margin-left',-(galleryWidth/2));$pp_pic_holder.find('.pp_gallery ul').width(itemsPerPage*itemWidth).find('li.selected').removeClass('selected');goToPage=(Math.floor(set_position/itemsPerPage)<=totalPage)?Math.floor(set_position/itemsPerPage):totalPage;if(itemsPerPage){$pp_pic_holder.find('.pp_gallery').hide().show().removeClass('disabled');}else{$pp_pic_holder.find('.pp_gallery').hide().addClass('disabled');}
$.prettyPhoto.changeGalleryPage(goToPage);$pp_pic_holder.find('.pp_gallery ul li:eq('+set_position+')').addClass('selected');}else{$pp_pic_holder.find('.pp_content').unbind('mouseenter mouseleave');$pp_pic_holder.find('.pp_gallery').hide();}}
function _buildOverlay(caller){theRel=$(caller).attr('rel');galleryRegExp=/\[(?:.*)\]/;isSet=(galleryRegExp.exec(theRel))?true:false;pp_images=(isSet)?jQuery.map(matchedObjects,function(n,i){if($(n).attr('rel').indexOf(theRel)!=-1)return $(n).attr('href');}):$.makeArray($(caller).attr('href'));pp_titles=(isSet)?jQuery.map(matchedObjects,function(n,i){if($(n).attr('rel').indexOf(theRel)!=-1)return($(n).find('img').attr('alt'))?$(n).find('img').attr('alt'):"";}):$.makeArray($(caller).find('img').attr('alt'));pp_descriptions=(isSet)?jQuery.map(matchedObjects,function(n,i){if($(n).attr('rel').indexOf(theRel)!=-1)return($(n).attr('title'))?$(n).attr('title'):"";}):$.makeArray($(caller).attr(pp_settings.desc_attr_name));$('body').append(settings.markup);$pp_pic_holder=$('.pp_pic_holder'),$ppt=$('.ppt'),$pp_overlay=$('div.pp_overlay');if(isSet&&settings.overlay_gallery){currentGalleryPage=0;toInject="";for(var i=0;i<pp_images.length;i++){var regex=new RegExp("(.*?)\.(jpg|jpeg|png|gif)$");var results=regex.exec(pp_images[i]);if(!results){classname='default';}else{classname='';}
toInject+="<li class='"+classname+"'><a href='#'><img src='"+pp_images[i]+"' width='50' alt='' /></a></li>";};toInject=settings.gallery_markup.replace(/{gallery}/g,toInject);$pp_pic_holder.find('#pp_full_res').after(toInject);$pp_pic_holder.find('.pp_gallery .pp_arrow_next').click(function(){$.prettyPhoto.changeGalleryPage('next');$.prettyPhoto.stopSlideshow();return false;});$pp_pic_holder.find('.pp_gallery .pp_arrow_previous').click(function(){$.prettyPhoto.changeGalleryPage('previous');$.prettyPhoto.stopSlideshow();return false;});$pp_pic_holder.find('.pp_content').hover(function(){$pp_pic_holder.find('.pp_gallery:not(.disabled)').fadeIn();},function(){$pp_pic_holder.find('.pp_gallery:not(.disabled)').fadeOut();});itemWidth=52+5;$pp_pic_holder.find('.pp_gallery ul li').each(function(i){$(this).css({'position':'absolute','left':i*itemWidth});$(this).find('a').unbind('click').click(function(){$.prettyPhoto.changePage(i);$.prettyPhoto.stopSlideshow();return false;});});};if(settings.slideshow){$pp_pic_holder.find('.pp_nav').prepend('<a href="#" class="pp_play">Play</a>')
$pp_pic_holder.find('.pp_nav .pp_play').click(function(){$.prettyPhoto.startSlideshow();return false;});}
$pp_pic_holder.attr('class','pp_pic_holder '+settings.theme);$pp_overlay.css({'opacity':0,'height':$(document).height(),'width':$(document).width()}).bind('click',function(){if(!settings.modal)$.prettyPhoto.close();});$('a.pp_close').bind('click',function(){$.prettyPhoto.close();return false;});$('a.pp_expand').bind('click',function(e){if($(this).hasClass('pp_expand')){$(this).removeClass('pp_expand').addClass('pp_contract');doresize=false;}else{$(this).removeClass('pp_contract').addClass('pp_expand');doresize=true;};_hideContent(function(){$.prettyPhoto.open();});return false;});$pp_pic_holder.find('.pp_previous, .pp_nav .pp_arrow_previous').bind('click',function(){$.prettyPhoto.changePage('previous');$.prettyPhoto.stopSlideshow();return false;});$pp_pic_holder.find('.pp_next, .pp_nav .pp_arrow_next').bind('click',function(){$.prettyPhoto.changePage('next');$.prettyPhoto.stopSlideshow();return false;});_center_overlay();};return this.unbind('click').click($.prettyPhoto.initialize);};function grab_param(name,url){name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(url);return(results==null)?"":results[1];}})(jQuery);;;

jQuery.extend({historyCurrentHash:undefined,historyCallback:undefined,historyIframeSrc:undefined,historyNeedIframe:jQuery.browser.msie&&(jQuery.browser.version<8||document.documentMode<8),historyInit:function(callback,src){jQuery.historyCallback=callback;if(src)jQuery.historyIframeSrc=src;var current_hash=location.hash.replace(/\?.*$/,'');jQuery.historyCurrentHash=current_hash;if(jQuery.historyNeedIframe){if(jQuery.historyCurrentHash==''){jQuery.historyCurrentHash='#';}
jQuery("body").prepend('<iframe id="jQuery_history" style="display: none;"'+' src="javascript:false;"></iframe>');var ihistory=jQuery("#jQuery_history")[0];var iframe=ihistory.contentWindow.document;iframe.open();iframe.close();iframe.location.hash=current_hash;}
else if(jQuery.browser.safari){jQuery.historyBackStack=[];jQuery.historyBackStack.length=history.length;jQuery.historyForwardStack=[];jQuery.lastHistoryLength=history.length;jQuery.isFirst=true;}
if(current_hash)
jQuery.historyCallback(current_hash.replace(/^#/,''));setInterval(jQuery.historyCheck,100);},historyAddHistory:function(hash){jQuery.historyBackStack.push(hash);jQuery.historyForwardStack.length=0;this.isFirst=true;},historyCheck:function(){if(jQuery.historyNeedIframe){var ihistory=jQuery("#jQuery_history")[0];var iframe=ihistory.contentDocument||ihistory.contentWindow.document;var current_hash=iframe.location.hash.replace(/\?.*$/,'');if(current_hash!=jQuery.historyCurrentHash){location.hash=current_hash;jQuery.historyCurrentHash=current_hash;jQuery.historyCallback(current_hash.replace(/^#/,''));}}else if(jQuery.browser.safari){if(jQuery.lastHistoryLength==history.length&&jQuery.historyBackStack.length>jQuery.lastHistoryLength){jQuery.historyBackStack.shift();}
if(!jQuery.dontCheck){var historyDelta=history.length-jQuery.historyBackStack.length;jQuery.lastHistoryLength=history.length;if(historyDelta){jQuery.isFirst=false;if(historyDelta<0){for(var i=0;i<Math.abs(historyDelta);i++)jQuery.historyForwardStack.unshift(jQuery.historyBackStack.pop());}else{for(var i=0;i<historyDelta;i++)jQuery.historyBackStack.push(jQuery.historyForwardStack.shift());}
var cachedHash=jQuery.historyBackStack[jQuery.historyBackStack.length-1];if(cachedHash!=undefined){jQuery.historyCurrentHash=location.hash.replace(/\?.*$/,'');jQuery.browser.safari
jQuery.historyCallback(cachedHash);}}else if(jQuery.historyBackStack[jQuery.historyBackStack.length-1]==undefined&&!jQuery.isFirst){if(location.hash){var current_hash=location.hash;jQuery.historyCallback(location.hash.replace(/^#/,''));}else{var current_hash='';jQuery.historyCallback('');}
jQuery.isFirst=true;}}}else{var current_hash=location.hash.replace(/\?.*$/,'');if(current_hash!=jQuery.historyCurrentHash){jQuery.historyCurrentHash=current_hash;jQuery.historyCallback(current_hash.replace(/^#/,''));}}},historyLoad:function(hash){var newhash;hash=decodeURIComponent(hash.replace(/\?.*$/,''));if(jQuery.browser.safari){newhash=hash;}
else{newhash='#'+hash;location.hash=newhash;}
jQuery.historyCurrentHash=newhash;if(jQuery.historyNeedIframe){var ihistory=jQuery("#jQuery_history")[0];var iframe=ihistory.contentWindow.document;iframe.open();iframe.close();iframe.location.hash=newhash;jQuery.lastHistoryLength=history.length;jQuery.historyCallback(hash);}
else if(jQuery.browser.safari){jQuery.dontCheck=true;this.historyAddHistory(hash);var fn=function(){jQuery.dontCheck=false;jQuery.historyCallback(hash);};window.setTimeout(fn,200);location.hash=newhash;}
else{jQuery.historyCallback(hash);}}});;;

(function(document){'use strict';hgm.video={_ooyalaCallbacks:[],renderVideo:function(itemId,itemType,$containerOrClass,autoPlay,playEndedCallback){if(itemId){switch(itemType){case'ooyala':return this.renderOoyala(itemId,$containerOrClass,autoPlay,playEndedCallback);case'youtube':return this.renderYouTube(itemId,$containerOrClass,autoPlay,playEndedCallback);case'vimeo':return this.renderVimeo(itemId,$containerOrClass,autoPlay,playEndedCallback);default:hgm.debug('video - invalid type:',itemType);}}},renderOoyala:function(itemId,$container,autoPlay,playEndedCallback){var $player=$('<div class="video_embed" id="ooyala_container_'+itemId+'"></div>'),script=document.createElement('script'),callbackName;if(playEndedCallback){callbackName='hgm.video._ooyalaCallbacks['+this._ooyalaCallbacks.length+']';this._ooyalaCallbacks.push(function(playerId,eventName){if(eventName==='playComplete'){playEndedCallback();}});}
script.src='http://player.ooyala.com/player.js?'+'playerId=player&embedCode='+itemId+'&wmode=transparent&width=590&height=332&playerContainerId=ooyala_container_'+itemId+
(callbackName?'&callback='+callbackName:'')+
(autoPlay?'&autoplay=1':'');$player.append(script);$container.empty().append($player);},renderYouTube:function(itemId,className,autoPlay,playEndedCallback){return new YT.Player(className,{height:332,width:590,videoId:itemId,events:{onReady:function(event){if(autoPlay){event.target.playVideo();}},onStateChange:function(event){if(event.data==YT.PlayerState.ENDED){playEndedCallback();}}}});},renderVimeo:function(itemId,$container){$container.html('<iframe src="//player.vimeo.com/video/'+itemId+'" width="590" height="332" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen autoplay></iframe>');}};}(document));;;

(function(){'use strict';hgm.video.SlideVideo={init:function($video){$video.live('click',function(event){$video.find('img, .play-video-icon').hide();$video.animate({height:390,width:605},'fast',function(){var player=$video.data('player');$video.find('#leadVideo, .close-video').show();if(player){player.playVideo();}
else{player=hgm.video.renderVideo($video.data('id'),$video.data('type'),'leadVideo',true,function(){});$video.data('player',player);}});event.stopPropagation();});$('.close-video').live('click',function(event){$video.data('player').pauseVideo();$video.find('#leadVideo, .close-video').hide();$video.animate({height:165,width:265},'fast',function(){$(this).find('img, .play-video-icon').show();});event.stopPropagation();});}};}());;;

var socialVdoneWidth='large';function checkSocialScrollPos(){"use strict";if($(window).scrollTop()<=$("div.social-v").data('initial-top-offset')){$("div.social-v").css({"position":"absolute","top":$("div.social-v").data('initial-top-offset'),"left":$("div.social-v").data('left-offset')});}else{$("div.social-v").css({'position':'fixed','top':0,"left":$("div.social-v").data('left-offset')});}}
function checkSocialScreenWidth(){"use strict";var curWidth=$(window).width();if(curWidth<1130&&socialVdoneWidth!=='small'){socialVdoneWidth='small';$("div.social-v:visible").fadeOut();return;}
if(curWidth>=1130){if($("div.social-v").length){$("div.social-v").show();$(window).bind('scroll',checkSocialScrollPos);}
$("div.social-v").data('left-offset',$('#global-container').offset().left-44);if(socialVdoneWidth==='small'){socialVdoneWidth='large';}else{checkSocialScrollPos();$('div.social-v').css('visibility','visible');}}else{if($("div.social-v").length){$("div.social-v:visible").fadeOut();$(window).unbind('scroll',checkSocialScrollPos);}}}
function popupCenter(pageURL,w,h){var left=(screen.width/2)-(w/2);var top=(screen.height/2)-(h/2);var targetWin=window.open(pageURL,'sociallinks','toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);return false;}
$(window).load(function(){if($("div.social-v").length){$("div.social-v").data('initial-top-offset',$("div.social-v").offset().top);$("div.social-v").detach().appendTo("body");checkSocialScrollPos();checkSocialScreenWidth();$(window).resize(checkSocialScreenWidth);}
$(".social-v .bookmark-button").live('click',function(){if(window._gaq){_gaq.push(['_trackEvent','Social Buttons Vertical','Bookmark Button Clicked','',0,true]);}
var url=window.location;var title=document.title;var browser=navigator.userAgent.toLowerCase();if(window.sidebar){return true;}else if(window.external){if(browser.indexOf('chrome')==-1){window.external.AddFavorite(url,title);}else{alert('Please Press CTRL+D (Command+D on Macs) to bookmark this page');}}
else if(window.opera&&window.print){return true;}
else if(browser.indexOf('konqueror')!=-1){alert('Please press CTRL+B to bookmark this page.');}
else if(browser.indexOf('webkit')!=-1){alert('Please press CTRL+B (or Command+D for macs) to bookmark this page.');}else{alert('Your browser cannot add bookmarks using this link. Please add this link manually.');}
return false;;});});;;
/*! qTip2  (includes: svg ajax tips modal viewport imagemap ie6 / basic css3) | qtip2.com | Licensed MIT, GPL | Sun Jun 02 2013 14:19:53 */
(function(a,b,c){(function(a){"use strict",typeof define=="function"&&define.amd?define(["jquery"],a):jQuery&&!jQuery.fn.qtip&&a(jQuery)})(function(d){function G(c){v={pageX:c.pageX,pageY:c.pageY,type:"mousemove",scrollX:a.pageXOffset||b.body.scrollLeft||b.documentElement.scrollLeft,scrollY:a.pageYOffset||b.body.scrollTop||b.documentElement.scrollTop}}function H(a){var b=function(a){return a===g||"object"!=typeof a},c=function(a){return!d.isFunction(a)&&(!a&&!a.attr||a.length<1||"object"==typeof a&&!a.jquery&&!a.then)};if(!a||"object"!=typeof a)return f;b(a.metadata)&&(a.metadata={type:a.metadata});if("content"in a){if(b(a.content)||a.content.jquery)a.content={text:a.content};c(a.content.text||f)&&(a.content.text=f),"title"in a.content&&(b(a.content.title)&&(a.content.title={text:a.content.title}),c(a.content.title.text||f)&&(a.content.title.text=f))}return"position"in a&&b(a.position)&&(a.position={my:a.position,at:a.position}),"show"in a&&b(a.show)&&(a.show=a.show.jquery?{target:a.show}:{event:a.show}),"hide"in a&&b(a.hide)&&(a.hide=a.hide.jquery?{target:a.hide}:{event:a.hide}),"style"in a&&b(a.style)&&(a.style={classes:a.style}),d.each(u,function(){this.sanitize&&this.sanitize(a)}),a}function I(h,i,j,k){function O(a){var b=0,c,d=i,e=a.split(".");while(d=d[e[b++]])b<e.length&&(c=d);return[c||i,e.pop()]}function P(a){return y.concat("").join(a?"-"+a+" ":" ")}function Q(){var a=i.style.widget,b=J.hasClass(L);J.removeClass(L),L=a?"ui-state-disabled":"qtip-disabled",J.toggleClass(L,b),J.toggleClass("ui-helper-reset "+P(),a).toggleClass(A,i.style.def&&!a),M.content&&M.content.toggleClass(P("content"),a),M.titlebar&&M.titlebar.toggleClass(P("header"),a),M.button&&M.button.toggleClass(w+"-icon",!a)}function R(a){M.title&&(M.titlebar.remove(),M.titlebar=M.title=M.button=g,a!==f&&q.reposition())}function S(){var a=i.content.title.button,b=typeof a=="string",c=b?a:"Close tooltip";M.button&&M.button.remove(),a.jquery?M.button=a:M.button=d("<a />",{"class":"qtip-close "+(i.style.widget?"":w+"-icon"),title:c,"aria-label":c}).prepend(d("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),M.button.appendTo(M.titlebar||J).attr("role","button").click(function(a){return J.hasClass(L)||q.hide(a),f})}function T(){var a=s+"-title";M.titlebar&&R(),M.titlebar=d("<div />",{"class":w+"-titlebar "+(i.style.widget?P("header"):"")}).append(M.title=d("<div />",{id:a,"class":w+"-title","aria-atomic":e})).insertBefore(M.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(a){d(this).toggleClass("ui-state-active ui-state-focus",a.type.substr(-4)==="down")}).delegate(".qtip-close","mouseover mouseout",function(a){d(this).toggleClass("ui-state-hover",a.type==="mouseover")}),i.content.title.button&&S()}function U(a){var b=M.button;if(!q.rendered)return f;a?S():b.remove()}function V(a,b){var c=M.title;if(!q.rendered||!a)return f;d.isFunction(a)&&(a=a.call(h,N.event,q));if(a===f||!a&&a!=="")return R(f);a.jquery&&a.length>0?c.empty().append(a.css({display:"block"})):c.html(a),b!==f&&q.rendered&&J[0].offsetWidth>0&&q.reposition(N.event)}function W(a){a&&d.isFunction(a.done)&&a.done(function(a){X(a,null,f)})}function X(a,b,e){function j(a){function i(c){c&&(delete h[c.src],clearTimeout(q.timers.img[c.src]),d(c).unbind(K)),d.isEmptyObject(h)&&(b!==f&&q.reposition(N.event),a())}var e,h={};if((e=g.find("img[src]:not([height]):not([width])")).length===0)return i();e.each(function(a,b){if(h[b.src]!==c)return;var e=0,f=3;(function g(){if(b.height||b.width||e>f)return i(b);e+=1,q.timers.img[b.src]=setTimeout(g,700)})(),d(b).bind("error"+K+" load"+K,function(){i(this)}),h[b.src]=b})}var g=M.content;return!q.rendered||!a?f:(d.isFunction(a)&&(a=a.call(h,N.event,q)||""),e!==f&&W(i.content.deferred),a.jquery&&a.length>0?g.empty().append(a.css({display:"block"})):g.html(a),q.rendered<0?J.queue("fx",j):(I=0,j(d.noop)),q)}function Y(){function m(a){if(J.hasClass(L))return f;clearTimeout(q.timers.show),clearTimeout(q.timers.hide);var b=function(){q.toggle(e,a)};i.show.delay>0?q.timers.show=setTimeout(b,i.show.delay):b()}function n(a){if(J.hasClass(L)||D||I)return f;var b=d(a.relatedTarget||a.target),e=b.closest(z)[0]===J[0],h=b[0]===g.show[0];clearTimeout(q.timers.show),clearTimeout(q.timers.hide);if(c.target==="mouse"&&e||i.hide.fixed&&/mouse(out|leave|move)/.test(a.type)&&(e||h)){try{a.preventDefault(),a.stopImmediatePropagation()}catch(j){}return}i.hide.delay>0?q.timers.hide=setTimeout(function(){q.hide(a)},i.hide.delay):q.hide(a)}function o(a){if(J.hasClass(L))return f;clearTimeout(q.timers.inactive),q.timers.inactive=setTimeout(function(){q.hide(a)},i.hide.inactive)}function p(a){q.rendered&&J[0].offsetWidth>0&&q.reposition(a)}var c=i.position,g={show:i.show.target,hide:i.hide.target,viewport:d(c.viewport),document:d(b),body:d(b.body),window:d(a)},k={show:d.trim(""+i.show.event).split(" "),hide:d.trim(""+i.hide.event).split(" ")},l=d.browser.msie&&parseInt(d.browser.version,10)===6;J.bind("mouseenter"+K+" mouseleave"+K,function(a){var b=a.type==="mouseenter";b&&q.focus(a),J.toggleClass(C,b)}),/mouse(out|leave)/i.test(i.hide.event)&&i.hide.leave==="window"&&g.window.bind("mouseout"+K+" blur"+K,function(a){!/select|option/.test(a.target.nodeName)&&!a.relatedTarget&&q.hide(a)}),i.hide.fixed?(g.hide=g.hide.add(J),J.bind("mouseover"+K,function(){J.hasClass(L)||clearTimeout(q.timers.hide)})):/mouse(over|enter)/i.test(i.show.event)&&g.hide.bind("mouseleave"+K,function(a){clearTimeout(q.timers.show)}),(""+i.hide.event).indexOf("unfocus")>-1&&c.container.closest("html").bind("mousedown"+K+" touchstart"+K,function(a){var b=d(a.target),c=q.rendered&&!J.hasClass(L)&&J[0].offsetWidth>0,e=b.parents(z).filter(J[0]).length>0;b[0]!==h[0]&&b[0]!==J[0]&&!e&&!h.has(b[0]).length&&!b.attr("disabled")&&q.hide(a)}),"number"==typeof i.hide.inactive&&(g.show.bind("qtip-"+j+"-inactive",o),d.each(t.inactiveEvents,function(a,b){g.hide.add(M.tooltip).bind(b+K+"-inactive",o)})),d.each(k.hide,function(a,b){var c=d.inArray(b,k.show),e=d(g.hide);c>-1&&e.add(g.show).length===e.length||b==="unfocus"?(g.show.bind(b+K,function(a){J[0].offsetWidth>0?n(a):m(a)}),delete k.show[c]):g.hide.bind(b+K,n)}),d.each(k.show,function(a,b){g.show.bind(b+K,m)}),"number"==typeof i.hide.distance&&g.show.add(J).bind("mousemove"+K,function(a){var b=N.origin||{},c=i.hide.distance,d=Math.abs;(d(a.pageX-b.pageX)>=c||d(a.pageY-b.pageY)>=c)&&q.hide(a)}),c.target==="mouse"&&(g.show.bind("mousemove"+K,G),c.adjust.mouse&&(i.hide.event&&(J.bind("mouseleave"+K,function(a){(a.relatedTarget||a.target)!==g.show[0]&&q.hide(a)}),M.target.bind("mouseenter"+K+" mouseleave"+K,function(a){N.onTarget=a.type==="mouseenter"})),g.document.bind("mousemove"+K,function(a){q.rendered&&N.onTarget&&!J.hasClass(L)&&J[0].offsetWidth>0&&q.reposition(a||v)}))),(c.adjust.resize||g.viewport.length)&&(d.event.special.resize?g.viewport:g.window).bind("resize"+K,p),g.window.bind("scroll"+K,p)}function Z(){var c=[i.show.target[0],i.hide.target[0],q.rendered&&M.tooltip[0],i.position.container[0],i.position.viewport[0],i.position.container.closest("html")[0],a,b];q.rendered?d([]).pushStack(d.grep(c,function(a){return typeof a=="object"})).unbind(K):i.show.target.unbind(K+"-create")}var q=this,r=b.body,s=w+"-"+j,D=0,I=0,J=d(),K=".qtip-"+j,L="qtip-disabled",M,N;q.id=j,q.rendered=f,q.destroyed=f,q.elements=M={target:h},q.timers={img:{}},q.options=i,q.checks={},q.plugins={},q.cache=N={event:{},target:d(),disabled:f,attr:k,onTarget:f,lastClass:""},q.checks.builtin={"^id$":function(a,b,c){var g=c===e?t.nextid:c,h=w+"-"+g;g!==f&&g.length>0&&!d("#"+h).length&&(J[0].id=h,M.content[0].id=h+"-content",M.title[0].id=h+"-title")},"^content.text$":function(a,b,c){X(i.content.text)},"^content.deferred$":function(a,b,c){W(i.content.deferred)},"^content.title.text$":function(a,b,c){if(!c)return R();!M.title&&c&&T(),V(c)},"^content.title.button$":function(a,b,c){U(c)},"^position.(my|at)$":function(a,b,c){"string"==typeof c&&(a[b]=new u.Corner(c))},"^position.container$":function(a,b,c){q.rendered&&J.appendTo(c)},"^show.ready$":function(){q.rendered?q.toggle(e):q.render(1)},"^style.classes$":function(a,b,c){J.attr("class",w+" qtip "+c)},"^style.width|height":function(a,b,c){J.css(b,c)},"^style.widget|content.title":Q,"^events.(render|show|move|hide|focus|blur)$":function(a,b,c){J[(d.isFunction(c)?"":"un")+"bind"]("tooltip"+b,c)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var a=i.position;J.attr("tracking",a.target==="mouse"&&a.adjust.mouse),Z(),Y()}},d.extend(q,{_triggerEvent:function(a,b,c){var e=d.Event("tooltip"+a);return e.originalEvent=(c?d.extend({},c):g)||N.event||g,J.trigger(e,[q].concat(b||[])),!e.isDefaultPrevented()},render:function(a){if(q.rendered)return q;var b=i.content.text,c=i.content.title,g=i.position;return d.attr(h[0],"aria-describedby",s),J=M.tooltip=d("<div/>",{id:s,"class":[w,A,i.style.classes,w+"-pos-"+i.position.my.abbrev()].join(" "),width:i.style.width||"",height:i.style.height||"",tracking:g.target==="mouse"&&g.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":f,"aria-describedby":s+"-content","aria-hidden":e}).toggleClass(L,N.disabled).data("qtip",q).appendTo(i.position.container).append(M.content=d("<div />",{"class":w+"-content",id:s+"-content","aria-atomic":e})),q.rendered=-1,D=1,c.text?(T(),d.isFunction(c.text)||V(c.text,f)):c.button&&S(),(!d.isFunction(b)||b.then)&&X(b,f),q.rendered=e,Q(),d.each(i.events,function(a,b){d.isFunction(b)&&J.bind(a==="toggle"?"tooltipshow tooltiphide":"tooltip"+a,b)}),d.each(u,function(){this.initialize==="render"&&this(q)}),Y(),J.queue("fx",function(b){q._triggerEvent("render"),D=0,(i.show.ready||a)&&q.toggle(e,N.event,f),b()}),q},get:function(a){var b,c;switch(a.toLowerCase()){case"dimensions":b={height:J.outerHeight(f),width:J.outerWidth(f)};break;case"offset":b=u.offset(J,i.position.container);break;default:c=O(a.toLowerCase()),b=c[0][c[1]],b=b.precedance?b.string():b}return b},set:function(a,b){function m(a,b){var c,d,e;for(c in k)for(d in k[c])if(e=(new RegExp(d,"i")).exec(a))b.push(e),k[c][d].apply(q,b)}var c=/^position\.(my|at|adjust|target|container)|style|content|show\.ready/i,h=/^content\.(title|attr)|style/i,j=f,k=q.checks,l;return"string"==typeof a?(l=a,a={},a[l]=b):a=d.extend(e,{},a),d.each(a,function(b,e){var f=O(b.toLowerCase()),g;g=f[0][f[1]],f[0][f[1]]="object"==typeof e&&e.nodeType?d(e):e,a[b]=[f[0],f[1],e,g],j=c.test(b)||j}),H(i),D=1,d.each(a,m),D=0,q.rendered&&J[0].offsetWidth>0&&j&&q.reposition(i.position.target==="mouse"?g:N.event),q},toggle:function(a,c){function t(){a?(d.browser.msie&&J[0].style.removeAttribute("filter"),J.css("overflow",""),"string"==typeof h.autofocus&&d(h.autofocus,J).focus(),h.target.trigger("qtip-"+j+"-inactive")):J.css({display:"",visibility:"",opacity:"",left:"",top:""}),q._triggerEvent(a?"visible":"hidden")}if(c){if(/over|enter/.test(c.type)&&/out|leave/.test(N.event.type)&&i.show.target.add(c.target).length===i.show.target.length&&J.has(c.relatedTarget).length)return q;N.event=d.extend({},c)}if(!q.rendered)return a?q.render(1):q;var g=a?"show":"hide",h=i[g],k=i[a?"hide":"show"],l=i.position,m=i.content,n=J[0].offsetWidth>0,o=a||h.target.length===1,p=!c||h.target.length<2||N.target[0]===c.target,r,s;return(typeof a).search("boolean|number")&&(a=!n),!J.is(":animated")&&n===a&&p?q:q._triggerEvent(g,[90])?(d.attr(J[0],"aria-hidden",!a),a?(N.origin=d.extend({},v),q.focus(c),d.isFunction(m.text)&&X(m.text,f),d.isFunction(m.title.text)&&V(m.title.text,f),!F&&l.target==="mouse"&&l.adjust.mouse&&(d(b).bind("mousemove.qtip",G),F=e),q.reposition(c,arguments[2]),!h.solo||d(z,h.solo).not(J).qtip("hide",d.Event("tooltipsolo"))):(clearTimeout(q.timers.show),delete N.origin,F&&!d(z+'[tracking="true"]:visible',h.solo).not(J).length&&(d(b).unbind("mousemove.qtip"),F=f),q.blur(c)),h.effect===f||o===f?(J[g](),t.call(J)):d.isFunction(h.effect)?(J.stop(1,1),h.effect.call(J,q),J.queue("fx",function(a){t(),a()})):J.fadeTo(90,a?1:0,t),a&&h.target.trigger("qtip-"+j+"-inactive"),q):q},show:function(a){return q.toggle(e,a)},hide:function(a){return q.toggle(f,a)},focus:function(a){if(!q.rendered)return q;var b=d(z),c=parseInt(J[0].style.zIndex,10),e=t.zindex+b.length,f=d.extend({},a),g;return J.hasClass(B)||q._triggerEvent("focus",[e],f)&&(c!==e&&(b.each(function(){this.style.zIndex>c&&(this.style.zIndex=this.style.zIndex-1)}),b.filter("."+B).qtip("blur",f)),J.addClass(B)[0].style.zIndex=e),q},blur:function(a){return J.removeClass(B),q._triggerEvent("blur",[J.css("zIndex")],a),q},reposition:function(c,e){if(!q.rendered||D)return q;D=1;var g=i.position.target,h=i.position,j=h.my,k=h.at,r=h.adjust,s=r.method.split(" "),t=J.outerWidth(f),w=J.outerHeight(f),x=0,y=0,z=J.css("position"),A=h.viewport,B={left:0,top:0},C=h.container,E=J[0].offsetWidth>0,F=c&&c.type==="scroll",G=d(a),H,I;if(d.isArray(g)&&g.length===2)k={x:m,y:l},B={left:g[0],top:g[1]};else if(g==="mouse"&&(c&&c.pageX||N.event.pageX))k={x:m,y:l},c=v&&v.pageX&&(r.mouse||!c||!c.pageX)?{pageX:v.pageX,pageY:v.pageY}:(c&&(c.type==="resize"||c.type==="scroll")?N.event:c&&c.pageX&&c.type==="mousemove"?c:!r.mouse&&N.origin&&N.origin.pageX&&i.show.distance?N.origin:c)||c||N.event||v||{},z!=="static"&&(B=C.offset()),B={left:c.pageX-B.left,top:c.pageY-B.top},r.mouse&&F&&(B.left-=v.scrollX-G.scrollLeft(),B.top-=v.scrollY-G.scrollTop());else{g==="event"&&c&&c.target&&c.type!=="scroll"&&c.type!=="resize"?N.target=d(c.target):g!=="event"&&(N.target=d(g.jquery?g:M.target)),g=N.target,g=d(g).eq(0);if(g.length===0)return q;g[0]===b||g[0]===a?(x=u.iOS?a.innerWidth:g.width(),y=u.iOS?a.innerHeight:g.height(),g[0]===a&&(B={top:(A||g).scrollTop(),left:(A||g).scrollLeft()})):u.imagemap&&g.is("area")?H=u.imagemap(q,g,k,u.viewport?s:f):u.svg&&g[0].ownerSVGElement?H=u.svg(q,g,k,u.viewport?s:f):(x=g.outerWidth(f),y=g.outerHeight(f),B=u.offset(g,C)),H&&(x=H.width,y=H.height,I=H.offset,B=H.position);if(u.iOS>3.1&&u.iOS<4.1||u.iOS>=4.3&&u.iOS<4.33||!u.iOS&&z==="fixed")B.left-=G.scrollLeft(),B.top-=G.scrollTop();B.left+=k.x===o?x:k.x===p?x/2:0,B.top+=k.y===n?y:k.y===p?y/2:0}return B.left+=r.x+(j.x===o?-t:j.x===p?-t/2:0),B.top+=r.y+(j.y===n?-w:j.y===p?-w/2:0),u.viewport?(B.adjusted=u.viewport(q,B,h,x,y,t,w),I&&B.adjusted.left&&(B.left+=I.left),I&&B.adjusted.top&&(B.top+=I.top)):B.adjusted={left:0,top:0},q._triggerEvent("move",[B,A.elem||A],c)?(delete B.adjusted,e===f||!E||isNaN(B.left)||isNaN(B.top)||g==="mouse"||!d.isFunction(h.effect)?J.css(B):d.isFunction(h.effect)&&(h.effect.call(J,q,d.extend({},B)),J.queue(function(a){d(this).css({opacity:"",height:""}),d.browser.msie&&this.style.removeAttribute("filter"),a()})),D=0,q):q},disable:function(a){return"boolean"!=typeof a&&(a=!J.hasClass(L)&&!N.disabled),q.rendered?(J.toggleClass(L,a),d.attr(J[0],"aria-disabled",a)):N.disabled=!!a,q},enable:function(){return q.disable(f)},destroy:function(){var a=h[0],b=d.attr(a,E),c=h.data("qtip");q.destroyed=e,q.rendered&&(J.stop(1,0).remove(),d.each(q.plugins,function(){this.destroy&&this.destroy()})),clearTimeout(q.timers.show),clearTimeout(q.timers.hide),Z();if(!c||q===c)d.removeData(a,"qtip"),i.suppress&&b&&(d.attr(a,"title",b),h.removeAttr(E)),h.removeAttr("aria-describedby");return h.unbind(".qtip-"+j),delete x[q.id],h}})}function J(a,c){var h,i,j,k,l,m=d(this),n=d(b.body),o=this===b?n:m,p=m.metadata?m.metadata(c.metadata):g,q=c.metadata.type==="html5"&&p?p[c.metadata.name]:g,r=m.data(c.metadata.name||"qtipopts");try{r=typeof r=="string"?d.parseJSON(r):r}catch(s){}k=d.extend(e,{},t.defaults,c,typeof r=="object"?H(r):g,H(q||p)),i=k.position,k.id=a;if("boolean"==typeof k.content.text){j=m.attr(k.content.attr);if(k.content.attr!==f&&j)k.content.text=j;else return f}i.container.length||(i.container=n),i.target===f&&(i.target=o),k.show.target===f&&(k.show.target=o),k.show.solo===e&&(k.show.solo=i.container.closest("body")),k.hide.target===f&&(k.hide.target=o),k.position.viewport===e&&(k.position.viewport=i.container),i.container=i.container.eq(0),i.at=new u.Corner(i.at),i.my=new u.Corner(i.my);if(d.data(this,"qtip"))if(k.overwrite)m.qtip("destroy");else if(k.overwrite===f)return f;return k.suppress&&(l=d.attr(this,"title"))&&d(this).removeAttr("title").attr(E,l).attr("title",""),h=new I(m,k,a,!!j),d.data(this,"qtip",h),m.bind("remove.qtip-"+a+" removeqtip.qtip-"+a,function(){h.destroy()}),h}function K(a){var b=this,c=a.elements.tooltip,g=a.options.content.ajax,h=t.defaults.content.ajax,i=".qtip-ajax",j=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,k=e,l=f,m;a.checks.ajax={"^content.ajax":function(a,d,e){d==="ajax"&&(g=e),d==="once"?b.init():g&&g.url?b.load():c.unbind(i)}},d.extend(b,{init:function(){return g&&g.url&&c.unbind(i)[g.once?"one":"bind"]("tooltipshow"+i,b.load),b},load:function(c){function r(){var b;if(a.destroyed)return;k=f,p&&(l=e,a.show(c.originalEvent)),(b=h.complete||g.complete)&&d.isFunction(b)&&b.apply(g.context||a,arguments)}function s(b,c,e){var f;if(a.destroyed)return;o&&"string"==typeof b&&(b=d("<div/>").append(b.replace(j,"")).find(o)),(f=h.success||g.success)&&d.isFunction(f)?f.call(g.context||a,b,c,e):a.set("content.text",b)}function t(b,c,d){if(a.destroyed||b.status===0)return;a.set("content.text",c+": "+d)}if(l){l=f;return}var i=g.url.lastIndexOf(" "),n=g.url,o,p=!g.loading&&k;if(p)try{c.preventDefault()}catch(q){}else if(c&&c.isDefaultPrevented())return b;m&&m.abort&&m.abort(),i>-1&&(o=n.substr(i),n=n.substr(0,i)),m=d.ajax(d.extend({error:h.error||t,context:a},g,{url:n,success:s,complete:r}))},destroy:function(){m&&m.abort&&m.abort(),a.destroyed=e}}),b.init()}function L(a,b,c){var d=Math.ceil(b/2),e=Math.ceil(c/2),f={bottomright:[[0,0],[b,c],[b,0]],bottomleft:[[0,0],[b,0],[0,c]],topright:[[0,c],[b,0],[b,c]],topleft:[[0,0],[0,c],[b,c]],topcenter:[[0,c],[d,0],[b,c]],bottomcenter:[[0,0],[b,0],[d,c]],rightcenter:[[0,0],[b,e],[0,c]],leftcenter:[[b,0],[b,c],[0,e]]};return f.lefttop=f.bottomright,f.righttop=f.bottomleft,f.leftbottom=f.topright,f.rightbottom=f.topleft,f[a.string()]}function M(a,b){function D(a){var b=v.is(":visible");v.show(),a(),v.toggle(b)}function E(){x.width=r.height,x.height=r.width}function F(){x.width=r.width,x.height=r.height}function G(b,d,g,j){if(!t.tip)return;var k=q.corner.clone(),u=g.adjusted,v=a.options.position.adjust.method.split(" "),x=v[0],y=v[1]||v[0],z={left:f,top:f,x:0,y:0},A,B={},C;q.corner.fixed!==e&&(x===s&&k.precedance===h&&u.left&&k.y!==p?k.precedance=k.precedance===h?i:h:x!==s&&u.left&&(k.x=k.x===p?u.left>0?m:o:k.x===m?o:m),y===s&&k.precedance===i&&u.top&&k.x!==p?k.precedance=k.precedance===i?h:i:y!==s&&u.top&&(k.y=k.y===p?u.top>0?l:n:k.y===l?n:l),k.string()!==w.corner.string()&&(w.top!==u.top||w.left!==u.left)&&q.update(k,f)),A=q.position(k,u),A[k.x]+=I(k,k.x),A[k.y]+=I(k,k.y),A.right!==c&&(A.left=-A.right),A.bottom!==c&&(A.top=-A.bottom),A.user=Math.max(0,r.offset);if(z.left=x===s&&!!u.left)k.x===p?B["margin-left"]=z.x=A["margin-left"]:(C=A.right!==c?[u.left,-A.left]:[-u.left,A.left],(z.x=Math.max(C[0],C[1]))>C[0]&&(g.left-=u.left,z.left=f),B[A.right!==c?o:m]=z.x);if(z.top=y===s&&!!u.top)k.y===p?B["margin-top"]=z.y=A["margin-top"]:(C=A.bottom!==c?[u.top,-A.top]:[-u.top,A.top],(z.y=Math.max(C[0],C[1]))>C[0]&&(g.top-=u.top,z.top=f),B[A.bottom!==c?n:l]=z.y);t.tip.css(B).toggle(!(z.x&&z.y||k.x===p&&z.y||k.y===p&&z.x)),g.left-=A.left.charAt?A.user:x!==s||z.top||!z.left&&!z.top?A.left:0,g.top-=A.top.charAt?A.user:y!==s||z.left||!z.left&&!z.top?A.top:0,w.left=u.left,w.top=u.top,w.corner=k.clone()}function H(){var b=r.corner,c=a.options.position,d=c.at,g=c.my.string?c.my.string():c.my;return b===f||g===f&&d===f?f:(b===e?q.corner=new u.Corner(g):b.string||(q.corner=new u.Corner(b),q.corner.fixed=e),w.corner=new u.Corner(q.corner.string()),q.corner.string()!=="centercenter")}function I(a,b,c){b=b?b:a[a.precedance];var d=t.titlebar&&a.y===l,e=d?t.titlebar:v,f="border-"+b+"-width",g=function(a){return parseInt(a.css(f),10)},h;return D(function(){h=(c?g(c):g(t.content)||g(e)||g(v))||0}),h}function J(a){var b=t.titlebar&&a.y===l,c=b?t.titlebar:t.content,e=d.browser.mozilla,f=e?"-moz-":d.browser.webkit?"-webkit-":"",g="border-radius-"+a.y+a.x,h="border-"+a.y+"-"+a.x+"-radius",i=function(a){return parseInt(c.css(a),10)||parseInt(v.css(a),10)},j;return D(function(){j=i(h)||i(f+h)||i(f+g)||i(g)||0}),j}function K(a){function z(a,b,c){var d=a.css(b)||n;return c&&d===a.css(c)?f:j.test(d)?f:d}var b,c,g,h=t.tip.css("cssText",""),i=a||q.corner,j=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,k="border-"+i[i.precedance]+"-color",m="background-color",n="transparent",o=" !important",s=t.titlebar,u=s&&(i.y===l||i.y===p&&h.position().top+x.height/2+r.offset<s.outerHeight(e)),w=u?s:t.content;D(function(){y.fill=z(h,m)||z(w,m)||z(t.content,m)||z(v,m)||h.css(m),y.border=z(h,k,"color")||z(w,k,"color")||z(t.content,k,"color")||z(v,k,"color")||v.css(k),d("*",h).add(h).css("cssText",m+":"+n+o+";border:0"+o+";")})}function M(a){var b=a.precedance===i,c=x[b?j:k],d=x[b?k:j],e=a.string().indexOf(p)>-1,f=c*(e?.5:1),g=Math.pow,h=Math.round,l,m,n,o=Math.sqrt(g(f,2)+g(d,2)),q=[z/f*o,z/d*o];return q[2]=Math.sqrt(g(q[0],2)-g(z,2)),q[3]=Math.sqrt(g(q[1],2)-g(z,2)),l=o+q[2]+q[3]+(e?0:q[0]),m=l/o,n=[h(m*d),h(m*c)],{height:n[b?0:1],width:n[b?1:0]}}function N(a,b,c){return"<qvml:"+a+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(b||"")+' style="behavior: url(#default#VML); '+(c||"")+'" />'}var q=this,r=a.options.style.tip,t=a.elements,v=t.tooltip,w={top:0,left:0},x={width:r.width,height:r.height},y={},z=r.border||0,A=".qtip-tip",B=!!(d("<canvas />")[0]||{}).getContext,C;q.corner=g,q.mimic=g,q.border=z,q.offset=r.offset,q.size=x,a.checks.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){q.init()||q.destroy(),a.reposition()},"^style.tip.(height|width)$":function(){x={width:r.width,height:r.height},q.create(),q.update(),a.reposition()},"^content.title.text|style.(classes|widget)$":function(){t.tip&&t.tip.length&&q.update()}},d.extend(q,{init:function(){var a=H()&&(B||d.browser.msie);return a&&(q.create(),q.update(),v.unbind(A).bind("tooltipmove"+A,G)),a},create:function(){var a=x.width,b=x.height,c;t.tip&&t.tip.remove(),t.tip=d("<div />",{"class":"qtip-tip"}).css({width:a,height:b}).prependTo(v),B?d("<canvas />").appendTo(t.tip)[0].getContext("2d").save():(c=N("shape",'coordorigin="0,0"',"position:absolute;"),t.tip.html(c+c),d("*",t.tip).bind("click mousedown",function(a){a.stopPropagation()}))},update:function(a,b){var c=t.tip,j=c.children(),k=x.width,s=x.height,A=r.mimic,C=Math.round,D,G,H,J,O;a||(a=w.corner||q.corner),A===f?A=a:(A=new u.Corner(A),A.precedance=a.precedance,A.x==="inherit"?A.x=a.x:A.y==="inherit"?A.y=a.y:A.x===A.y&&(A[a.precedance]=a[a.precedance])),D=A.precedance,a.precedance===h?E():F(),t.tip.css({width:k=x.width,height:s=x.height}),K(a),y.border!=="transparent"?(z=I(a,g),r.border===0&&z>0&&(y.fill=y.border),q.border=z=r.border!==e?r.border:z):q.border=z=0,H=L(A,k,s),q.size=O=M(a),c.css(O).css("line-height",O.height+"px"),a.precedance===i?J=[C(A.x===m?z:A.x===o?O.width-k-z:(O.width-k)/2),C(A.y===l?O.height-s:0)]:J=[C(A.x===m?O.width-k:0),C(A.y===l?z:A.y===n?O.height-s-z:(O.height-s)/2)],B?(j.attr(O),G=j[0].getContext("2d"),G.restore(),G.save(),G.clearRect(0,0,3e3,3e3),G.fillStyle=y.fill,G.strokeStyle=y.border,G.lineWidth=z*2,G.lineJoin="miter",G.miterLimit=100,G.translate(J[0],J[1]),G.beginPath(),G.moveTo(H[0][0],H[0][1]),G.lineTo(H[1][0],H[1][1]),G.lineTo(H[2][0],H[2][1]),G.closePath(),z&&(v.css("background-clip")==="border-box"&&(G.strokeStyle=y.fill,G.stroke()),G.strokeStyle=y.border,G.stroke()),G.fill()):(H="m"+H[0][0]+","+H[0][1]+" l"+H[1][0]+","+H[1][1]+" "+H[2][0]+","+H[2][1]+" xe",J[2]=z&&/^(r|b)/i.test(a.string())?parseFloat(d.browser.version,10)===8?2:1:0,j.css({coordsize:k+z+" "+(s+z),antialias:""+(A.string().indexOf(p)>-1),left:J[0],top:J[1],width:k+z,height:s+z}).each(function(a){var b=d(this);b[b.prop?"prop":"attr"]({coordsize:k+z+" "+(s+z),path:H,fillcolor:y.fill,filled:!!a,stroked:!a}).toggle(!!z||!!a),!a&&b.html()===""&&b.html(N("stroke",'weight="'+z*2+'px" color="'+y.border+'" miterlimit="1000" joinstyle="miter"'))})),b!==f&&q.position(a)},position:function(a){var b=t.tip,c={},e=Math.max(0,r.offset),g,n,o;return r.corner===f||!b?f:(a=a||q.corner,g=a.precedance,n=M(a),o=[a.x,a.y],g===h&&o.reverse(),d.each(o,function(b,d){var f,h,o;d===p?(f=g===i?m:l,c[f]="50%",c["margin-"+f]=-Math.round(n[g===i?j:k]/2)+e):(f=I(a,d),h=I(a,d,t.content),o=J(a),c[d]=b?h:e+(o>f?o:-f))}),c[a[g]]-=n[g===h?j:k],b.css({top:"",bottom:"",left:"",right:"",margin:""}).css(c),c)},destroy:function(){t.tip&&t.tip.remove(),t.tip=!1,v.unbind(A)}}),q.init()}function N(c){function s(){q=d(p,j).not("[disabled]").map(function(){return typeof this.focus=="function"?this:null})}function t(a){q.length<1&&a.length?a.not("body").blur():q.first().focus()}function v(a){var b=d(a.target),c=b.closest(".qtip"),e;e=c.length<1?f:parseInt(c[0].style.zIndex,10)>parseInt(j[0].style.zIndex,10),!e&&d(a.target).closest(z)[0]!==j[0]&&t(b)}var g=this,h=c.options.show.modal,i=c.elements,j=i.tooltip,k="#qtip-overlay",l=".qtipmodal",m=l+c.id,n="is-modal-qtip",o=d(b.body),p=u.modal.focusable.join(","),q={},r;c.checks.modal={"^show.modal.(on|blur)$":function(){g.init(),i.overlay.toggle(j.is(":visible"))},"^content.text$":function(){s()}},d.extend(g,{init:function(){return h.on?(r=g.create(),j.attr(n,e).css("z-index",u.modal.zindex+d(z+"["+n+"]").length).unbind(l).unbind(m).bind("tooltipshow"+l+" tooltiphide"+l,function(a,b,c){var e=a.originalEvent;if(a.target===j[0])if(e&&a.type==="tooltiphide"&&/mouse(leave|enter)/.test(e.type)&&d(e.relatedTarget).closest(r[0]).length)try{a.preventDefault()}catch(f){}else(!e||e&&!e.solo)&&g[a.type.replace("tooltip","")](a,c)}).bind("tooltipfocus"+l,function(a){if(a.isDefaultPrevented()||a.target!==j[0])return;var b=d(z).filter("["+n+"]"),c=u.modal.zindex+b.length,e=parseInt(j[0].style.zIndex,10);r[0].style.zIndex=c-2,b.each(function(){this.style.zIndex>e&&(this.style.zIndex-=1)}),b.end().filter("."+B).qtip("blur",a.originalEvent),j.addClass(B)[0].style.zIndex=c;try{a.preventDefault()}catch(f){}}).bind("tooltiphide"+l,function(a){a.target===j[0]&&d("["+n+"]").filter(":visible").not(j).last().qtip("focus",a)}),h.escape&&d(b).unbind(m).bind("keydown"+m,function(a){a.keyCode===27&&j.hasClass(B)&&c.hide(a)}),h.blur&&i.overlay.unbind(m).bind("click"+m,function(a){j.hasClass(B)&&c.hide(a)}),s(),g):g},create:function(){function e(){r.css({height:c.height(),width:c.width()})}var b=d(k),c=d(a);return b.length?i.overlay=b.insertAfter(d(z).last()):(r=i.overlay=d("<div />",{id:k.substr(1),html:"<div></div>",mousedown:function(){return f}}).hide().insertAfter(d(z).last()),c.unbind(l).bind("resize"+l,e),e(),r)},toggle:function(a,b,c){if(a&&a.isDefaultPrevented())return g;var i=h.effect,k=b?"show":"hide",l=r.is(":visible"),p=d("["+n+"]").filter(":visible").not(j),q;return r||(r=g.create()),r.is(":animated")&&l===b&&r.data("toggleState")!==f||!b&&p.length?g:(b?(r.css({left:0,top:0}),r.toggleClass("blurs",h.blur),h.stealfocus!==f&&(o.bind("focusin"+m,v),t(d("body :focus")))):o.unbind("focusin"+m),r.stop(e,f).data("toggleState",b),d.isFunction(i)?i.call(r,b):i===f?r[k]():r.fadeTo(parseInt(c,10)||90,b?1:0,function(){b||d(this).hide()}),b||r.queue(function(a){r.css({left:"",top:""}).removeData("toggleState"),a()}),g)},show:function(a,b){return g.toggle(a,e,b)},hide:function(a,b){return g.toggle(a,f,b)},destroy:function(){var a=r;return a&&(a=d("["+n+"]").not(j).length<1,a?(i.overlay.remove(),d(b).unbind(l)):i.overlay.unbind(l+c.id),o.unbind("focusin"+m)),j.removeAttr(n).unbind(l)}}),g.init()}function O(c){var g=this,h=c.elements,i=c.options,l=h.tooltip,m=".ie6-"+c.id,n=d("select, object").length<1,o=0,p=f,q;c.checks.ie6={"^content|style$":function(a,b,c){redraw()}},d.extend(g,{init:function(){var c=d(a),f;n&&(h.bgiframe=d('<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>'),h.bgiframe.appendTo(l),l.bind("tooltipmove"+m,g.adjustBGIFrame)),q=d("<div/>",{id:"qtip-rcontainer"}).appendTo(b.body),g.redraw(),h.overlay&&!p&&(f=function(){h.overlay[0].style.top=c.scrollTop()+"px"},c.bind("scroll.qtip-ie6, resize.qtip-ie6",f),f(),h.overlay.addClass("qtipmodal-ie6fix"),p=e)},adjustBGIFrame:function(){var a=c.get("dimensions"),b=c.plugins.tip,d=h.tip,e,f;f=parseInt(l.css("border-left-width"),10)||0,f={left:-f,top:-f},b&&d&&(e=b.corner.precedance==="x"?["width","left"]:["height","top"],f[e[1]]-=d[e[0]]()),h.bgiframe.css(f).css(a)},redraw:function(){if(c.rendered<1||o)return g;var a=i.style,b=i.position.container,d,e,f,h;return o=1,a.height&&l.css(k,a.height),a.width?l.css(j,a.width):(l.css(j,"").appendTo(q),e=l.width(),e%2<1&&(e+=1),f=l.css("max-width")||"",h=l.css("min-width")||"",d=(f+h).indexOf("%")>-1?b.width()/100:0,f=(f.indexOf("%")>-1?d:1)*parseInt(f,10)||e,h=(h.indexOf("%")>-1?d:1)*parseInt(h,10)||0,e=f+h?Math.min(Math.max(e,h),f):e,l.css(j,Math.round(e)).appendTo(b)),o=0,g},destroy:function(){n&&h.bgiframe.remove(),l.unbind(m)}}),g.init()}var e=!0,f=!1,g=null,h="x",i="y",j="width",k="height",l="top",m="left",n="bottom",o="right",p="center",q="flip",r="flipinvert",s="shift",t,u,v,w="qtip",x={},y=["ui-widget","ui-tooltip"],z="div.qtip."+w,A=w+"-default",B=w+"-focus",C=w+"-hover",D="_replacedByqTip",E="oldtitle",F;t=d.fn.qtip=function(a,b,h){var i=(""+a).toLowerCase(),j=g,k=d.makeArray(arguments).slice(1),l=k[k.length-1],m=this[0]?d.data(this[0],"qtip"):g;if(!arguments.length&&m||i==="api")return m;if("string"==typeof a)return this.each(function(){var a=d.data(this,"qtip");if(!a)return e;l&&l.timeStamp&&(a.cache.event=l);if(i!=="option"&&i!=="options"||!b)a[i]&&a[i].apply(a[i],k);else if(d.isPlainObject(b)||h!==c)a.set(b,h);else return j=a.get(b),f}),j!==g?j:this;if("object"==typeof a||!arguments.length)return m=H(d.extend(e,{},a)),t.bind.call(this,m,l)},t.bind=function(a,b){return this.each(function(g){function n(a){function b(){l.render(typeof a=="object"||h.show.ready),i.show.add(i.hide).unbind(k)}if(l.cache.disabled)return f;l.cache.event=d.extend({},a),l.cache.target=a?d(a.target):[c],h.show.delay>0?(clearTimeout(l.timers.show),l.timers.show=setTimeout(b,h.show.delay),j.show!==j.hide&&i.hide.bind(j.hide,function(){clearTimeout(l.timers.show)})):b()}var h,i,j,k,l,m;m=d.isArray(a.id)?a.id[g]:a.id,m=!m||m===f||m.length<1||x[m]?t.nextid++:x[m]=m,k=".qtip-"+m+"-create",l=J.call(this,m,a);if(l===f)return e;h=l.options,d.each(u,function(){this.initialize==="initialize"&&this(l)}),i={show:h.show.target,hide:h.hide.target},j={show:d.trim(""+h.show.event).replace(/ /g,k+" ")+k,hide:d.trim(""+h.hide.event).replace(/ /g,k+" ")+k},/mouse(over|enter)/i.test(j.show)&&!/mouse(out|leave)/i.test(j.hide)&&(j.hide+=" mouseleave"+k),i.show.bind("mousemove"+k,function(a){G(a),l.cache.onTarget=e}),i.show.bind(j.show,n),(h.show.ready||h.prerender)&&n(b)}).attr("data-hasqtip",e)},u=t.plugins={Corner:function(a){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,p).toLowerCase(),this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();var b=a.charAt(0);this.precedance=b==="t"||b==="b"?i:h,this.string=function(){return this.precedance===i?this.y+this.x:this.x+this.y},this.abbrev=function(){var a=this.x.substr(0,1),b=this.y.substr(0,1);return a===b?a:this.precedance===i?b+a:a+b},this.invertx=function(a){this.x=this.x===m?o:this.x===o?m:a||this.x},this.inverty=function(a){this.y=this.y===l?n:this.y===n?l:a||this.y},this.clone=function(){return{x:this.x,y:this.y,precedance:this.precedance,string:this.string,abbrev:this.abbrev,clone:this.clone,invertx:this.invertx,inverty:this.inverty}}},offset:function(a,c){function l(a,b){e.left+=b*a.scrollLeft(),e.top+=b*a.scrollTop()}var e=a.offset(),f=a.closest("body"),g=d.browser.msie&&b.compatMode!=="CSS1Compat",h=c,i,j,k;if(h){do h.css("position")!=="static"&&(j=h.position(),e.left-=j.left+(parseInt(h.css("borderLeftWidth"),10)||0)+(parseInt(h.css("marginLeft"),10)||0),e.top-=j.top+(parseInt(h.css("borderTopWidth"),10)||0)+(parseInt(h.css("marginTop"),10)||0),!i&&(k=h.css("overflow"))!=="hidden"&&k!=="visible"&&(i=h));while((h=d(h[0].offsetParent)).length);(i&&i[0]!==f[0]||g)&&l(i||f,1)}return e},iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||f,fn:{attr:function(a,b){if(this.length){var c=this[0],e="title",f=d.data(c,"qtip");if(a===e&&f&&"object"==typeof f&&f.options.suppress)return arguments.length<2?d.attr(c,E):(f&&f.options.content.attr===e&&f.cache.attr&&f.set("content.text",b),this.attr(E,b))}return d.fn["attr"+D].apply(this,arguments)},clone:function(a){var b=d([]),c="title",e=d.fn["clone"+D].apply(this,arguments);return a||e.filter("["+E+"]").attr("title",function(){return d.attr(this,E)}).removeAttr(E),e}}},d.each(u.fn,function(a,b){if(!b||d.fn[a+D])return e;var c=d.fn[a+D]=d.fn[a];d.fn[a]=function(){return b.apply(this,arguments)||c.apply(this,arguments)}}),d.ui||(d["cleanData"+D]=d.cleanData,d.cleanData=function(a){for(var b=0,e;(e=a[b])!==c;b++)try{d(e).triggerHandler("removeqtip")}catch(f){}d["cleanData"+D](a)}),t.version="",t.nextid=0,t.inactiveEvents="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),t.zindex=15e3,t.defaults={prerender:f,id:f,overwrite:e,suppress:e,content:{text:e,attr:"title",deferred:f,title:{text:f,button:f}},position:{my:"top left",at:"bottom right",target:f,container:f,viewport:f,adjust:{x:0,y:0,mouse:e,resize:e,method:"flipinvert flipinvert"},effect:function(a,b,c){d(this).animate(b,{duration:200,queue:f})}},show:{target:f,event:"mouseenter",effect:e,delay:90,solo:f,ready:f,autofocus:f},hide:{target:f,event:"mouseleave",effect:e,delay:0,fixed:f,inactive:f,leave:"window",distance:f},style:{classes:"",widget:f,width:f,height:f,def:e},events:{render:g,move:g,show:g,hide:g,toggle:g,visible:g,hidden:g,focus:g,blur:g}},u.svg=function(a,c,e,f){var g=d(b),h=c[0],i={width:0,height:0,position:{top:1e10,left:1e10}},j,k,l,m,n;while(!h.getBBox)h=h.parentNode;if(h.getBBox&&h.parentNode){j=h.getBBox(),k=h.getScreenCTM(),l=h.farthestViewportElement||h;if(!l.createSVGPoint)return i;m=l.createSVGPoint(),m.x=j.x,m.y=j.y,n=m.matrixTransform(k),i.position.left=n.x,i.position.top=n.y,m.x+=j.width,m.y+=j.height,n=m.matrixTransform(k),i.width=n.x-i.position.left,i.height=n.y-i.position.top,i.position.left+=g.scrollLeft(),i.position.top+=g.scrollTop()}return i},u.ajax=function(a){var b=a.plugins.ajax;return"object"==typeof b?b:a.plugins.ajax=new K(a)},u.ajax.initialize="render",u.ajax.sanitize=function(a){var b=a.content,c;b&&"ajax"in b&&(c=b.ajax,typeof c!="object"&&(c=a.content.ajax={url:c}),"boolean"!=typeof c.once&&c.once&&(c.once=!!c.once))},d.extend(e,t.defaults,{content:{ajax:{loading:e,once:e}}}),u.tip=function(a){var b=a.plugins.tip;return"object"==typeof b?b:a.plugins.tip=new M(a)},u.tip.initialize="render",u.tip.sanitize=function(a){var b=a.style,c;b&&"tip"in b&&(c=a.style.tip,typeof c!="object"&&(a.style.tip={corner:c}),/string|boolean/i.test(typeof c.corner)||(c.corner=e),typeof c.width!="number"&&delete c.width,typeof c.height!="number"&&delete c.height,typeof c.border!="number"&&c.border!==e&&delete c.border,typeof c.offset!="number"&&delete c.offset)},d.extend(e,t.defaults,{style:{tip:{corner:e,mimic:f,width:6,height:6,border:e,offset:0}}}),u.modal=function(a){var b=a.plugins.modal;return"object"==typeof b?b:a.plugins.modal=new N(a)},u.modal.initialize="render",u.modal.sanitize=function(a){a.show&&(typeof a.show.modal!="object"?a.show.modal={on:!!a.show.modal}:typeof a.show.modal.on=="undefined"&&(a.show.modal.on=e))},u.modal.zindex=t.zindex-200,u.modal.focusable=["a[href]","area[href]","input","select","textarea","button","iframe","object","embed","[tabindex]","[contenteditable]"],d.extend(e,t.defaults,{show:{modal:{on:f,effect:e,blur:e,stealfocus:e,escape:e}}}),u.viewport=function(c,d,e,f,g,q,t){function L(a,b,c,e,f,g,h,i,j){var k=d[f],l=x[a],m=y[a],n=c===s,o=-E.offset[f]+D.offset[f]+D["scroll"+f],q=l===f?j:l===g?-j:-j/2,t=m===f?i:m===g?-i:-i/2,u=G&&G.size?G.size[h]||0:0,v=G&&G.corner&&G.corner.precedance===a&&!n?u:0,w=o-k+v,z=k+j-D[h]-o+v,A=q-(x.precedance===a||l===x[b]?t:0)-(m===p?i/2:0);return n?(v=G&&G.corner&&G.corner.precedance===b?u:0,A=(l===f?1:-1)*q-v,d[f]+=w>0?w:z>0?-z:0,d[f]=Math.max(-E.offset[f]+D.offset[f]+(v&&G.corner[a]===p?G.offset:0),k-A,Math.min(Math.max(-E.offset[f]+D.offset[f]+D[h],k+A),d[f]))):(e*=c===r?2:0,w>0&&(l!==f||z>0)?(d[f]-=A+e,J["invert"+a](f)):z>0&&(l!==g||w>0)&&(d[f]-=(l===p?-A:A)+e,J["invert"+a](g)),d[f]<o&&-d[f]>z&&(d[f]=k,J=x.clone())),d[f]-k}var u=e.target,v=c.elements.tooltip,x=e.my,y=e.at,z=e.adjust,A=z.method.split(" "),B=A[0],C=A[1]||A[0],D=e.viewport,E=e.container,F=c.cache,G=c.plugins.tip,H={left:0,top:0},I,J,K;if(!D.jquery||u[0]===a||u[0]===b.body||z.method==="none")return H;I=v.css("position")==="fixed",D={elem:D,height:D[(D[0]===a?"h":"outerH")+"eight"](),width:D[(D[0]===a?"w":"outerW")+"idth"](),scrollleft:I?0:D.scrollLeft(),scrolltop:I?0:D.scrollTop(),offset:D.offset()||{left:0,top:0}},E={elem:E,scrollLeft:E.scrollLeft(),scrollTop:E.scrollTop(),offset:E.offset()||{left:0,top:0}};if(B!=="shift"||C!=="shift")J=x.clone();return H={left:B!=="none"?L(h,i,B,z.x,m,o,j,f,q):0,top:C!=="none"?L(i,h,C,z.y,l,n,k,g,t):0},J&&F.lastClass!==(K=w+"-pos-"+J.abbrev())&&v.removeClass(c.cache.lastClass).addClass(c.cache.lastClass=K),H},u.imagemap=function(a,b,c,e){function v(a,b,c){var d=0,e=1,f=1,g=0,h=0,i=a.width,j=a.height;while(i>0&&j>0&&e>0&&f>0){i=Math.floor(i/2),j=Math.floor(j/2),c.x===m?e=i:c.x===o?e=a.width-i:e+=Math.floor(i/2),c.y===l?f=j:c.y===n?f=a.height-j:f+=Math.floor(j/2),d=b.length;while(d--){if(b.length<2)break;g=b[d][0]-a.position.left,h=b[d][1]-a.position.top,(c.x===m&&g>=e||c.x===o&&g<=e||c.x===p&&(g<e||g>a.width-e)||c.y===l&&h>=f||c.y===n&&h<=f||c.y===p&&(h<f||h>a.height-f))&&b.splice(d,1)}}return{left:b[0][0],top:b[0][1]}}b.jquery||(b=d(b));var f=a.cache.areas={},g=(b[0].shape||b.attr("shape")).toLowerCase(),h=b[0].coords||b.attr("coords"),i=h.split(","),j=[],k=d('img[usemap="#'+b.parent("map").attr("name")+'"]'),q=k.offset(),r={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10}},s=0,t=0,u;q.left+=Math.ceil((k.outerWidth()-k.width())/2),q.top+=Math.ceil((k.outerHeight()-k.height())/2);if(g==="poly"){s=i.length;while(s--)t=[parseInt(i[--s],10),parseInt(i[s+1],10)],t[0]>r.position.right&&(r.position.right=t[0]),t[0]<r.position.left&&(r.position.left=t[0]),t[1]>r.position.bottom&&(r.position.bottom=t[1]),t[1]<r.position.top&&(r.position.top=t[1]),j.push(t)}else{s=-1;while(s++<i.length)j.push(parseInt(i[s],10))}switch(g){case"rect":r={width:Math.abs(j[2]-j[0]),height:Math.abs(j[3]-j[1]),position:{left:Math.min(j[0],j[2]),top:Math.min(j[1],j[3])}};break;case"circle":r={width:j[2]+2,height:j[2]+2,position:{left:j[0],top:j[1]}};break;case"poly":r.width=Math.abs(r.position.right-r.position.left),r.height=Math.abs(r.position.bottom-r.position.top),c.abbrev()==="c"?r.position={left:r.position.left+r.width/2,top:r.position.top+r.height/2}:(f[c+h]||(r.position=v(r,j.slice(),c),e&&(e[0]==="flip"||e[1]==="flip")&&(r.offset=v(r,j.slice(),{x:c.x===m?o:c.x===o?m:p,y:c.y===l?n:c.y===n?l:p}),r.offset.left-=r.position.left,r.offset.top-=r.position.top),f[c+h]=r),r=f[c+h]),r.width=r.height=0}return r.position.left+=q.left,r.position.top+=q.top,r},u.ie6=function(a){var b=d.browser,c=a.plugins.ie6;return!b.msie||(""+b.version).charAt(0)!=="6"?f:"object"==typeof c?c:a.plugins.ie6=new O(a)},u.ie6.initialize="render"})})(window,document);
;;
/**
 * jQuery Validation Plugin 1.9.0
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright (c) 2006 - 2011 Jörn Zaefferer
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(c){c.extend(c.fn,{validate:function(a){if(this.length){var b=c.data(this[0],"validator");if(b)return b;this.attr("novalidate","novalidate");b=new c.validator(a,this[0]);c.data(this[0],"validator",b);if(b.settings.onsubmit){a=this.find("input, button");a.filter(".cancel").click(function(){b.cancelSubmit=true});b.settings.submitHandler&&a.filter(":submit").click(function(){b.submitButton=this});this.submit(function(d){function e(){if(b.settings.submitHandler){if(b.submitButton)var f=c("<input type='hidden'/>").attr("name",
b.submitButton.name).val(b.submitButton.value).appendTo(b.currentForm);b.settings.submitHandler.call(b,b.currentForm);b.submitButton&&f.remove();return false}return true}b.settings.debug&&d.preventDefault();if(b.cancelSubmit){b.cancelSubmit=false;return e()}if(b.form()){if(b.pendingRequest){b.formSubmitted=true;return false}return e()}else{b.focusInvalid();return false}})}return b}else a&&a.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(c(this[0]).is("form"))return this.validate().form();
else{var a=true,b=c(this[0].form).validate();this.each(function(){a&=b.element(this)});return a}},removeAttrs:function(a){var b={},d=this;c.each(a.split(/\s/),function(e,f){b[f]=d.attr(f);d.removeAttr(f)});return b},rules:function(a,b){var d=this[0];if(a){var e=c.data(d.form,"validator").settings,f=e.rules,g=c.validator.staticRules(d);switch(a){case "add":c.extend(g,c.validator.normalizeRule(b));f[d.name]=g;if(b.messages)e.messages[d.name]=c.extend(e.messages[d.name],b.messages);break;case "remove":if(!b){delete f[d.name];
return g}var h={};c.each(b.split(/\s/),function(j,i){h[i]=g[i];delete g[i]});return h}}d=c.validator.normalizeRules(c.extend({},c.validator.metadataRules(d),c.validator.classRules(d),c.validator.attributeRules(d),c.validator.staticRules(d)),d);if(d.required){e=d.required;delete d.required;d=c.extend({required:e},d)}return d}});c.extend(c.expr[":"],{blank:function(a){return!c.trim(""+a.value)},filled:function(a){return!!c.trim(""+a.value)},unchecked:function(a){return!a.checked}});c.validator=function(a,
b){this.settings=c.extend(true,{},c.validator.defaults,a);this.currentForm=b;this.init()};c.validator.format=function(a,b){if(arguments.length==1)return function(){var d=c.makeArray(arguments);d.unshift(a);return c.validator.format.apply(this,d)};if(arguments.length>2&&b.constructor!=Array)b=c.makeArray(arguments).slice(1);if(b.constructor!=Array)b=[b];c.each(b,function(d,e){a=a.replace(RegExp("\\{"+d+"\\}","g"),e)});return a};c.extend(c.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",
validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:c([]),errorLabelContainer:c([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(a){this.lastActive=a;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(a)).hide()}},onfocusout:function(a){if(!this.checkable(a)&&(a.name in this.submitted||!this.optional(a)))this.element(a)},
onkeyup:function(a){if(a.name in this.submitted||a==this.lastElement)this.element(a)},onclick:function(a){if(a.name in this.submitted)this.element(a);else a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(a,b,d){a.type==="radio"?this.findByName(a.name).addClass(b).removeClass(d):c(a).addClass(b).removeClass(d)},unhighlight:function(a,b,d){a.type==="radio"?this.findByName(a.name).removeClass(b).addClass(d):c(a).removeClass(b).addClass(d)}},setDefaults:function(a){c.extend(c.validator.defaults,
a)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:c.validator.format("Please enter no more than {0} characters."),
minlength:c.validator.format("Please enter at least {0} characters."),rangelength:c.validator.format("Please enter a value between {0} and {1} characters long."),range:c.validator.format("Please enter a value between {0} and {1}."),max:c.validator.format("Please enter a value less than or equal to {0}."),min:c.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){function a(e){var f=c.data(this[0].form,"validator"),g="on"+e.type.replace(/^validate/,
"");f.settings[g]&&f.settings[g].call(f,this[0],e)}this.labelContainer=c(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||c(this.currentForm);this.containers=c(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var b=this.groups={};c.each(this.settings.groups,function(e,f){c.each(f.split(/\s/),function(g,h){b[h]=e})});var d=
this.settings.rules;c.each(d,function(e,f){d[e]=c.validator.normalizeRule(f)});c(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",a).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",
a);this.settings.invalidHandler&&c(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();c.extend(this.submitted,this.errorMap);this.invalid=c.extend({},this.errorMap);this.valid()||c(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(a){this.lastElement=
a=this.validationTargetFor(this.clean(a));this.prepareElement(a);this.currentElements=c(a);var b=this.check(a);if(b)delete this.invalid[a.name];else this.invalid[a.name]=true;if(!this.numberOfInvalids())this.toHide=this.toHide.add(this.containers);this.showErrors();return b},showErrors:function(a){if(a){c.extend(this.errorMap,a);this.errorList=[];for(var b in a)this.errorList.push({message:a[b],element:this.findByName(b)[0]});this.successList=c.grep(this.successList,function(d){return!(d.name in a)})}this.settings.showErrors?
this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){c.fn.resetForm&&c(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0,d;for(d in a)b++;return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==
0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{c(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(a){}},findLastActive:function(){var a=this.lastActive;return a&&c.grep(this.errorList,function(b){return b.element.name==a.name}).length==1&&a},elements:function(){var a=this,b={};return c(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&
a.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in b||!a.objectLength(c(this).rules()))return false;return b[this.name]=true})},clean:function(a){return c(a)[0]},errors:function(){return c(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=c([]);this.toHide=c([]);this.currentElements=c([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},
prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(a){a=this.validationTargetFor(this.clean(a));var b=c(a).rules(),d=false,e;for(e in b){var f={method:e,parameters:b[e]};try{var g=c.validator.methods[e].call(this,a.value.replace(/\r/g,""),a,f.parameters);if(g=="dependency-mismatch")d=true;else{d=false;if(g=="pending"){this.toHide=this.toHide.not(this.errorsFor(a));return}if(!g){this.formatAndAdd(a,f);return false}}}catch(h){this.settings.debug&&window.console&&console.log("exception occured when checking element "+
a.id+", check the '"+f.method+"' method",h);throw h;}}if(!d){this.objectLength(b)&&this.successList.push(a);return true}},customMetaMessage:function(a,b){if(c.metadata){var d=this.settings.meta?c(a).metadata()[this.settings.meta]:c(a).metadata();return d&&d.messages&&d.messages[b]}},customMessage:function(a,b){var d=this.settings.messages[a];return d&&(d.constructor==String?d:d[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==undefined)return arguments[a]},defaultMessage:function(a,
b){return this.findDefined(this.customMessage(a.name,b),this.customMetaMessage(a,b),!this.settings.ignoreTitle&&a.title||undefined,c.validator.messages[b],"<strong>Warning: No message defined for "+a.name+"</strong>")},formatAndAdd:function(a,b){var d=this.defaultMessage(a,b.method),e=/\$?\{(\d+)\}/g;if(typeof d=="function")d=d.call(this,b.parameters,a);else if(e.test(d))d=jQuery.format(d.replace(e,"{$1}"),b.parameters);this.errorList.push({message:d,element:a});this.errorMap[a.name]=d;this.submitted[a.name]=
d},addWrapper:function(a){if(this.settings.wrapper)a=a.add(a.parent(this.settings.wrapper));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);this.showLabel(b.element,b.message)}if(this.errorList.length)this.toShow=this.toShow.add(this.containers);if(this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);
if(this.settings.unhighlight){a=0;for(b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass)}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return c(this.errorList).map(function(){return this.element})},showLabel:function(a,b){var d=this.errorsFor(a);if(d.length){d.removeClass(this.settings.validClass).addClass(this.settings.errorClass);
d.attr("generated")&&d.html(b)}else{d=c("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(a),generated:true}).addClass(this.settings.errorClass).html(b||"");if(this.settings.wrapper)d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,c(a)):d.insertAfter(a))}if(!b&&this.settings.success){d.text("");typeof this.settings.success=="string"?d.addClass(this.settings.success):this.settings.success(d)}this.toShow=
this.toShow.add(d)},errorsFor:function(a){var b=this.idOrName(a);return this.errors().filter(function(){return c(this).attr("for")==b})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){if(this.checkable(a))a=this.findByName(a.name).not(this.settings.ignore)[0];return a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(a){var b=this.currentForm;return c(document.getElementsByName(a)).map(function(d,
e){return e.form==b&&e.name==a&&e||null})},getLength:function(a,b){switch(b.nodeName.toLowerCase()){case "select":return c("option:selected",b).length;case "input":if(this.checkable(b))return this.findByName(b.name).filter(":checked").length}return a.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):true},dependTypes:{"boolean":function(a){return a},string:function(a,b){return!!c(a,b.form).length},"function":function(a,b){return a(b)}},optional:function(a){return!c.validator.methods.required.call(this,
c.trim(a.value),a)&&"dependency-mismatch"},startRequest:function(a){if(!this.pending[a.name]){this.pendingRequest++;this.pending[a.name]=true}},stopRequest:function(a,b){this.pendingRequest--;if(this.pendingRequest<0)this.pendingRequest=0;delete this.pending[a.name];if(b&&this.pendingRequest==0&&this.formSubmitted&&this.form()){c(this.currentForm).submit();this.formSubmitted=false}else if(!b&&this.pendingRequest==0&&this.formSubmitted){c(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=
false}},previousValue:function(a){return c.data(a,"previousValue")||c.data(a,"previousValue",{old:null,valid:true,message:this.defaultMessage(a,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(a,b){a.constructor==String?this.classRuleSettings[a]=b:c.extend(this.classRuleSettings,
a)},classRules:function(a){var b={};(a=c(a).attr("class"))&&c.each(a.split(" "),function(){this in c.validator.classRuleSettings&&c.extend(b,c.validator.classRuleSettings[this])});return b},attributeRules:function(a){var b={};a=c(a);for(var d in c.validator.methods){var e;if(e=d==="required"&&typeof c.fn.prop==="function"?a.prop(d):a.attr(d))b[d]=e;else if(a[0].getAttribute("type")===d)b[d]=true}b.maxlength&&/-1|2147483647|524288/.test(b.maxlength)&&delete b.maxlength;return b},metadataRules:function(a){if(!c.metadata)return{};
var b=c.data(a.form,"validator").settings.meta;return b?c(a).metadata()[b]:c(a).metadata()},staticRules:function(a){var b={},d=c.data(a.form,"validator");if(d.settings.rules)b=c.validator.normalizeRule(d.settings.rules[a.name])||{};return b},normalizeRules:function(a,b){c.each(a,function(d,e){if(e===false)delete a[d];else if(e.param||e.depends){var f=true;switch(typeof e.depends){case "string":f=!!c(e.depends,b.form).length;break;case "function":f=e.depends.call(b,b)}if(f)a[d]=e.param!==undefined?
e.param:true;else delete a[d]}});c.each(a,function(d,e){a[d]=c.isFunction(e)?e(b):e});c.each(["minlength","maxlength","min","max"],function(){if(a[this])a[this]=Number(a[this])});c.each(["rangelength","range"],function(){if(a[this])a[this]=[Number(a[this][0]),Number(a[this][1])]});if(c.validator.autoCreateRanges){if(a.min&&a.max){a.range=[a.min,a.max];delete a.min;delete a.max}if(a.minlength&&a.maxlength){a.rangelength=[a.minlength,a.maxlength];delete a.minlength;delete a.maxlength}}a.messages&&delete a.messages;
return a},normalizeRule:function(a){if(typeof a=="string"){var b={};c.each(a.split(/\s/),function(){b[this]=true});a=b}return a},addMethod:function(a,b,d){c.validator.methods[a]=b;c.validator.messages[a]=d!=undefined?d:c.validator.messages[a];b.length<3&&c.validator.addClassRules(a,c.validator.normalizeRule(a))},methods:{required:function(a,b,d){if(!this.depend(d,b))return"dependency-mismatch";switch(b.nodeName.toLowerCase()){case "select":return(a=c(b).val())&&a.length>0;case "input":if(this.checkable(b))return this.getLength(a,
b)>0;default:return c.trim(a).length>0}},remote:function(a,b,d){if(this.optional(b))return"dependency-mismatch";var e=this.previousValue(b);this.settings.messages[b.name]||(this.settings.messages[b.name]={});e.originalMessage=this.settings.messages[b.name].remote;this.settings.messages[b.name].remote=e.message;d=typeof d=="string"&&{url:d}||d;if(this.pending[b.name])return"pending";if(e.old===a)return e.valid;e.old=a;var f=this;this.startRequest(b);var g={};g[b.name]=a;c.ajax(c.extend(true,{url:d,
mode:"abort",port:"validate"+b.name,dataType:"json",data:g,success:function(h){f.settings.messages[b.name].remote=e.originalMessage;var j=h===true;if(j){var i=f.formSubmitted;f.prepareElement(b);f.formSubmitted=i;f.successList.push(b);f.showErrors()}else{i={};h=h||f.defaultMessage(b,"remote");i[b.name]=e.message=c.isFunction(h)?h(a):h;f.showErrors(i)}e.valid=j;f.stopRequest(b,j)}},d));return"pending"},minlength:function(a,b,d){return this.optional(b)||this.getLength(c.trim(a),b)>=d},maxlength:function(a,
b,d){return this.optional(b)||this.getLength(c.trim(a),b)<=d},rangelength:function(a,b,d){a=this.getLength(c.trim(a),b);return this.optional(b)||a>=d[0]&&a<=d[1]},min:function(a,b,d){return this.optional(b)||a>=d},max:function(a,b,d){return this.optional(b)||a<=d},range:function(a,b,d){return this.optional(b)||a>=d[0]&&a<=d[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 -]+/.test(a))return false;var d=0,e=0,f=false;a=a.replace(/\D/g,"");for(var g=a.length-1;g>=
0;g--){e=a.charAt(g);e=parseInt(e,10);if(f)if((e*=2)>9)e-=9;d+=e;f=!f}return d%10==0},accept:function(a,b,d){d=typeof d=="string"?d.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||a.match(RegExp(".("+d+")$","i"))},equalTo:function(a,b,d){d=c(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){c(b).valid()});return a==d.val()}}});c.format=c.validator.format})(jQuery);
(function(c){var a={};if(c.ajaxPrefilter)c.ajaxPrefilter(function(d,e,f){e=d.port;if(d.mode=="abort"){a[e]&&a[e].abort();a[e]=f}});else{var b=c.ajax;c.ajax=function(d){var e=("port"in d?d:c.ajaxSettings).port;if(("mode"in d?d:c.ajaxSettings).mode=="abort"){a[e]&&a[e].abort();return a[e]=b.apply(this,arguments)}return b.apply(this,arguments)}}})(jQuery);
(function(c){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&c.each({focus:"focusin",blur:"focusout"},function(a,b){function d(e){e=c.event.fix(e);e.type=b;return c.event.handle.call(this,e)}c.event.special[b]={setup:function(){this.addEventListener(a,d,true)},teardown:function(){this.removeEventListener(a,d,true)},handler:function(e){arguments[0]=c.event.fix(e);arguments[0].type=b;return c.event.handle.apply(this,arguments)}}});c.extend(c.fn,{validateDelegate:function(a,
b,d){return this.bind(b,function(e){var f=c(e.target);if(f.is(a))return d.apply(f,arguments)})}})})(jQuery);
;;

(function($){$.fn.ajaxSubmit=function(options){if(!this.length){log('ajaxSubmit: skipping submit process - no element selected');return this;}
var method,action,url,$form=this;if(typeof options=='function'){options={success:options};}
method=this.attr('method');action=this.attr('action');url=(typeof action==='string')?$.trim(action):'';url=url||window.location.href||'';if(url){url=(url.match(/^([^#]+)/)||[])[1];}
options=$.extend(true,{url:url,success:$.ajaxSettings.success,type:method||'GET',iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank'},options);var veto={};this.trigger('form-pre-serialize',[this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');return this;}
if(options.beforeSerialize&&options.beforeSerialize(this,options)===false){log('ajaxSubmit: submit aborted via beforeSerialize callback');return this;}
var traditional=options.traditional;if(traditional===undefined){traditional=$.ajaxSettings.traditional;}
var qx,n,v,a=this.formToArray(options.semantic);if(options.data){options.extraData=options.data;qx=$.param(options.data,traditional);}
if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){log('ajaxSubmit: submit aborted via beforeSubmit callback');return this;}
this.trigger('form-submit-validate',[a,this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-submit-validate trigger');return this;}
var q=$.param(a,traditional);if(qx){q=(q?(q+'&'+qx):qx);}
if(options.type.toUpperCase()=='GET'){options.url+=(options.url.indexOf('?')>=0?'&':'?')+q;options.data=null;}
else{options.data=q;}
var callbacks=[];if(options.resetForm){callbacks.push(function(){$form.resetForm();});}
if(options.clearForm){callbacks.push(function(){$form.clearForm(options.includeHidden);});}
if(!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){var fn=options.replaceTarget?'replaceWith':'html';$(options.target)[fn](data).each(oldSuccess,arguments);});}
else if(options.success){callbacks.push(options.success);}
options.success=function(data,status,xhr){var context=options.context||options;for(var i=0,max=callbacks.length;i<max;i++){callbacks[i].apply(context,[data,status,xhr||$form,$form]);}};var fileInputs=$('input:file:enabled[value]',this);var hasFileInputs=fileInputs.length>0;var mp='multipart/form-data';var multipart=($form.attr('enctype')==mp||$form.attr('encoding')==mp);var fileAPI=!!(hasFileInputs&&fileInputs.get(0).files&&window.FormData);log("fileAPI :"+fileAPI);var shouldUseFrame=(hasFileInputs||multipart)&&!fileAPI;if(options.iframe!==false&&(options.iframe||shouldUseFrame)){if(options.closeKeepAlive){$.get(options.closeKeepAlive,function(){fileUploadIframe(a);});}
else{fileUploadIframe(a);}}
else if((hasFileInputs||multipart)&&fileAPI){options.progress=options.progress||$.noop;fileUploadXhr(a);}
else{$.ajax(options);}
this.trigger('form-submit-notify',[this,options]);return this;function fileUploadXhr(a){var formdata=new FormData();for(var i=0;i<a.length;i++){if(a[i].type=='file')
continue;formdata.append(a[i].name,a[i].value);}
$form.find('input:file:enabled').each(function(){var name=$(this).attr('name'),files=this.files;if(name){for(var i=0;i<files.length;i++)
formdata.append(name,files[i]);}});if(options.extraData){for(var k in options.extraData)
formdata.append(k,options.extraData[k])}
options.data=null;var s=$.extend(true,{},$.ajaxSettings,options,{contentType:false,processData:false,cache:false,type:'POST'});s.context=s.context||s;s.data=null;var beforeSend=s.beforeSend;s.beforeSend=function(xhr,o){o.data=formdata;if(xhr.upload){xhr.upload.onprogress=function(event){o.progress(event.position,event.total);};}
if(beforeSend)
beforeSend.call(o,xhr,options);};$.ajax(s);}
function fileUploadIframe(a){var form=$form[0],el,i,s,g,id,$io,io,xhr,sub,n,timedOut,timeoutHandle;var useProp=!!$.fn.prop;if(a){if(useProp){for(i=0;i<a.length;i++){el=$(form[a[i].name]);el.prop('disabled',false);}}else{for(i=0;i<a.length;i++){el=$(form[a[i].name]);el.removeAttr('disabled');}};}
if($(':input[name=submit],:input[id=submit]',form).length){alert('Error: Form elements must not have name or id of "submit".');return;}
s=$.extend(true,{},$.ajaxSettings,options);s.context=s.context||s;id='jqFormIO'+(new Date().getTime());if(s.iframeTarget){$io=$(s.iframeTarget);n=$io.attr('name');if(n==null)
$io.attr('name',id);else
id=n;}
else{$io=$('<iframe name="'+id+'" src="'+s.iframeSrc+'" />');$io.css({position:'absolute',top:'-1000px',left:'-1000px'});}
io=$io[0];xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:'n/a',getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(status){var e=(status==='timeout'?'timeout':'aborted');log('aborting upload... '+e);this.aborted=1;$io.attr('src',s.iframeSrc);xhr.error=e;s.error&&s.error.call(s.context,xhr,e,status);g&&$.event.trigger("ajaxError",[xhr,s,e]);s.complete&&s.complete.call(s.context,xhr,e);}};g=s.global;if(g&&!$.active++){$.event.trigger("ajaxStart");}
if(g){$.event.trigger("ajaxSend",[xhr,s]);}
if(s.beforeSend&&s.beforeSend.call(s.context,xhr,s)===false){if(s.global){$.active--;}
return;}
if(xhr.aborted){return;}
sub=form.clk;if(sub){n=sub.name;if(n&&!sub.disabled){s.extraData=s.extraData||{};s.extraData[n]=sub.value;if(sub.type=="image"){s.extraData[n+'.x']=form.clk_x;s.extraData[n+'.y']=form.clk_y;}}}
var CLIENT_TIMEOUT_ABORT=1;var SERVER_ABORT=2;function getDoc(frame){var doc=frame.contentWindow?frame.contentWindow.document:frame.contentDocument?frame.contentDocument:frame.document;return doc;}
var csrf_token=$('meta[name=csrf-token]').attr('content');var csrf_param=$('meta[name=csrf-param]').attr('content');if(csrf_param&&csrf_token){s.extraData=s.extraData||{};s.extraData[csrf_param]=csrf_token;}
function doSubmit(){var t=$form.attr('target'),a=$form.attr('action');form.setAttribute('target',id);if(!method){form.setAttribute('method','POST');}
if(a!=s.url){form.setAttribute('action',s.url);}
if(!s.skipEncodingOverride&&(!method||/post/i.test(method))){$form.attr({encoding:'multipart/form-data',enctype:'multipart/form-data'});}
if(s.timeout){timeoutHandle=setTimeout(function(){timedOut=true;cb(CLIENT_TIMEOUT_ABORT);},s.timeout);}
function checkState(){try{var state=getDoc(io).readyState;log('state = '+state);if(state.toLowerCase()=='uninitialized')
setTimeout(checkState,50);}
catch(e){log('Server abort: ',e,' (',e.name,')');cb(SERVER_ABORT);timeoutHandle&&clearTimeout(timeoutHandle);timeoutHandle=undefined;}}
var extraInputs=[];try{if(s.extraData){for(var n in s.extraData){extraInputs.push($('<input type="hidden" name="'+n+'">').attr('value',s.extraData[n]).appendTo(form)[0]);}}
if(!s.iframeTarget){$io.appendTo('body');io.attachEvent?io.attachEvent('onload',cb):io.addEventListener('load',cb,false);}
setTimeout(checkState,15);form.submit();}
finally{form.setAttribute('action',a);if(t){form.setAttribute('target',t);}else{$form.removeAttr('target');}
$(extraInputs).remove();}}
if(s.forceSync){doSubmit();}
else{setTimeout(doSubmit,10);}
var data,doc,domCheckCount=50,callbackProcessed;function cb(e){if(xhr.aborted||callbackProcessed){return;}
try{doc=getDoc(io);}
catch(ex){log('cannot access response document: ',ex);e=SERVER_ABORT;}
if(e===CLIENT_TIMEOUT_ABORT&&xhr){xhr.abort('timeout');return;}
else if(e==SERVER_ABORT&&xhr){xhr.abort('server abort');return;}
if(!doc||doc.location.href==s.iframeSrc){if(!timedOut)
return;}
io.detachEvent?io.detachEvent('onload',cb):io.removeEventListener('load',cb,false);var status='success',errMsg;try{if(timedOut){throw'timeout';}
var isXml=s.dataType=='xml'||doc.XMLDocument||$.isXMLDoc(doc);log('isXml='+isXml);if(!isXml&&window.opera&&(doc.body==null||doc.body.innerHTML=='')){if(--domCheckCount){log('requeing onLoad callback, DOM not available');setTimeout(cb,250);return;}}
var docRoot=doc.body?doc.body:doc.documentElement;xhr.responseText=docRoot?docRoot.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;if(isXml)
s.dataType='xml';xhr.getResponseHeader=function(header){var headers={'content-type':s.dataType};return headers[header];};if(docRoot){xhr.status=Number(docRoot.getAttribute('status'))||xhr.status;xhr.statusText=docRoot.getAttribute('statusText')||xhr.statusText;}
var dt=(s.dataType||'').toLowerCase();var scr=/(json|script|text)/.test(dt);if(scr||s.textarea){var ta=doc.getElementsByTagName('textarea')[0];if(ta){xhr.responseText=ta.value;xhr.status=Number(ta.getAttribute('status'))||xhr.status;xhr.statusText=ta.getAttribute('statusText')||xhr.statusText;}
else if(scr){var pre=doc.getElementsByTagName('pre')[0];var b=doc.getElementsByTagName('body')[0];if(pre){xhr.responseText=pre.textContent?pre.textContent:pre.innerText;}
else if(b){xhr.responseText=b.textContent?b.textContent:b.innerText;}}}
else if(dt=='xml'&&!xhr.responseXML&&xhr.responseText!=null){xhr.responseXML=toXml(xhr.responseText);}
try{data=httpData(xhr,dt,s);}
catch(e){status='parsererror';xhr.error=errMsg=(e||status);}}
catch(e){log('error caught: ',e);status='error';xhr.error=errMsg=(e||status);}
if(xhr.aborted){log('upload aborted');status=null;}
if(xhr.status){status=(xhr.status>=200&&xhr.status<300||xhr.status===304)?'success':'error';}
if(status==='success'){s.success&&s.success.call(s.context,data,'success',xhr);g&&$.event.trigger("ajaxSuccess",[xhr,s]);}
else if(status){if(errMsg==undefined)
errMsg=xhr.statusText;s.error&&s.error.call(s.context,xhr,status,errMsg);g&&$.event.trigger("ajaxError",[xhr,s,errMsg]);}
g&&$.event.trigger("ajaxComplete",[xhr,s]);if(g&&!--$.active){$.event.trigger("ajaxStop");}
s.complete&&s.complete.call(s.context,xhr,status);callbackProcessed=true;if(s.timeout)
clearTimeout(timeoutHandle);setTimeout(function(){if(!s.iframeTarget)
$io.remove();xhr.responseXML=null;},100);}
var toXml=$.parseXML||function(s,doc){if(window.ActiveXObject){doc=new ActiveXObject('Microsoft.XMLDOM');doc.async='false';doc.loadXML(s);}
else{doc=(new DOMParser()).parseFromString(s,'text/xml');}
return(doc&&doc.documentElement&&doc.documentElement.nodeName!='parsererror')?doc:null;};var parseJSON=$.parseJSON||function(s){return window['eval']('('+s+')');};var httpData=function(xhr,type,s){var ct=xhr.getResponseHeader('content-type')||'',xml=type==='xml'||!type&&ct.indexOf('xml')>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.nodeName==='parsererror'){$.error&&$.error('parsererror');}
if(s&&s.dataFilter){data=s.dataFilter(data,type);}
if(typeof data==='string'){if(type==='json'||!type&&ct.indexOf('json')>=0){data=parseJSON(data);}else if(type==="script"||!type&&ct.indexOf("javascript")>=0){$.globalEval(data);}}
return data;};}};$.fn.ajaxForm=function(options){if(this.length===0){var o={s:this.selector,c:this.context};if(!$.isReady&&o.s){log('DOM not ready, queuing ajaxForm');$(function(){$(o.s,o.c).ajaxForm(options);});return this;}
log('terminating; zero elements found by selector'+($.isReady?'':' (DOM not ready)'));return this;}
return this.ajaxFormUnbind().bind('submit.form-plugin',function(e){if(!e.isDefaultPrevented()){e.preventDefault();$(this).ajaxSubmit(options);}}).bind('click.form-plugin',function(e){var target=e.target;var $el=$(target);if(!($el.is(":submit,input:image"))){var t=$el.closest(':submit');if(t.length==0){return;}
target=t[0];}
var form=this;form.clk=target;if(target.type=='image'){if(e.offsetX!=undefined){form.clk_x=e.offsetX;form.clk_y=e.offsetY;}else if(typeof $.fn.offset=='function'){var offset=$el.offset();form.clk_x=e.pageX-offset.left;form.clk_y=e.pageY-offset.top;}else{form.clk_x=e.pageX-target.offsetLeft;form.clk_y=e.pageY-target.offsetTop;}}
setTimeout(function(){form.clk=form.clk_x=form.clk_y=null;},100);});};$.fn.ajaxFormUnbind=function(){return this.unbind('submit.form-plugin click.form-plugin');};$.fn.formToArray=function(semantic){var a=[];if(this.length===0){return a;}
var form=this[0];var els=semantic?form.getElementsByTagName('*'):form.elements;if(!els){return a;}
var i,j,n,v,el,max,jmax;for(i=0,max=els.length;i<max;i++){el=els[i];n=el.name;if(!n){continue;}
if(semantic&&form.clk&&el.type=="image"){if(!el.disabled&&form.clk==el){a.push({name:n,value:$(el).val(),type:el.type});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}
continue;}
v=$.fieldValue(el,true);if(v&&v.constructor==Array){for(j=0,jmax=v.length;j<jmax;j++){a.push({name:n,value:v[j]});}}
else if(v!==null&&typeof v!='undefined'){a.push({name:n,value:v,type:el.type});}}
if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0];n=input.name;if(n&&!input.disabled&&input.type=='image'){a.push({name:n,value:$input.val()});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}}
return a;};$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic));};$.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n){return;}
var v=$.fieldValue(this,successful);if(v&&v.constructor==Array){for(var i=0,max=v.length;i<max;i++){a.push({name:n,value:v[i]});}}
else if(v!==null&&typeof v!='undefined'){a.push({name:this.name,value:v});}});return $.param(a);};$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=$.fieldValue(el,successful);if(v===null||typeof v=='undefined'||(v.constructor==Array&&!v.length)){continue;}
v.constructor==Array?$.merge(val,v):val.push(v);}
return val;};$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(successful===undefined){successful=true;}
if(successful&&(!n||el.disabled||t=='reset'||t=='button'||(t=='checkbox'||t=='radio')&&!el.checked||(t=='submit'||t=='image')&&el.form&&el.form.clk!=el||tag=='select'&&el.selectedIndex==-1)){return null;}
if(tag=='select'){var index=el.selectedIndex;if(index<0){return null;}
var a=[],ops=el.options;var one=(t=='select-one');var max=(one?index+1:ops.length);for(var i=(one?index:0);i<max;i++){var op=ops[i];if(op.selected){var v=op.value;if(!v){v=(op.attributes&&op.attributes['value']&&!(op.attributes['value'].specified))?op.text:op.value;}
if(one){return v;}
a.push(v);}}
return a;}
return $(el).val();};$.fn.clearForm=function(includeHidden){return this.each(function(){$('input,select,textarea',this).clearFields(includeHidden);});};$.fn.clearFields=$.fn.clearInputs=function(includeHidden){var re=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(re.test(t)||tag=='textarea'||(includeHidden&&/hidden/.test(t))){this.value='';}
else if(t=='checkbox'||t=='radio'){this.checked=false;}
else if(tag=='select'){this.selectedIndex=-1;}});};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=='function'||(typeof this.reset=='object'&&!this.reset.nodeType)){this.reset();}});};$.fn.enable=function(b){if(b===undefined){b=true;}
return this.each(function(){this.disabled=!b;});};$.fn.selected=function(select){if(select===undefined){select=true;}
return this.each(function(){var t=this.type;if(t=='checkbox'||t=='radio'){this.checked=select;}
else if(this.tagName.toLowerCase()=='option'){var $sel=$(this).parent('select');if(select&&$sel[0]&&$sel[0].type=='select-one'){$sel.find('option').selected(false);}
this.selected=select;}});};$.fn.ajaxSubmit.debug=false;function log(){if(!$.fn.ajaxSubmit.debug)
return;var msg='[jquery.form] '+Array.prototype.join.call(arguments,'');if(window.console&&window.console.log){window.console.log(msg);}
else if(window.opera&&window.opera.postError){window.opera.postError(msg);}};})(jQuery);;;

(function($){$.fn.hint=function(blurClass){if(!blurClass){blurClass='blur';}
return this.each(function(){var $input=$(this),title=$input.attr('title'),$form=$(this.form),$win=$(window);function remove(){if($input.val()===title&&$input.hasClass(blurClass)){$input.val('').removeClass(blurClass);}}
if(title){$input.blur(function(){if(this.value===''){$input.val(title).addClass(blurClass);}}).focus(remove).blur();$form.submit(remove);$win.unload(remove);}});};})(jQuery);;;

(function(){'use strict';var popup=null;hgm.newsletter={popup:function(){if(!popup){popup=hgm.popup.get('newsletter');}
return popup;}};}());;;

(function(){'use strict';hgm.makemodel={popup:function(yearModelId){return hgm.popup.get('make-model',yearModelId,{views:3,ttl:12*60*60,cap:2,expire:180*24*60*60});}};}());;;

function getSubscribeQtipConfig(msg){return{style:{tip:true,classes:"ui-tooltip-shadow ui-tooltip-rounded",background:'#A2D959',color:'black'},content:msg,position:{my:"bottom center",at:"top center"},show:{when:false,ready:true},hide:'blur keypress'};}
function attachSubscribeAjaxSpinner(control,replace){numSpinners=$('img.wait-spinner').size();numSpinners+=1;if(replace){$(control).replaceWith('<img id="spinner-'+numSpinners+'" class="wait-spinner" src="/images/pricequote-spinnerdark.gif" alt="Please Wait"/>');}else{$('<img id="spinner-'+numSpinners+'" class="wait-spinner" src="/images/pricequote-spinnerdark.gif" alt="Please Wait"/>').insertAfter($(control));}
return'#spinner-'+numSpinners;}
function loadEmailUpdateExplainer(){$("#emailUpdate").dialog({dialogClass:"emailExplainerPopupContainer",autoOpen:true,draggable:false,resizable:false,modal:true,width:575,show:"fade",hide:"fade",closeText:'',open:function(){hgm.popup.open();$('.emailExplainerPopupContainer form.email-subscription-popup').show();$('.ui-widget-overlay').bind('click',function(){$('#emailUpdate').dialog('close');});},beforeClose:function(event,ui){hgm.popup.close();}});return false;}
$(function(){var popup=hgm.makemodel.popup(currentYearModelId);$('body').click(function(event){if(!$(event.target).hasClass('form-inner')&&!$(event.target).hasClass('subscription-email')&&!$(event.target).hasClass('email-subscribe-btn')){if($(event.target).parent().hasClass('emai-subscription')){if($(event.target).parent().find('form').hasClass('expanded')){hgm.popup.close();$(event.target).parent().find('form').removeClass('expanded').addClass('hidden');$('.email-subscription-popup .subscription-email').qtip("destroy");}else{hgm.popup.open();$(this).parent().find('form').removeClass('hidden').addClass('expanded');}}else{hgm.popup.close();$('.email-subscription-popup').removeClass('expanded').addClass('hidden');$('.email-subscription-popup .subscription-email').qtip("destroy");}}});$(".email-subscribe-btn").live('click',function(){var emailRegex=new RegExp(/[^@]*@[^@]+\...+/);var emailField=$(this).parent().find('.subscription-email');var email=emailField.val();emailField.qtip("destroy");if(!emailRegex.test(email)){emailField.qtip(getSubscribeQtipConfig('Invalid email address'));emailField.focus();return false;}
emailField.qtip("destroy");$(this).closest(".email-subscription-popup").submit();});hideSubscriptionForm=function(theForm){theForm.closest(".emai-subscription").slideUp('slow');hgm.popup.close();};$(".email-subscription-popup").each(function(idx,elem){$(elem).validate({submitHandler:function(form){var $form=$(form),filter;attachSubscribeAjaxSpinner($form.find('.form-inner .stdButton'),false);filter={make:$form.find('.subscription-make').val(),model:$form.find('.subscription-model').val()};$form.find('.filters').val(JSON.stringify(filter));$form.ajaxSubmit({dataType:'json',success:function(data){$('.wait-spinner').remove();if(!data.errorOccured){popup.trigger();$form.find(".form-inner").hide();$form.find('.thank-you').show();setTimeout(function(){hideSubscriptionForm($form);},5000);}else{$form.find('input.subscription-email').qtip(getSubscribeQtipConfig(data.statusMsg));}
return false;}});}});});$('.email-subscription-outer .explain').live('click',loadEmailUpdateExplainer);});;;

(function(window){'use strict';hgm.lightBox={$container:$('<div class="hgm-lb-container"></div>'),open:function(url,title,width,height){var $wrapper=$('<div class="img-wrapper"></div>'),$img=$('<img />').attr('src',url).attr('alt',title),$closeButton=$('<div class="closeButton"></div>');this.$container.append($wrapper.append($closeButton,$img));$('body').append(this.$container);$img.hide();if(width&&height){$img.data('width',width);$img.data('height',height);this.resize();}
$img.load(function(){if(!width||!height){$img.data('width',this.width);$img.data('height',this.height);}
this.resize();$img.fadeIn();}.bind(this));this.$container.fadeIn();this.$container.click(this.close.bind(this));$(window).resize(this.resize);},resize:function(){var $img=$('.hgm-lb-container img'),$container=$('.hgm-lb-container'),iW=$img.data('width'),iH=$img.data('height'),pW=$container.width(),pH=$container.height(),pInnerW=pW-60,pInnerH=pH-60,imgRatio=iW/iH,parentRatio=pW/pH,targetHeight=iH,targetWidth=iW;if(imgRatio<parentRatio){targetHeight=pInnerH+20;targetWidth=pInnerH*imgRatio+20;}
else{targetHeight=pInnerW/imgRatio+20;targetWidth=pInnerW+20;}
$img.parent().css({top:(pH-targetHeight)>>1,bottom:(pH-targetHeight)>>1,left:(pW-targetWidth)>>1,right:(pW-targetWidth)>>1,width:targetWidth,height:targetHeight});},close:function(){$('.hgm-lb-container').fadeOut(function(){$(this).empty().remove();});$(window).off('resize',this.resize);}};}(window));;;

(function($){$.fn.adsRefresh=function(opts){var defaults={},options=$.extend(defaults,opts),ad=this;function iframeRefresh($adDiv){var myiframe=$('iframe.hgm__iframe_ad',$adDiv).clone();var oldSource=myiframe.attr('src');var newSource=oldSource.replace(/;ord=\d+/g,';ord='+rand);if(ad.data('ad-zone')){newSource=newSource.replace(/(.*)\.tmus\/([^;]*)(.*)/,'$1.tmus/'+ad.data('ad-zone')+'$3');}
myiframe.attr('src',newSource);$adDiv.html('');myiframe.appendTo($adDiv);}
function refreshAmazonTags(callback){var $def=$.Deferred();$def.done(callback);setTimeout(function(){$def.resolve('timeout');},500);if(typeof amznads!=='undefined'){try{amznads.getAdsCallback('3188',function(){googletag.pubads().clearTargeting('amznslots');amznads.setTargetingForGPTAsync('amznslots');$def.resolve('amazon');});}catch(e){}}else{$def.resolve();}}
function gptRefreshAdSlot($adDiv){googletag.pubads().refresh([$adDiv.data('GoogleAdSlot')]);hgm.debug('GPT Refreshing existing slot');}
function gptRefresh($adDiv){var adId=$adDiv.attr('id'),oldSlot=$adDiv.data('GoogleAdSlot'),oldZone=oldSlot?oldSlot.getAdUnitPath():'',adZone=$adDiv.data('adZone'),newAdId=adId+'-slider',newPath,$newDiv,newAdSlot,$def;if($adDiv.data('isSliderUnit')){return;}
if((!adZone||$adDiv.data('hasSliderUnit'))&&$adDiv.data('GoogleAdSlot')){gptRefreshAdSlot($adDiv);return;}
$newDiv=$adDiv.empty().clone(true,false).insertAfter($adDiv);googletag.pubads().clear([oldSlot]);$adDiv.empty().hide();$newDiv.attr('id',newAdId).data('isSliderUnit',true);if(oldZone.substring(oldZone.length-5)==='.tmus'){newPath=oldZone+'/'+adZone;}else{newPath=adZone?oldSlot.getAdUnitPath().replace(/(.*)\.tmus\/?([^;]*)(.*)/,'$1.tmus/'+adZone+'$3'):oldSlot.getAdUnitPath();}
newAdSlot=googletag.defineSlot(newPath,[[oldSlot.getSizes()[0].getWidth(),oldSlot.getSizes()[0].getHeight()]],newAdId);newAdSlot.setCollapseEmptyDiv(true);newAdSlot.addService(googletag.pubads());$adDiv.data('GoogleAdSlot',newAdSlot);$adDiv.data('hasSliderUnit',true);$.each(oldSlot.getTargetingMap(),function(index,value){newAdSlot.setTargeting(index,value);});googletag.display(newAdId);hgm.debug('GPT New Ad Slot for refresh');}
if(typeof $('body').data('adRefreshes')==='undefined'){$('body').data('adRefreshes',1);}
else{var rand=Math.ceil(Math.random()*1000000000);refreshAmazonTags(function(mode){if(mode){if(mode==='timeout'&&typeof googletag!=='undefined'&&typeof amznads!=='undefined'){googletag.pubads().clearTargeting('amznslots');}}
this.each(function(){if($('iframe.hgm__iframe_ad',this).length>0){iframeRefresh($(this));}
else if(typeof googletag!=='undefined'&&typeof $(this).data('GoogleAdSlot')!=='undefined'){gptRefresh($(this));}});}.bind(this));if(_gaq){if(this.data('page-url')){_gaq.push(['_trackPageview',this.data('page-url')]);}else{_gaq.push(['_trackPageview']);}}
if(typeof COMSCORE!=='undefined'){COMSCORE.beacon({c1:2,c2:window.COMSCORE_CLIENT_ID,c3:"",c4:"",c5:"",c6:"",c15:""});}}
return this;};})(jQuery);;;

(function($){$.fn.getHiddenDimensions=function(boolOuter){var $item=this;var props={position:"absolute",visibility:"hidden",display:"block"};var dim={"width":0,"height":0};var $hiddenParents=$item.parents().andSelf().not(":visible");var oldProps=[];$hiddenParents.each(function(){var old={};for(var name in props){old[name]=this.style[name];this.style[name]=props[name];}
oldProps.push(old);});dim.width=(boolOuter===true)?$item.outerWidth():$item.width();dim.height=(boolOuter===true)?$item.outerHeight():$item.height();$hiddenParents.each(function(i){var old=oldProps[i];for(var name in props){this.style[name]=old[name];}});return dim;}})(jQuery);(function($){$.fn.imgFitFill=function(opts){var defaults={mode:'fill'};var options=$.extend(defaults,opts);function fitImageAttribs(boxWidth,boxHeight,imgWidth,imgHeight){var width=boxWidth;var height=boxHeight;if(imgWidth>width||imgHeight>height){if((imgWidth/width)>(imgHeight/height)){height=Math.round(width/imgWidth*imgHeight);}
else{width=Math.round(height/imgHeight*imgWidth);}}
else{width=imgWidth;height=imgHeight;}
return{width:width,height:height,hMargin:Math.floor((boxWidth-width)/2),vMargin:Math.floor((boxHeight-height)/2)};}
function fillImageAttribs(boxWidth,boxHeight,imgWidth,imgHeight){var width=boxWidth;var height=boxHeight;if((imgWidth/width)>(imgHeight/height)){width=Math.round(height/imgHeight*imgWidth);}
else{height=Math.round(width/imgWidth*imgHeight);}
return{width:width,height:height,hMargin:Math.floor((boxWidth-width)/2),vMargin:Math.floor((boxHeight-height)/2)};}
function doResize(element){var obj=$(element);obj.removeAttr("width").removeAttr("height").css('width','').css('height','');var container=obj.parent();var attribs;var contDims=container.getHiddenDimensions();var itemDims=obj.getHiddenDimensions();if(options.mode=='fit'){attribs=fitImageAttribs(contDims.width,contDims.height,itemDims.width,itemDims.height);}
else{attribs=fillImageAttribs(contDims.width,contDims.height,itemDims.width,itemDims.height);}
obj.width(attribs.width);obj.height(attribs.height);obj.css('margin',''+attribs.vMargin+'px 0 0 '+attribs.hMargin+'px');}
return this.filter("img").each(function(){if(!this.complete||(!$.browser.msie&&(typeof this.naturalWidth=="undefined"||this.naturalWidth==0))){$(this).load(function(){doResize(this);});}
else{doResize(this);}});};})(jQuery);;;

(function(){var rsplit=function(string,regex){var result=regex.exec(string),retArr=new Array(),first_idx,last_idx,first_bit;while(result!=null)
{first_idx=result.index;last_idx=regex.lastIndex;if((first_idx)!=0)
{first_bit=string.substring(0,first_idx);retArr.push(string.substring(0,first_idx));string=string.slice(first_idx);}
retArr.push(result[0]);string=string.slice(result[0].length);result=regex.exec(string);}
if(!string=='')
{retArr.push(string);}
return retArr;},chop=function(string){return string.substr(0,string.length-1);},extend=function(d,s){for(var n in s){if(s.hasOwnProperty(n))d[n]=s[n]}}
EJS=function(options){options=typeof options=="string"?{view:options}:options
this.set_options(options);if(options.precompiled){this.template={};this.template.process=options.precompiled;EJS.update(this.name,this);return;}
if(options.element)
{if(typeof options.element=='string'){var name=options.element
options.element=document.getElementById(options.element)
if(options.element==null)throw name+'does not exist!'}
if(options.element.value){this.text=options.element.value}else{this.text=options.element.innerHTML}
this.name=options.element.id
this.type='['}else if(options.url){options.url=EJS.endExt(options.url,this.extMatch);this.name=this.name?this.name:options.url;var url=options.url
var template=EJS.get(this.name,this.cache);if(template)return template;if(template==EJS.INVALID_PATH)return null;try{this.text=EJS.request(url+(this.cache?'':'?'+Math.random()));}catch(e){}
if(this.text==null){throw({type:'EJS',message:'There is no template at '+url});}}
var template=new EJS.Compiler(this.text,this.type);template.compile(options,this.name);EJS.update(this.name,this);this.template=template;};EJS.prototype={render:function(object,extra_helpers){object=object||{};this._extra_helpers=extra_helpers;var v=new EJS.Helpers(object,extra_helpers||{});return this.template.process.call(object,object,v);},update:function(element,options){if(typeof element=='string'){element=document.getElementById(element)}
if(options==null){_template=this;return function(object){EJS.prototype.update.call(_template,element,object)}}
if(typeof options=='string'){params={}
params.url=options
_template=this;params.onComplete=function(request){var object=eval(request.responseText)
EJS.prototype.update.call(_template,element,object)}
EJS.ajax_request(params)}else
{element.innerHTML=this.render(options)}},out:function(){return this.template.out;},set_options:function(options){this.type=options.type||EJS.type;this.cache=options.cache!=null?options.cache:EJS.cache;this.text=options.text||null;this.name=options.name||null;this.ext=options.ext||EJS.ext;this.extMatch=new RegExp(this.ext.replace(/\./,'\.'));}};EJS.endExt=function(path,match){if(!path)return null;match.lastIndex=0
return path+(match.test(path)?'':this.ext)}
EJS.Scanner=function(source,left,right){extend(this,{left_delimiter:left+'%',right_delimiter:'%'+right,double_left:left+'%%',double_right:'%%'+right,left_equal:left+'%=',left_comment:left+'%#'})
this.SplitRegexp=left=='['?/(\[%%)|(%%\])|(\[%=)|(\[%#)|(\[%)|(%\]\n)|(%\])|(\n)/:new RegExp('('+this.double_left+')|(%%'+this.double_right+')|('+this.left_equal+')|('+this.left_comment+')|('+this.left_delimiter+')|('+this.right_delimiter+'\n)|('+this.right_delimiter+')|(\n)');this.source=source;this.stag=null;this.lines=0;};EJS.Scanner.to_text=function(input){if(input==null||input===undefined)
return'';if(input instanceof Date)
return input.toDateString();if(input.toString)
return input.toString();return'';};EJS.Scanner.prototype={scan:function(block){scanline=this.scanline;regex=this.SplitRegexp;if(!this.source=='')
{var source_split=rsplit(this.source,/\n/);for(var i=0;i<source_split.length;i++){var item=source_split[i];this.scanline(item,regex,block);}}},scanline:function(line,regex,block){this.lines++;var line_split=rsplit(line,regex);for(var i=0;i<line_split.length;i++){var token=line_split[i];if(token!=null){try{block(token,this);}catch(e){throw{type:'EJS.Scanner',line:this.lines};}}}}};EJS.Buffer=function(pre_cmd,post_cmd){this.line=new Array();this.script="";this.pre_cmd=pre_cmd;this.post_cmd=post_cmd;for(var i=0;i<this.pre_cmd.length;i++)
{this.push(pre_cmd[i]);}};EJS.Buffer.prototype={push:function(cmd){this.line.push(cmd);},cr:function(){this.script=this.script+this.line.join('; ');this.line=new Array();this.script=this.script+"\n";},close:function(){if(this.line.length>0)
{for(var i=0;i<this.post_cmd.length;i++){this.push(pre_cmd[i]);}
this.script=this.script+this.line.join('; ');line=null;}}};EJS.Compiler=function(source,left){this.pre_cmd=['var ___ViewO = [];'];this.post_cmd=new Array();this.source=' ';if(source!=null)
{if(typeof source=='string')
{source=source.replace(/\r\n/g,"\n");source=source.replace(/\r/g,"\n");this.source=source;}else if(source.innerHTML){this.source=source.innerHTML;}
if(typeof this.source!='string'){this.source="";}}
left=left||'<';var right='>';switch(left){case'[':right=']';break;case'<':break;default:throw left+' is not a supported deliminator';break;}
this.scanner=new EJS.Scanner(this.source,left,right);this.out='';};EJS.Compiler.prototype={compile:function(options,name){options=options||{};this.out='';var put_cmd="___ViewO.push(";var insert_cmd=put_cmd;var buff=new EJS.Buffer(this.pre_cmd,this.post_cmd);var content='';var clean=function(content)
{content=content.replace(/\\/g,'\\\\');content=content.replace(/\n/g,'\\n');content=content.replace(/"/g,'\\"');return content;};this.scanner.scan(function(token,scanner){if(scanner.stag==null)
{switch(token){case'\n':content=content+"\n";buff.push(put_cmd+'"'+clean(content)+'");');buff.cr();content='';break;case scanner.left_delimiter:case scanner.left_equal:case scanner.left_comment:scanner.stag=token;if(content.length>0)
{buff.push(put_cmd+'"'+clean(content)+'")');}
content='';break;case scanner.double_left:content=content+scanner.left_delimiter;break;default:content=content+token;break;}}
else{switch(token){case scanner.right_delimiter:switch(scanner.stag){case scanner.left_delimiter:if(content[content.length-1]=='\n')
{content=chop(content);buff.push(content);buff.cr();}
else{buff.push(content);}
break;case scanner.left_equal:buff.push(insert_cmd+"(EJS.Scanner.to_text("+content+")))");break;}
scanner.stag=null;content='';break;case scanner.double_right:content=content+scanner.right_delimiter;break;default:content=content+token;break;}}});if(content.length>0)
{buff.push(put_cmd+'"'+clean(content)+'")');}
buff.close();this.out=buff.script+";";var to_be_evaled='/*'+name+'*/this.process = function(_CONTEXT,_VIEW) { try { with(_VIEW) { with (_CONTEXT) {'+this.out+" return ___ViewO.join('');}}}catch(e){e.lineNumber=null;throw e;}};";try{eval(to_be_evaled);}catch(e){if(typeof JSLINT!='undefined'){JSLINT(this.out);for(var i=0;i<JSLINT.errors.length;i++){var error=JSLINT.errors[i];if(error.reason!="Unnecessary semicolon."){error.line++;var e=new Error();e.lineNumber=error.line;e.message=error.reason;if(options.view)
e.fileName=options.view;throw e;}}}else{throw e;}}}};EJS.config=function(options){EJS.cache=options.cache!=null?options.cache:EJS.cache;EJS.type=options.type!=null?options.type:EJS.type;EJS.ext=options.ext!=null?options.ext:EJS.ext;var templates_directory=EJS.templates_directory||{};EJS.templates_directory=templates_directory;EJS.get=function(path,cache){if(cache==false)return null;if(templates_directory[path])return templates_directory[path];return null;};EJS.update=function(path,template){if(path==null)return;templates_directory[path]=template;};EJS.INVALID_PATH=-1;};EJS.config({cache:true,type:'<',ext:'.ejs'});EJS.Helpers=function(data,extras){this._data=data;this._extras=extras;extend(this,extras);};EJS.Helpers.prototype={view:function(options,data,helpers){if(!helpers)helpers=this._extras
if(!data)data=this._data;return new EJS(options).render(data,helpers);},to_text:function(input,null_text){if(input==null||input===undefined)return null_text||'';if(input instanceof Date)return input.toDateString();if(input.toString)return input.toString().replace(/\n/g,'<br />').replace(/''/g,"'");return'';}};EJS.newRequest=function(){var factories=[function(){return new ActiveXObject("Msxml2.XMLHTTP");},function(){return new XMLHttpRequest();},function(){return new ActiveXObject("Microsoft.XMLHTTP");}];for(var i=0;i<factories.length;i++){try{var request=factories[i]();if(request!=null)return request;}
catch(e){continue;}}}
EJS.request=function(path){var request=new EJS.newRequest()
request.open("GET",path,false);try{request.send(null);}
catch(e){return null;}
if(request.status==404||request.status==2||(request.status==0&&request.responseText==''))return null;return request.responseText}
EJS.ajax_request=function(params){params.method=(params.method?params.method:'GET')
var request=new EJS.newRequest();request.onreadystatechange=function(){if(request.readyState==4){if(request.status==200){params.onComplete(request)}else
{params.onComplete(request)}}}
request.open(params.method,params.url)
request.send(null)}})();;;

var Swiper=function(selector,params){'use strict';if(document.body.__defineGetter__){if(HTMLElement){var element=HTMLElement.prototype;if(element.__defineGetter__){element.__defineGetter__('outerHTML',function(){return new XMLSerializer().serializeToString(this);});}}}
if(!window.getComputedStyle){window.getComputedStyle=function(el,pseudo){this.el=el;this.getPropertyValue=function(prop){var re=/(\-([a-z]){1})/g;if(prop==='float')prop='styleFloat';if(re.test(prop)){prop=prop.replace(re,function(){return arguments[2].toUpperCase();});}
return el.currentStyle[prop]?el.currentStyle[prop]:null;};return this;};}
if(!Array.prototype.indexOf){Array.prototype.indexOf=function(obj,start){for(var i=(start||0),j=this.length;i<j;i++){if(this[i]===obj){return i;}}
return-1;};}
if(!document.querySelectorAll){if(!window.jQuery)return;}
function $$(selector,context){if(document.querySelectorAll)
return(context||document).querySelectorAll(selector);else
return jQuery(selector,context);}
if(typeof selector==='undefined')return;if(!(selector.nodeType)){if($$(selector).length===0)return;}
var _this=this;_this.touches={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,diff:0,abs:0};_this.positions={start:0,abs:0,diff:0,current:0};_this.times={start:0,end:0};_this.id=(new Date()).getTime();_this.container=(selector.nodeType)?selector:$$(selector)[0];_this.isTouched=false;_this.isMoved=false;_this.activeIndex=0;_this.centerIndex=0;_this.activeLoaderIndex=0;_this.activeLoopIndex=0;_this.previousIndex=null;_this.velocity=0;_this.snapGrid=[];_this.slidesGrid=[];_this.imagesToLoad=[];_this.imagesLoaded=0;_this.wrapperLeft=0;_this.wrapperRight=0;_this.wrapperTop=0;_this.wrapperBottom=0;_this.isAndroid=navigator.userAgent.toLowerCase().indexOf('android')>=0;var wrapper,slideSize,wrapperSize,direction,isScrolling,containerSize;var defaults={eventTarget:'wrapper',mode:'horizontal',touchRatio:1,speed:300,freeMode:false,freeModeFluid:false,momentumRatio:1,momentumBounce:true,momentumBounceRatio:1,slidesPerView:1,slidesPerGroup:1,slidesPerViewFit:true,simulateTouch:true,followFinger:true,shortSwipes:true,longSwipesRatio:0.5,moveStartThreshold:false,onlyExternal:false,createPagination:true,pagination:false,paginationElement:'span',paginationClickable:false,paginationAsRange:true,resistance:true,scrollContainer:false,preventLinks:true,preventLinksPropagation:false,noSwiping:false,noSwipingClass:'swiper-no-swiping',initialSlide:0,keyboardControl:false,mousewheelControl:false,mousewheelControlForceToAxis:false,useCSS3Transforms:true,autoplay:false,autoplayDisableOnInteraction:true,autoplayStopOnLast:false,loop:false,loopAdditionalSlides:0,roundLengths:false,calculateHeight:false,cssWidthAndHeight:false,updateOnImagesReady:true,releaseFormElements:true,watchActiveIndex:false,visibilityFullFit:false,offsetPxBefore:0,offsetPxAfter:0,offsetSlidesBefore:0,offsetSlidesAfter:0,centeredSlides:false,queueStartCallbacks:false,queueEndCallbacks:false,autoResize:true,resizeReInit:false,DOMAnimation:true,loader:{slides:[],slidesHTMLType:'inner',surroundGroups:1,logic:'reload',loadAllSlides:false},slideElement:'div',slideClass:'swiper-slide',slideActiveClass:'swiper-slide-active',slideVisibleClass:'swiper-slide-visible',slideDuplicateClass:'swiper-slide-duplicate',wrapperClass:'swiper-wrapper',paginationElementClass:'swiper-pagination-switch',paginationActiveClass:'swiper-active-switch',paginationVisibleClass:'swiper-visible-switch'};params=params||{};for(var prop in defaults){if(prop in params&&typeof params[prop]==='object'){for(var subProp in defaults[prop]){if(!(subProp in params[prop])){params[prop][subProp]=defaults[prop][subProp];}}}
else if(!(prop in params)){params[prop]=defaults[prop];}}
_this.params=params;if(params.scrollContainer){params.freeMode=true;params.freeModeFluid=true;}
if(params.loop){params.resistance='100%';}
var isH=params.mode==='horizontal';var desktopEvents=['mousedown','mousemove','mouseup'];if(_this.browser.ie10)desktopEvents=['MSPointerDown','MSPointerMove','MSPointerUp'];if(_this.browser.ie11)desktopEvents=['pointerdown','pointermove','pointerup'];_this.touchEvents={touchStart:_this.support.touch||!params.simulateTouch?'touchstart':desktopEvents[0],touchMove:_this.support.touch||!params.simulateTouch?'touchmove':desktopEvents[1],touchEnd:_this.support.touch||!params.simulateTouch?'touchend':desktopEvents[2]};for(var i=_this.container.childNodes.length-1;i>=0;i--){if(_this.container.childNodes[i].className){var _wrapperClasses=_this.container.childNodes[i].className.split(/\s+/);for(var j=0;j<_wrapperClasses.length;j++){if(_wrapperClasses[j]===params.wrapperClass){wrapper=_this.container.childNodes[i];}}}}
_this.wrapper=wrapper;_this._extendSwiperSlide=function(el){el.append=function(){if(params.loop){el.insertAfter(_this.slides.length-_this.loopedSlides);}
else{_this.wrapper.appendChild(el);_this.reInit();}
return el;};el.prepend=function(){if(params.loop){_this.wrapper.insertBefore(el,_this.slides[_this.loopedSlides]);_this.removeLoopedSlides();_this.calcSlides();_this.createLoop();}
else{_this.wrapper.insertBefore(el,_this.wrapper.firstChild);}
_this.reInit();return el;};el.insertAfter=function(index){if(typeof index==='undefined')return false;var beforeSlide;if(params.loop){beforeSlide=_this.slides[index+1+_this.loopedSlides];if(beforeSlide){_this.wrapper.insertBefore(el,beforeSlide);}
else{_this.wrapper.appendChild(el);}
_this.removeLoopedSlides();_this.calcSlides();_this.createLoop();}
else{beforeSlide=_this.slides[index+1];_this.wrapper.insertBefore(el,beforeSlide);}
_this.reInit();return el;};el.clone=function(){return _this._extendSwiperSlide(el.cloneNode(true));};el.remove=function(){_this.wrapper.removeChild(el);_this.reInit();};el.html=function(html){if(typeof html==='undefined'){return el.innerHTML;}
else{el.innerHTML=html;return el;}};el.index=function(){var index;for(var i=_this.slides.length-1;i>=0;i--){if(el===_this.slides[i])index=i;}
return index;};el.isActive=function(){if(el.index()===_this.activeIndex)return true;else return false;};if(!el.swiperSlideDataStorage)el.swiperSlideDataStorage={};el.getData=function(name){return el.swiperSlideDataStorage[name];};el.setData=function(name,value){el.swiperSlideDataStorage[name]=value;return el;};el.data=function(name,value){if(typeof value==='undefined'){return el.getAttribute('data-'+name);}
else{el.setAttribute('data-'+name,value);return el;}};el.getWidth=function(outer,round){return _this.h.getWidth(el,outer,round);};el.getHeight=function(outer,round){return _this.h.getHeight(el,outer,round);};el.getOffset=function(){return _this.h.getOffset(el);};return el;};_this.calcSlides=function(forceCalcSlides){var oldNumber=_this.slides?_this.slides.length:false;_this.slides=[];_this.displaySlides=[];for(var i=0;i<_this.wrapper.childNodes.length;i++){if(_this.wrapper.childNodes[i].className){var _className=_this.wrapper.childNodes[i].className;var _slideClasses=_className.split(/\s+/);for(var j=0;j<_slideClasses.length;j++){if(_slideClasses[j]===params.slideClass){_this.slides.push(_this.wrapper.childNodes[i]);}}}}
for(i=_this.slides.length-1;i>=0;i--){_this._extendSwiperSlide(_this.slides[i]);}
if(oldNumber===false)return;if(oldNumber!==_this.slides.length||forceCalcSlides){removeSlideEvents();addSlideEvents();_this.updateActiveSlide();if(_this.params.pagination)_this.createPagination();_this.callPlugins('numberOfSlidesChanged');}};_this.createSlide=function(html,slideClassList,el){slideClassList=slideClassList||_this.params.slideClass;el=el||params.slideElement;var newSlide=document.createElement(el);newSlide.innerHTML=html||'';newSlide.className=slideClassList;return _this._extendSwiperSlide(newSlide);};_this.appendSlide=function(html,slideClassList,el){if(!html)return;if(html.nodeType){return _this._extendSwiperSlide(html).append();}
else{return _this.createSlide(html,slideClassList,el).append();}};_this.prependSlide=function(html,slideClassList,el){if(!html)return;if(html.nodeType){return _this._extendSwiperSlide(html).prepend();}
else{return _this.createSlide(html,slideClassList,el).prepend();}};_this.insertSlideAfter=function(index,html,slideClassList,el){if(typeof index==='undefined')return false;if(html.nodeType){return _this._extendSwiperSlide(html).insertAfter(index);}
else{return _this.createSlide(html,slideClassList,el).insertAfter(index);}};_this.removeSlide=function(index){if(_this.slides[index]){if(params.loop){if(!_this.slides[index+_this.loopedSlides])return false;_this.slides[index+_this.loopedSlides].remove();_this.removeLoopedSlides();_this.calcSlides();_this.createLoop();}
else _this.slides[index].remove();return true;}
else return false;};_this.removeLastSlide=function(){if(_this.slides.length>0){if(params.loop){_this.slides[_this.slides.length-1-_this.loopedSlides].remove();_this.removeLoopedSlides();_this.calcSlides();_this.createLoop();}
else _this.slides[_this.slides.length-1].remove();return true;}
else{return false;}};_this.removeAllSlides=function(){for(var i=_this.slides.length-1;i>=0;i--){_this.slides[i].remove();}};_this.getSlide=function(index){return _this.slides[index];};_this.getLastSlide=function(){return _this.slides[_this.slides.length-1];};_this.getFirstSlide=function(){return _this.slides[0];};_this.activeSlide=function(){return _this.slides[_this.activeIndex];};_this.fireCallback=function(){var callback=arguments[0];if(Object.prototype.toString.call(callback)==='[object Array]'){for(var i=0;i<callback.length;i++){if(typeof callback[i]==='function'){callback[i](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);}}}else if(Object.prototype.toString.call(callback)==='[object String]'){if(params['on'+callback])_this.fireCallback(params['on'+callback],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);}else{callback(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);}};function isArray(obj){if(Object.prototype.toString.apply(obj)==='[object Array]')return true;return false;}
_this.addCallback=function(callback,func){var _this=this,tempFunc;if(_this.params['on'+callback]){if(isArray(this.params['on'+callback])){return this.params['on'+callback].push(func);}else if(typeof this.params['on'+callback]==='function'){tempFunc=this.params['on'+callback];this.params['on'+callback]=[];this.params['on'+callback].push(tempFunc);return this.params['on'+callback].push(func);}}else{this.params['on'+callback]=[];return this.params['on'+callback].push(func);}};_this.removeCallbacks=function(callback){if(_this.params['on'+callback]){_this.params['on'+callback]=null;}};var _plugins=[];for(var plugin in _this.plugins){if(params[plugin]){var p=_this.plugins[plugin](_this,params[plugin]);if(p)_plugins.push(p);}}
_this.callPlugins=function(method,args){if(!args)args={};for(var i=0;i<_plugins.length;i++){if(method in _plugins[i]){_plugins[i][method](args);}}};if((_this.browser.ie10||_this.browser.ie11)&&!params.onlyExternal){_this.wrapper.classList.add('swiper-wp8-'+(isH?'horizontal':'vertical'));}
if(params.freeMode){_this.container.className+=' swiper-free-mode';}
_this.initialized=false;_this.init=function(force,forceCalcSlides){var _width=_this.h.getWidth(_this.container,false,params.roundLengths);var _height=_this.h.getHeight(_this.container,false,params.roundLengths);if(_width===_this.width&&_height===_this.height&&!force)return;_this.width=_width;_this.height=_height;var slideWidth,slideHeight,slideMaxHeight,wrapperWidth,wrapperHeight,slideLeft;var i;containerSize=isH?_width:_height;var wrapper=_this.wrapper;if(force){_this.calcSlides(forceCalcSlides);}
if(params.slidesPerView==='auto'){var slidesWidth=0;var slidesHeight=0;if(params.slidesOffset>0){wrapper.style.paddingLeft='';wrapper.style.paddingRight='';wrapper.style.paddingTop='';wrapper.style.paddingBottom='';}
wrapper.style.width='';wrapper.style.height='';if(params.offsetPxBefore>0){if(isH)_this.wrapperLeft=params.offsetPxBefore;else _this.wrapperTop=params.offsetPxBefore;}
if(params.offsetPxAfter>0){if(isH)_this.wrapperRight=params.offsetPxAfter;else _this.wrapperBottom=params.offsetPxAfter;}
if(params.centeredSlides){if(isH){_this.wrapperLeft=(containerSize-this.slides[0].getWidth(true,params.roundLengths))/2;_this.wrapperRight=(containerSize-_this.slides[_this.slides.length-1].getWidth(true,params.roundLengths))/2;}
else{_this.wrapperTop=(containerSize-_this.slides[0].getHeight(true,params.roundLengths))/2;_this.wrapperBottom=(containerSize-_this.slides[_this.slides.length-1].getHeight(true,params.roundLengths))/2;}}
if(isH){if(_this.wrapperLeft>=0)wrapper.style.paddingLeft=_this.wrapperLeft+'px';if(_this.wrapperRight>=0)wrapper.style.paddingRight=_this.wrapperRight+'px';}
else{if(_this.wrapperTop>=0)wrapper.style.paddingTop=_this.wrapperTop+'px';if(_this.wrapperBottom>=0)wrapper.style.paddingBottom=_this.wrapperBottom+'px';}
slideLeft=0;var centeredSlideLeft=0;_this.snapGrid=[];_this.slidesGrid=[];slideMaxHeight=0;for(i=0;i<_this.slides.length;i++){slideWidth=_this.slides[i].getWidth(true,params.roundLengths);slideHeight=_this.slides[i].getHeight(true,params.roundLengths);if(params.calculateHeight){slideMaxHeight=Math.max(slideMaxHeight,slideHeight);}
var _slideSize=isH?slideWidth:slideHeight;if(params.centeredSlides){var nextSlideWidth=i===_this.slides.length-1?0:_this.slides[i+1].getWidth(true,params.roundLengths);var nextSlideHeight=i===_this.slides.length-1?0:_this.slides[i+1].getHeight(true,params.roundLengths);var nextSlideSize=isH?nextSlideWidth:nextSlideHeight;if(_slideSize>containerSize){if(params.slidesPerViewFit){_this.snapGrid.push(slideLeft+_this.wrapperLeft);_this.snapGrid.push(slideLeft+_slideSize-containerSize+_this.wrapperLeft);}
else{for(var j=0;j<=Math.floor(_slideSize/(containerSize+_this.wrapperLeft));j++){if(j===0)_this.snapGrid.push(slideLeft+_this.wrapperLeft);else _this.snapGrid.push(slideLeft+_this.wrapperLeft+containerSize*j);}}
_this.slidesGrid.push(slideLeft+_this.wrapperLeft);}
else{_this.snapGrid.push(centeredSlideLeft);_this.slidesGrid.push(centeredSlideLeft);}
centeredSlideLeft+=_slideSize/2+nextSlideSize/2;}
else{if(_slideSize>containerSize){if(params.slidesPerViewFit){_this.snapGrid.push(slideLeft);_this.snapGrid.push(slideLeft+_slideSize-containerSize);}
else{if(containerSize!==0){for(var k=0;k<=Math.floor(_slideSize/containerSize);k++){_this.snapGrid.push(slideLeft+containerSize*k);}}
else{_this.snapGrid.push(slideLeft);}}}
else{_this.snapGrid.push(slideLeft);}
_this.slidesGrid.push(slideLeft);}
slideLeft+=_slideSize;slidesWidth+=slideWidth;slidesHeight+=slideHeight;}
if(params.calculateHeight)_this.height=slideMaxHeight;if(isH){wrapperSize=slidesWidth+_this.wrapperRight+_this.wrapperLeft;wrapper.style.width=(slidesWidth)+'px';wrapper.style.height=(_this.height)+'px';}
else{wrapperSize=slidesHeight+_this.wrapperTop+_this.wrapperBottom;wrapper.style.width=(_this.width)+'px';wrapper.style.height=(slidesHeight)+'px';}}
else if(params.scrollContainer){wrapper.style.width='';wrapper.style.height='';wrapperWidth=_this.slides[0].getWidth(true,params.roundLengths);wrapperHeight=_this.slides[0].getHeight(true,params.roundLengths);wrapperSize=isH?wrapperWidth:wrapperHeight;wrapper.style.width=wrapperWidth+'px';wrapper.style.height=wrapperHeight+'px';slideSize=isH?wrapperWidth:wrapperHeight;}
else{if(params.calculateHeight){slideMaxHeight=0;wrapperHeight=0;if(!isH)_this.container.style.height='';wrapper.style.height='';for(i=0;i<_this.slides.length;i++){_this.slides[i].style.height='';slideMaxHeight=Math.max(_this.slides[i].getHeight(true),slideMaxHeight);if(!isH)wrapperHeight+=_this.slides[i].getHeight(true);}
slideHeight=slideMaxHeight;_this.height=slideHeight;if(isH)wrapperHeight=slideHeight;else{containerSize=slideHeight;_this.container.style.height=containerSize+'px';}}
else{slideHeight=isH?_this.height:_this.height/params.slidesPerView;if(params.roundLengths)slideHeight=Math.round(slideHeight);wrapperHeight=isH?_this.height:_this.slides.length*slideHeight;}
slideWidth=isH?_this.width/params.slidesPerView:_this.width;if(params.roundLengths)slideWidth=Math.round(slideWidth);wrapperWidth=isH?_this.slides.length*slideWidth:_this.width;slideSize=isH?slideWidth:slideHeight;if(params.offsetSlidesBefore>0){if(isH)_this.wrapperLeft=slideSize*params.offsetSlidesBefore;else _this.wrapperTop=slideSize*params.offsetSlidesBefore;}
if(params.offsetSlidesAfter>0){if(isH)_this.wrapperRight=slideSize*params.offsetSlidesAfter;else _this.wrapperBottom=slideSize*params.offsetSlidesAfter;}
if(params.offsetPxBefore>0){if(isH)_this.wrapperLeft=params.offsetPxBefore;else _this.wrapperTop=params.offsetPxBefore;}
if(params.offsetPxAfter>0){if(isH)_this.wrapperRight=params.offsetPxAfter;else _this.wrapperBottom=params.offsetPxAfter;}
if(params.centeredSlides){if(isH){_this.wrapperLeft=(containerSize-slideSize)/2;_this.wrapperRight=(containerSize-slideSize)/2;}
else{_this.wrapperTop=(containerSize-slideSize)/2;_this.wrapperBottom=(containerSize-slideSize)/2;}}
if(isH){if(_this.wrapperLeft>0)wrapper.style.paddingLeft=_this.wrapperLeft+'px';if(_this.wrapperRight>0)wrapper.style.paddingRight=_this.wrapperRight+'px';}
else{if(_this.wrapperTop>0)wrapper.style.paddingTop=_this.wrapperTop+'px';if(_this.wrapperBottom>0)wrapper.style.paddingBottom=_this.wrapperBottom+'px';}
wrapperSize=isH?wrapperWidth+_this.wrapperRight+_this.wrapperLeft:wrapperHeight+_this.wrapperTop+_this.wrapperBottom;if(!params.cssWidthAndHeight){if(parseFloat(wrapperWidth)>0){wrapper.style.width=wrapperWidth+'px';}
if(parseFloat(wrapperHeight)>0){wrapper.style.height=wrapperHeight+'px';}}
slideLeft=0;_this.snapGrid=[];_this.slidesGrid=[];for(i=0;i<_this.slides.length;i++){_this.snapGrid.push(slideLeft);_this.slidesGrid.push(slideLeft);slideLeft+=slideSize;if(!params.cssWidthAndHeight){if(parseFloat(slideWidth)>0){_this.slides[i].style.width=slideWidth+'px';}
if(parseFloat(slideHeight)>0){_this.slides[i].style.height=slideHeight+'px';}}}}
if(!_this.initialized){_this.callPlugins('onFirstInit');if(params.onFirstInit)_this.fireCallback(params.onFirstInit,_this);}
else{_this.callPlugins('onInit');if(params.onInit)_this.fireCallback(params.onInit,_this);}
_this.initialized=true;};_this.reInit=function(forceCalcSlides){_this.init(true,forceCalcSlides);};_this.resizeFix=function(reInit){_this.callPlugins('beforeResizeFix');_this.init(params.resizeReInit||reInit);if(!params.freeMode){_this.swipeTo((params.loop?_this.activeLoopIndex:_this.activeIndex),0,false);if(params.autoplay){if(_this.support.transitions&&typeof autoplayTimeoutId!=='undefined'){if(typeof autoplayTimeoutId!=='undefined'){clearTimeout(autoplayTimeoutId);autoplayTimeoutId=undefined;_this.startAutoplay();}}
else{if(typeof autoplayIntervalId!=='undefined'){clearInterval(autoplayIntervalId);autoplayIntervalId=undefined;_this.startAutoplay();}}}}
else if(_this.getWrapperTranslate()<-maxWrapperPosition()){_this.setWrapperTransition(0);_this.setWrapperTranslate(-maxWrapperPosition());}
_this.callPlugins('afterResizeFix');};function maxWrapperPosition(){var a=(wrapperSize-containerSize);if(params.freeMode){a=wrapperSize-containerSize;}
if(params.slidesPerView>_this.slides.length&&!params.centeredSlides){a=0;}
if(a<0)a=0;return a;}
function initEvents(){var bind=_this.h.addEventListener;var eventTarget=params.eventTarget==='wrapper'?_this.wrapper:_this.container;if(!(_this.browser.ie10||_this.browser.ie11)){if(_this.support.touch){bind(eventTarget,'touchstart',onTouchStart);bind(eventTarget,'touchmove',onTouchMove);bind(eventTarget,'touchend',onTouchEnd);}
if(params.simulateTouch){bind(eventTarget,'mousedown',onTouchStart);bind(document,'mousemove',onTouchMove);bind(document,'mouseup',onTouchEnd);}}
else{bind(eventTarget,_this.touchEvents.touchStart,onTouchStart);bind(document,_this.touchEvents.touchMove,onTouchMove);bind(document,_this.touchEvents.touchEnd,onTouchEnd);}
if(params.autoResize){bind(window,'resize',_this.resizeFix);}
addSlideEvents();_this._wheelEvent=false;if(params.mousewheelControl){if(document.onmousewheel!==undefined){_this._wheelEvent='mousewheel';}
if(!_this._wheelEvent){try{new WheelEvent('wheel');_this._wheelEvent='wheel';}catch(e){}}
if(!_this._wheelEvent){_this._wheelEvent='DOMMouseScroll';}
if(_this._wheelEvent){bind(_this.container,_this._wheelEvent,handleMousewheel);}}
function _loadImage(src){var image=new Image();image.onload=function(){if(_this&&_this.imagesLoaded!==undefined)_this.imagesLoaded++;if(_this.imagesLoaded===_this.imagesToLoad.length){_this.reInit();if(params.onImagesReady)_this.fireCallback(params.onImagesReady,_this);}};image.src=src;}
if(params.keyboardControl){bind(document,'keydown',handleKeyboardKeys);}
if(params.updateOnImagesReady){_this.imagesToLoad=$$('img',_this.container);for(var i=0;i<_this.imagesToLoad.length;i++){_loadImage(_this.imagesToLoad[i].getAttribute('src'));}}}
_this.destroy=function(){var unbind=_this.h.removeEventListener;var eventTarget=params.eventTarget==='wrapper'?_this.wrapper:_this.container;if(!(_this.browser.ie10||_this.browser.ie11)){if(_this.support.touch){unbind(eventTarget,'touchstart',onTouchStart);unbind(eventTarget,'touchmove',onTouchMove);unbind(eventTarget,'touchend',onTouchEnd);}
if(params.simulateTouch){unbind(eventTarget,'mousedown',onTouchStart);unbind(document,'mousemove',onTouchMove);unbind(document,'mouseup',onTouchEnd);}}
else{unbind(eventTarget,_this.touchEvents.touchStart,onTouchStart);unbind(document,_this.touchEvents.touchMove,onTouchMove);unbind(document,_this.touchEvents.touchEnd,onTouchEnd);}
if(params.autoResize){unbind(window,'resize',_this.resizeFix);}
removeSlideEvents();if(params.paginationClickable){removePaginationEvents();}
if(params.mousewheelControl&&_this._wheelEvent){unbind(_this.container,_this._wheelEvent,handleMousewheel);}
if(params.keyboardControl){unbind(document,'keydown',handleKeyboardKeys);}
if(params.autoplay){_this.stopAutoplay();}
_this.callPlugins('onDestroy');_this=null;};function addSlideEvents(){var bind=_this.h.addEventListener,i;if(params.preventLinks){var links=$$('a',_this.container);for(i=0;i<links.length;i++){bind(links[i],'click',preventClick);}}
if(params.releaseFormElements){var formElements=$$('input, textarea, select',_this.container);for(i=0;i<formElements.length;i++){bind(formElements[i],_this.touchEvents.touchStart,releaseForms,true);}}
if(params.onSlideClick){for(i=0;i<_this.slides.length;i++){bind(_this.slides[i],'click',slideClick);}}
if(params.onSlideTouch){for(i=0;i<_this.slides.length;i++){bind(_this.slides[i],_this.touchEvents.touchStart,slideTouch);}}}
function removeSlideEvents(){var unbind=_this.h.removeEventListener,i;if(params.onSlideClick){for(i=0;i<_this.slides.length;i++){unbind(_this.slides[i],'click',slideClick);}}
if(params.onSlideTouch){for(i=0;i<_this.slides.length;i++){unbind(_this.slides[i],_this.touchEvents.touchStart,slideTouch);}}
if(params.releaseFormElements){var formElements=$$('input, textarea, select',_this.container);for(i=0;i<formElements.length;i++){unbind(formElements[i],_this.touchEvents.touchStart,releaseForms,true);}}
if(params.preventLinks){var links=$$('a',_this.container);for(i=0;i<links.length;i++){unbind(links[i],'click',preventClick);}}}
function handleKeyboardKeys(e){var kc=e.keyCode||e.charCode;if(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)return;if(kc===37||kc===39||kc===38||kc===40){var inView=false;var swiperOffset=_this.h.getOffset(_this.container);var scrollLeft=_this.h.windowScroll().left;var scrollTop=_this.h.windowScroll().top;var windowWidth=_this.h.windowWidth();var windowHeight=_this.h.windowHeight();var swiperCoord=[[swiperOffset.left,swiperOffset.top],[swiperOffset.left+_this.width,swiperOffset.top],[swiperOffset.left,swiperOffset.top+_this.height],[swiperOffset.left+_this.width,swiperOffset.top+_this.height]];for(var i=0;i<swiperCoord.length;i++){var point=swiperCoord[i];if(point[0]>=scrollLeft&&point[0]<=scrollLeft+windowWidth&&point[1]>=scrollTop&&point[1]<=scrollTop+windowHeight){inView=true;}}
if(!inView)return;}
if(isH){if(kc===37||kc===39){if(e.preventDefault)e.preventDefault();else e.returnValue=false;}
if(kc===39)_this.swipeNext();if(kc===37)_this.swipePrev();}
else{if(kc===38||kc===40){if(e.preventDefault)e.preventDefault();else e.returnValue=false;}
if(kc===40)_this.swipeNext();if(kc===38)_this.swipePrev();}}
_this.disableKeyboardControl=function(){params.keyboardControl=false;_this.h.removeEventListener(document,'keydown',handleKeyboardKeys);};_this.enableKeyboardControl=function(){params.keyboardControl=true;_this.h.addEventListener(document,'keydown',handleKeyboardKeys);};var lastScrollTime=(new Date()).getTime();function handleMousewheel(e){var we=_this._wheelEvent;var delta=0;if(e.detail)delta=-e.detail;else if(we==='mousewheel'){if(params.mousewheelControlForceToAxis){if(isH){if(Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY))delta=e.wheelDeltaX;else return;}
else{if(Math.abs(e.wheelDeltaY)>Math.abs(e.wheelDeltaX))delta=e.wheelDeltaY;else return;}}
else{delta=e.wheelDelta;}}
else if(we==='DOMMouseScroll')delta=-e.detail;else if(we==='wheel'){if(params.mousewheelControlForceToAxis){if(isH){if(Math.abs(e.deltaX)>Math.abs(e.deltaY))delta=-e.deltaX;else return;}
else{if(Math.abs(e.deltaY)>Math.abs(e.deltaX))delta=-e.deltaY;else return;}}
else{delta=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-e.deltaX:-e.deltaY;}}
if(!params.freeMode){if((new Date()).getTime()-lastScrollTime>60){if(delta<0)_this.swipeNext();else _this.swipePrev();}
lastScrollTime=(new Date()).getTime();}
else{var position=_this.getWrapperTranslate()+delta;if(position>0)position=0;if(position<-maxWrapperPosition())position=-maxWrapperPosition();_this.setWrapperTransition(0);_this.setWrapperTranslate(position);_this.updateActiveSlide(position);if(position===0||position===-maxWrapperPosition())return;}
if(params.autoplay)_this.stopAutoplay(true);if(e.preventDefault)e.preventDefault();else e.returnValue=false;return false;}
_this.disableMousewheelControl=function(){if(!_this._wheelEvent)return false;params.mousewheelControl=false;_this.h.removeEventListener(_this.container,_this._wheelEvent,handleMousewheel);return true;};_this.enableMousewheelControl=function(){if(!_this._wheelEvent)return false;params.mousewheelControl=true;_this.h.addEventListener(_this.container,_this._wheelEvent,handleMousewheel);return true;};if(params.grabCursor){var containerStyle=_this.container.style;containerStyle.cursor='move';containerStyle.cursor='grab';containerStyle.cursor='-moz-grab';containerStyle.cursor='-webkit-grab';}
_this.allowSlideClick=true;function slideClick(event){if(_this.allowSlideClick){setClickedSlide(event);_this.fireCallback(params.onSlideClick,_this,event);}}
function slideTouch(event){setClickedSlide(event);_this.fireCallback(params.onSlideTouch,_this,event);}
function setClickedSlide(event){if(!event.currentTarget){var element=event.srcElement;do{if(element.className.indexOf(params.slideClass)>-1){break;}
element=element.parentNode;}while(element);_this.clickedSlide=element;}
else{_this.clickedSlide=event.currentTarget;}
_this.clickedSlideIndex=_this.slides.indexOf(_this.clickedSlide);_this.clickedSlideLoopIndex=_this.clickedSlideIndex-(_this.loopedSlides||0);}
_this.allowLinks=true;function preventClick(e){if(!_this.allowLinks){if(e.preventDefault)e.preventDefault();else e.returnValue=false;if(params.preventLinksPropagation&&'stopPropagation'in e){e.stopPropagation();}
return false;}}
function releaseForms(e){if(e.stopPropagation)e.stopPropagation();else e.returnValue=false;return false;}
var isTouchEvent=false;var allowThresholdMove;var allowMomentumBounce=true;function onTouchStart(event){if(params.preventLinks)_this.allowLinks=true;if(_this.isTouched||params.onlyExternal){return false;}
if(params.noSwiping&&(event.target||event.srcElement)&&noSwipingSlide(event.target||event.srcElement))return false;allowMomentumBounce=false;_this.isTouched=true;isTouchEvent=event.type==='touchstart';if(!isTouchEvent||event.targetTouches.length===1){_this.callPlugins('onTouchStartBegin');if(!isTouchEvent&&!_this.isAndroid){if(event.preventDefault)event.preventDefault();else event.returnValue=false;}
var pageX=isTouchEvent?event.targetTouches[0].pageX:(event.pageX||event.clientX);var pageY=isTouchEvent?event.targetTouches[0].pageY:(event.pageY||event.clientY);_this.touches.startX=_this.touches.currentX=pageX;_this.touches.startY=_this.touches.currentY=pageY;_this.touches.start=_this.touches.current=isH?pageX:pageY;_this.setWrapperTransition(0);_this.positions.start=_this.positions.current=_this.getWrapperTranslate();_this.setWrapperTranslate(_this.positions.start);_this.times.start=(new Date()).getTime();isScrolling=undefined;if(params.moveStartThreshold>0){allowThresholdMove=false;}
if(params.onTouchStart)_this.fireCallback(params.onTouchStart,_this,event);_this.callPlugins('onTouchStartEnd');}}
var velocityPrevPosition,velocityPrevTime;function onTouchMove(event){if(!_this.isTouched||params.onlyExternal)return;if(isTouchEvent&&event.type==='mousemove')return;var pageX=isTouchEvent?event.targetTouches[0].pageX:(event.pageX||event.clientX);var pageY=isTouchEvent?event.targetTouches[0].pageY:(event.pageY||event.clientY);if(typeof isScrolling==='undefined'&&isH){isScrolling=!!(isScrolling||Math.abs(pageY-_this.touches.startY)>Math.abs(pageX-_this.touches.startX));}
if(typeof isScrolling==='undefined'&&!isH){isScrolling=!!(isScrolling||Math.abs(pageY-_this.touches.startY)<Math.abs(pageX-_this.touches.startX));}
if(isScrolling){_this.isTouched=false;return;}
if(event.assignedToSwiper){_this.isTouched=false;return;}
event.assignedToSwiper=true;if(params.preventLinks){_this.allowLinks=false;}
if(params.onSlideClick){_this.allowSlideClick=false;}
if(params.autoplay){_this.stopAutoplay(true);}
if(!isTouchEvent||event.touches.length===1){if(!_this.isMoved){_this.callPlugins('onTouchMoveStart');if(params.loop){_this.fixLoop();_this.positions.start=_this.getWrapperTranslate();}
if(params.onTouchMoveStart)_this.fireCallback(params.onTouchMoveStart,_this);}
_this.isMoved=true;if(event.preventDefault)event.preventDefault();else event.returnValue=false;_this.touches.current=isH?pageX:pageY;_this.positions.current=(_this.touches.current-_this.touches.start)*params.touchRatio+_this.positions.start;if(_this.positions.current>0&&params.onResistanceBefore){_this.fireCallback(params.onResistanceBefore,_this,_this.positions.current);}
if(_this.positions.current<-maxWrapperPosition()&&params.onResistanceAfter){_this.fireCallback(params.onResistanceAfter,_this,Math.abs(_this.positions.current+maxWrapperPosition()));}
if(params.resistance&&params.resistance!=='100%'){var resistance;if(_this.positions.current>0){resistance=1-_this.positions.current/containerSize/2;if(resistance<0.5)
_this.positions.current=(containerSize/2);else
_this.positions.current=_this.positions.current*resistance;}
if(_this.positions.current<-maxWrapperPosition()){var diff=(_this.touches.current-_this.touches.start)*params.touchRatio+(maxWrapperPosition()+_this.positions.start);resistance=(containerSize+diff)/(containerSize);var newPos=_this.positions.current-diff*(1-resistance)/2;var stopPos=-maxWrapperPosition()-containerSize/2;if(newPos<stopPos||resistance<=0)
_this.positions.current=stopPos;else
_this.positions.current=newPos;}}
if(params.resistance&&params.resistance==='100%'){if(_this.positions.current>0&&!(params.freeMode&&!params.freeModeFluid)){_this.positions.current=0;}
if(_this.positions.current<-maxWrapperPosition()&&!(params.freeMode&&!params.freeModeFluid)){_this.positions.current=-maxWrapperPosition();}}
if(!params.followFinger)return;if(!params.moveStartThreshold){_this.setWrapperTranslate(_this.positions.current);}
else{if(Math.abs(_this.touches.current-_this.touches.start)>params.moveStartThreshold||allowThresholdMove){if(!allowThresholdMove){allowThresholdMove=true;_this.touches.start=_this.touches.current;return;}
_this.setWrapperTranslate(_this.positions.current);}
else{_this.positions.current=_this.positions.start;}}
if(params.freeMode||params.watchActiveIndex){_this.updateActiveSlide(_this.positions.current);}
if(params.grabCursor){_this.container.style.cursor='move';_this.container.style.cursor='grabbing';_this.container.style.cursor='-moz-grabbin';_this.container.style.cursor='-webkit-grabbing';}
if(!velocityPrevPosition)velocityPrevPosition=_this.touches.current;if(!velocityPrevTime)velocityPrevTime=(new Date()).getTime();_this.velocity=(_this.touches.current-velocityPrevPosition)/((new Date()).getTime()-velocityPrevTime)/2;if(Math.abs(_this.touches.current-velocityPrevPosition)<2)_this.velocity=0;velocityPrevPosition=_this.touches.current;velocityPrevTime=(new Date()).getTime();_this.callPlugins('onTouchMoveEnd');if(params.onTouchMove)_this.fireCallback(params.onTouchMove,_this,event);return false;}}
function onTouchEnd(event){if(isScrolling){_this.swipeReset();}
if(params.onlyExternal||!_this.isTouched)return;_this.isTouched=false;if(params.grabCursor){_this.container.style.cursor='move';_this.container.style.cursor='grab';_this.container.style.cursor='-moz-grab';_this.container.style.cursor='-webkit-grab';}
if(!_this.positions.current&&_this.positions.current!==0){_this.positions.current=_this.positions.start;}
if(params.followFinger){_this.setWrapperTranslate(_this.positions.current);}
_this.times.end=(new Date()).getTime();_this.touches.diff=_this.touches.current-_this.touches.start;_this.touches.abs=Math.abs(_this.touches.diff);_this.positions.diff=_this.positions.current-_this.positions.start;_this.positions.abs=Math.abs(_this.positions.diff);var diff=_this.positions.diff;var diffAbs=_this.positions.abs;var timeDiff=_this.times.end-_this.times.start;if(diffAbs<5&&(timeDiff)<300&&_this.allowLinks===false){if(!params.freeMode&&diffAbs!==0)_this.swipeReset();if(params.preventLinks){_this.allowLinks=true;}
if(params.onSlideClick){_this.allowSlideClick=true;}}
setTimeout(function(){if(params.preventLinks){_this.allowLinks=true;}
if(params.onSlideClick){_this.allowSlideClick=true;}},100);var maxPosition=maxWrapperPosition();if(!_this.isMoved&&params.freeMode){_this.isMoved=false;if(params.onTouchEnd)_this.fireCallback(params.onTouchEnd,_this,event);_this.callPlugins('onTouchEnd');return;}
if(!_this.isMoved||_this.positions.current>0||_this.positions.current<-maxPosition){_this.swipeReset();if(params.onTouchEnd)_this.fireCallback(params.onTouchEnd,_this,event);_this.callPlugins('onTouchEnd');return;}
_this.isMoved=false;if(params.freeMode){if(params.freeModeFluid){var momentumDuration=1000*params.momentumRatio;var momentumDistance=_this.velocity*momentumDuration;var newPosition=_this.positions.current+momentumDistance;var doBounce=false;var afterBouncePosition;var bounceAmount=Math.abs(_this.velocity)*20*params.momentumBounceRatio;if(newPosition<-maxPosition){if(params.momentumBounce&&_this.support.transitions){if(newPosition+maxPosition<-bounceAmount)newPosition=-maxPosition-bounceAmount;afterBouncePosition=-maxPosition;doBounce=true;allowMomentumBounce=true;}
else newPosition=-maxPosition;}
if(newPosition>0){if(params.momentumBounce&&_this.support.transitions){if(newPosition>bounceAmount)newPosition=bounceAmount;afterBouncePosition=0;doBounce=true;allowMomentumBounce=true;}
else newPosition=0;}
if(_this.velocity!==0)momentumDuration=Math.abs((newPosition-_this.positions.current)/_this.velocity);_this.setWrapperTranslate(newPosition);_this.setWrapperTransition(momentumDuration);if(params.momentumBounce&&doBounce){_this.wrapperTransitionEnd(function(){if(!allowMomentumBounce)return;if(params.onMomentumBounce)_this.fireCallback(params.onMomentumBounce,_this);_this.callPlugins('onMomentumBounce');_this.setWrapperTranslate(afterBouncePosition);_this.setWrapperTransition(300);});}
_this.updateActiveSlide(newPosition);}
if(!params.freeModeFluid||timeDiff>=300)_this.updateActiveSlide(_this.positions.current);if(params.onTouchEnd)_this.fireCallback(params.onTouchEnd,_this,event);_this.callPlugins('onTouchEnd');return;}
direction=diff<0?'toNext':'toPrev';if(direction==='toNext'&&(timeDiff<=300)){if(diffAbs<30||!params.shortSwipes)_this.swipeReset();else _this.swipeNext(true);}
if(direction==='toPrev'&&(timeDiff<=300)){if(diffAbs<30||!params.shortSwipes)_this.swipeReset();else _this.swipePrev(true);}
var targetSlideSize=0;if(params.slidesPerView==='auto'){var currentPosition=Math.abs(_this.getWrapperTranslate());var slidesOffset=0;var _slideSize;for(var i=0;i<_this.slides.length;i++){_slideSize=isH?_this.slides[i].getWidth(true,params.roundLengths):_this.slides[i].getHeight(true,params.roundLengths);slidesOffset+=_slideSize;if(slidesOffset>currentPosition){targetSlideSize=_slideSize;break;}}
if(targetSlideSize>containerSize)targetSlideSize=containerSize;}
else{targetSlideSize=slideSize*params.slidesPerView;}
if(direction==='toNext'&&(timeDiff>300)){if(diffAbs>=targetSlideSize*params.longSwipesRatio){_this.swipeNext(true);}
else{_this.swipeReset();}}
if(direction==='toPrev'&&(timeDiff>300)){if(diffAbs>=targetSlideSize*params.longSwipesRatio){_this.swipePrev(true);}
else{_this.swipeReset();}}
if(params.onTouchEnd)_this.fireCallback(params.onTouchEnd,_this,event);_this.callPlugins('onTouchEnd');}
function noSwipingSlide(el){var noSwiping=false;do{if(el.className.indexOf(params.noSwipingClass)>-1)
{noSwiping=true;}
el=el.parentElement;}while(!noSwiping&&el.parentElement&&el.className.indexOf(params.wrapperClass)===-1);if(!noSwiping&&el.className.indexOf(params.wrapperClass)>-1&&el.className.indexOf(params.noSwipingClass)>-1)
noSwiping=true;return noSwiping;}
function addClassToHtmlString(klass,outerHtml){var par=document.createElement('div');var child;par.innerHTML=outerHtml;child=par.firstChild;child.className+=' '+klass;return child.outerHTML;}
_this.swipeNext=function(internal){if(!internal&&params.loop)_this.fixLoop();if(!internal&&params.autoplay)_this.stopAutoplay(true);_this.callPlugins('onSwipeNext');var currentPosition=_this.getWrapperTranslate();var newPosition=currentPosition;if(params.slidesPerView==='auto'){for(var i=0;i<_this.snapGrid.length;i++){if(-currentPosition>=_this.snapGrid[i]&&-currentPosition<_this.snapGrid[i+1]){newPosition=-_this.snapGrid[i+1];break;}}}
else{var groupSize=slideSize*params.slidesPerGroup;newPosition=-(Math.floor(Math.abs(currentPosition)/Math.floor(groupSize))*groupSize+groupSize);}
if(newPosition<-maxWrapperPosition()){newPosition=-maxWrapperPosition();}
if(newPosition===currentPosition)return false;swipeToPosition(newPosition,'next');return true;};_this.swipePrev=function(internal){if(!internal&&params.loop)_this.fixLoop();if(!internal&&params.autoplay)_this.stopAutoplay(true);_this.callPlugins('onSwipePrev');var currentPosition=Math.ceil(_this.getWrapperTranslate());var newPosition;if(params.slidesPerView==='auto'){newPosition=0;for(var i=1;i<_this.snapGrid.length;i++){if(-currentPosition===_this.snapGrid[i]){newPosition=-_this.snapGrid[i-1];break;}
if(-currentPosition>_this.snapGrid[i]&&-currentPosition<_this.snapGrid[i+1]){newPosition=-_this.snapGrid[i];break;}}}
else{var groupSize=slideSize*params.slidesPerGroup;newPosition=-(Math.ceil(-currentPosition/groupSize)-1)*groupSize;}
if(newPosition>0)newPosition=0;if(newPosition===currentPosition)return false;swipeToPosition(newPosition,'prev');return true;};_this.swipeReset=function(){_this.callPlugins('onSwipeReset');var currentPosition=_this.getWrapperTranslate();var groupSize=slideSize*params.slidesPerGroup;var newPosition;var maxPosition=-maxWrapperPosition();if(params.slidesPerView==='auto'){newPosition=0;for(var i=0;i<_this.snapGrid.length;i++){if(-currentPosition===_this.snapGrid[i])return;if(-currentPosition>=_this.snapGrid[i]&&-currentPosition<_this.snapGrid[i+1]){if(_this.positions.diff>0)newPosition=-_this.snapGrid[i+1];else newPosition=-_this.snapGrid[i];break;}}
if(-currentPosition>=_this.snapGrid[_this.snapGrid.length-1])newPosition=-_this.snapGrid[_this.snapGrid.length-1];if(currentPosition<=-maxWrapperPosition())newPosition=-maxWrapperPosition();}
else{newPosition=currentPosition<0?Math.round(currentPosition/groupSize)*groupSize:0;}
if(params.scrollContainer){newPosition=currentPosition<0?currentPosition:0;}
if(newPosition<-maxWrapperPosition()){newPosition=-maxWrapperPosition();}
if(params.scrollContainer&&(containerSize>slideSize)){newPosition=0;}
if(newPosition===currentPosition)return false;swipeToPosition(newPosition,'reset');return true;};_this.swipeTo=function(index,speed,runCallbacks){index=parseInt(index,10);_this.callPlugins('onSwipeTo',{index:index,speed:speed});if(params.loop)index=index+_this.loopedSlides;var currentPosition=_this.getWrapperTranslate();if(index>(_this.slides.length-1)||index<0)return;var newPosition;if(params.slidesPerView==='auto'){newPosition=-_this.slidesGrid[index];}
else{newPosition=-index*slideSize;}
if(newPosition<-maxWrapperPosition()){newPosition=-maxWrapperPosition();}
if(newPosition===currentPosition)return false;runCallbacks=runCallbacks===false?false:true;swipeToPosition(newPosition,'to',{index:index,speed:speed,runCallbacks:runCallbacks});return true;};function swipeToPosition(newPosition,action,toOptions){var speed=(action==='to'&&toOptions.speed>=0)?toOptions.speed:params.speed;var timeOld=+new Date();function anim(){var timeNew=+new Date();var time=timeNew-timeOld;currentPosition+=animationStep*time/(1000/60);condition=direction==='toNext'?currentPosition>newPosition:currentPosition<newPosition;if(condition){_this.setWrapperTranslate(Math.round(currentPosition));_this._DOMAnimating=true;window.setTimeout(function(){anim();},1000/60);}
else{if(params.onSlideChangeEnd){if(action==='to'){if(toOptions.runCallbacks===true)_this.fireCallback(params.onSlideChangeEnd,_this);}
else{_this.fireCallback(params.onSlideChangeEnd,_this);}}
_this.setWrapperTranslate(newPosition);_this._DOMAnimating=false;}}
if(_this.support.transitions||!params.DOMAnimation){_this.setWrapperTranslate(newPosition);_this.setWrapperTransition(speed);}
else{var currentPosition=_this.getWrapperTranslate();var animationStep=Math.ceil((newPosition-currentPosition)/speed*(1000/60));var direction=currentPosition>newPosition?'toNext':'toPrev';var condition=direction==='toNext'?currentPosition>newPosition:currentPosition<newPosition;if(_this._DOMAnimating)return;anim();}
_this.updateActiveSlide(newPosition);if(params.onSlideNext&&action==='next'){_this.fireCallback(params.onSlideNext,_this,newPosition);}
if(params.onSlidePrev&&action==='prev'){_this.fireCallback(params.onSlidePrev,_this,newPosition);}
if(params.onSlideReset&&action==='reset'){_this.fireCallback(params.onSlideReset,_this,newPosition);}
if(action==='next'||action==='prev'||(action==='to'&&toOptions.runCallbacks===true))
slideChangeCallbacks(action);}
_this._queueStartCallbacks=false;_this._queueEndCallbacks=false;function slideChangeCallbacks(direction){_this.callPlugins('onSlideChangeStart');if(params.onSlideChangeStart){if(params.queueStartCallbacks&&_this.support.transitions){if(_this._queueStartCallbacks)return;_this._queueStartCallbacks=true;_this.fireCallback(params.onSlideChangeStart,_this,direction);_this.wrapperTransitionEnd(function(){_this._queueStartCallbacks=false;});}
else _this.fireCallback(params.onSlideChangeStart,_this,direction);}
if(params.onSlideChangeEnd){if(_this.support.transitions){if(params.queueEndCallbacks){if(_this._queueEndCallbacks)return;_this._queueEndCallbacks=true;_this.wrapperTransitionEnd(function(swiper){_this.fireCallback(params.onSlideChangeEnd,swiper,direction);});}
else{_this.wrapperTransitionEnd(function(swiper){_this.fireCallback(params.onSlideChangeEnd,swiper,direction);});}}
else{if(!params.DOMAnimation){setTimeout(function(){_this.fireCallback(params.onSlideChangeEnd,_this,direction);},10);}}}}
_this.updateActiveSlide=function(position){if(!_this.initialized)return;if(_this.slides.length===0)return;_this.previousIndex=_this.activeIndex;if(typeof position==='undefined')position=_this.getWrapperTranslate();if(position>0)position=0;var i;if(params.slidesPerView==='auto'){var slidesOffset=0;_this.activeIndex=_this.slidesGrid.indexOf(-position);if(_this.activeIndex<0){for(i=0;i<_this.slidesGrid.length-1;i++){if(-position>_this.slidesGrid[i]&&-position<_this.slidesGrid[i+1]){break;}}
var leftDistance=Math.abs(_this.slidesGrid[i]+position);var rightDistance=Math.abs(_this.slidesGrid[i+1]+position);if(leftDistance<=rightDistance)_this.activeIndex=i;else _this.activeIndex=i+1;}}
else{_this.activeIndex=Math[params.visibilityFullFit?'ceil':'round'](-position/slideSize);}
if(_this.activeIndex===_this.slides.length)_this.activeIndex=_this.slides.length-1;if(_this.activeIndex<0)_this.activeIndex=0;if(!_this.slides[_this.activeIndex])return;_this.calcVisibleSlides(position);if(_this.support.classList){var slide;for(i=0;i<_this.slides.length;i++){slide=_this.slides[i];slide.classList.remove(params.slideActiveClass);if(_this.visibleSlides.indexOf(slide)>=0){slide.classList.add(params.slideVisibleClass);}else{slide.classList.remove(params.slideVisibleClass);}}
_this.slides[_this.activeIndex].classList.add(params.slideActiveClass);}else{var activeClassRegexp=new RegExp('\\s*'+params.slideActiveClass);var inViewClassRegexp=new RegExp('\\s*'+params.slideVisibleClass);for(i=0;i<_this.slides.length;i++){_this.slides[i].className=_this.slides[i].className.replace(activeClassRegexp,'').replace(inViewClassRegexp,'');if(_this.visibleSlides.indexOf(_this.slides[i])>=0){_this.slides[i].className+=' '+params.slideVisibleClass;}}
_this.slides[_this.activeIndex].className+=' '+params.slideActiveClass;}
if(params.loop){var ls=_this.loopedSlides;_this.activeLoopIndex=_this.activeIndex-ls;if(_this.activeLoopIndex>=_this.slides.length-ls*2){_this.activeLoopIndex=_this.slides.length-ls*2-_this.activeLoopIndex;}
if(_this.activeLoopIndex<0){_this.activeLoopIndex=_this.slides.length-ls*2+_this.activeLoopIndex;}
if(_this.activeLoopIndex<0)_this.activeLoopIndex=0;}
else{_this.activeLoopIndex=_this.activeIndex;}
if(params.pagination){_this.updatePagination(position);}};_this.createPagination=function(firstInit){if(params.paginationClickable&&_this.paginationButtons){removePaginationEvents();}
_this.paginationContainer=params.pagination.nodeType?params.pagination:$$(params.pagination)[0];if(params.createPagination){var paginationHTML='';var numOfSlides=_this.slides.length;var numOfButtons=numOfSlides;if(params.loop)numOfButtons-=_this.loopedSlides*2;for(var i=0;i<numOfButtons;i++){paginationHTML+='<'+params.paginationElement+' class="'+params.paginationElementClass+'"></'+params.paginationElement+'>';}
_this.paginationContainer.innerHTML=paginationHTML;}
_this.paginationButtons=$$('.'+params.paginationElementClass,_this.paginationContainer);if(!firstInit)_this.updatePagination();_this.callPlugins('onCreatePagination');if(params.paginationClickable){addPaginationEvents();}};function removePaginationEvents(){var pagers=_this.paginationButtons;if(pagers){for(var i=0;i<pagers.length;i++){_this.h.removeEventListener(pagers[i],'click',paginationClick);}}}
function addPaginationEvents(){var pagers=_this.paginationButtons;if(pagers){for(var i=0;i<pagers.length;i++){_this.h.addEventListener(pagers[i],'click',paginationClick);}}}
function paginationClick(e){var index;var target=e.target||e.srcElement;var pagers=_this.paginationButtons;for(var i=0;i<pagers.length;i++){if(target===pagers[i])index=i;}
_this.swipeTo(index);}
_this.updatePagination=function(position){if(!params.pagination)return;if(_this.slides.length<1)return;var activePagers=$$('.'+params.paginationActiveClass,_this.paginationContainer);if(!activePagers)return;var pagers=_this.paginationButtons;if(pagers.length===0)return;for(var i=0;i<pagers.length;i++){pagers[i].className=params.paginationElementClass;}
var indexOffset=params.loop?_this.loopedSlides:0;if(params.paginationAsRange){if(!_this.visibleSlides)_this.calcVisibleSlides(position);var visibleIndexes=[];var j;for(j=0;j<_this.visibleSlides.length;j++){var visIndex=_this.slides.indexOf(_this.visibleSlides[j])-indexOffset;if(params.loop&&visIndex<0){visIndex=_this.slides.length-_this.loopedSlides*2+visIndex;}
if(params.loop&&visIndex>=_this.slides.length-_this.loopedSlides*2){visIndex=_this.slides.length-_this.loopedSlides*2-visIndex;visIndex=Math.abs(visIndex);}
visibleIndexes.push(visIndex);}
for(j=0;j<visibleIndexes.length;j++){if(pagers[visibleIndexes[j]])pagers[visibleIndexes[j]].className+=' '+params.paginationVisibleClass;}
if(params.loop){if(pagers[_this.activeLoopIndex]!==undefined){pagers[_this.activeLoopIndex].className+=' '+params.paginationActiveClass;}}
else{pagers[_this.activeIndex].className+=' '+params.paginationActiveClass;}}
else{if(params.loop){if(pagers[_this.activeLoopIndex])pagers[_this.activeLoopIndex].className+=' '+params.paginationActiveClass+' '+params.paginationVisibleClass;}
else{pagers[_this.activeIndex].className+=' '+params.paginationActiveClass+' '+params.paginationVisibleClass;}}};_this.calcVisibleSlides=function(position){var visibleSlides=[];var _slideLeft=0,_slideSize=0,_slideRight=0;if(isH&&_this.wrapperLeft>0)position=position+_this.wrapperLeft;if(!isH&&_this.wrapperTop>0)position=position+_this.wrapperTop;for(var i=0;i<_this.slides.length;i++){_slideLeft+=_slideSize;if(params.slidesPerView==='auto')
_slideSize=isH?_this.h.getWidth(_this.slides[i],true,params.roundLengths):_this.h.getHeight(_this.slides[i],true,params.roundLengths);else _slideSize=slideSize;_slideRight=_slideLeft+_slideSize;var isVisibile=false;if(params.visibilityFullFit){if(_slideLeft>=-position&&_slideRight<=-position+containerSize)isVisibile=true;if(_slideLeft<=-position&&_slideRight>=-position+containerSize)isVisibile=true;}
else{if(_slideRight>-position&&_slideRight<=((-position+containerSize)))isVisibile=true;if(_slideLeft>=-position&&_slideLeft<((-position+containerSize)))isVisibile=true;if(_slideLeft<-position&&_slideRight>((-position+containerSize)))isVisibile=true;}
if(isVisibile)visibleSlides.push(_this.slides[i]);}
if(visibleSlides.length===0)visibleSlides=[_this.slides[_this.activeIndex]];_this.visibleSlides=visibleSlides;};var autoplayTimeoutId,autoplayIntervalId;_this.startAutoplay=function(){if(_this.support.transitions){if(typeof autoplayTimeoutId!=='undefined')return false;if(!params.autoplay)return;_this.callPlugins('onAutoplayStart');if(params.onAutoplayStart)_this.fireCallback(params.onAutoplayStart,_this);autoplay();}
else{if(typeof autoplayIntervalId!=='undefined')return false;if(!params.autoplay)return;_this.callPlugins('onAutoplayStart');if(params.onAutoplayStart)_this.fireCallback(params.onAutoplayStart,_this);autoplayIntervalId=setInterval(function(){if(params.loop){_this.fixLoop();_this.swipeNext(true);}
else if(!_this.swipeNext(true)){if(!params.autoplayStopOnLast)_this.swipeTo(0);else{clearInterval(autoplayIntervalId);autoplayIntervalId=undefined;}}},params.autoplay);}};_this.stopAutoplay=function(internal){if(_this.support.transitions){if(!autoplayTimeoutId)return;if(autoplayTimeoutId)clearTimeout(autoplayTimeoutId);autoplayTimeoutId=undefined;if(internal&&!params.autoplayDisableOnInteraction){_this.wrapperTransitionEnd(function(){autoplay();});}
_this.callPlugins('onAutoplayStop');if(params.onAutoplayStop)_this.fireCallback(params.onAutoplayStop,_this);}
else{if(autoplayIntervalId)clearInterval(autoplayIntervalId);autoplayIntervalId=undefined;_this.callPlugins('onAutoplayStop');if(params.onAutoplayStop)_this.fireCallback(params.onAutoplayStop,_this);}};function autoplay(){autoplayTimeoutId=setTimeout(function(){if(params.loop){_this.fixLoop();_this.swipeNext(true);}
else if(!_this.swipeNext(true)){if(!params.autoplayStopOnLast)_this.swipeTo(0);else{clearTimeout(autoplayTimeoutId);autoplayTimeoutId=undefined;}}
_this.wrapperTransitionEnd(function(){if(typeof autoplayTimeoutId!=='undefined')autoplay();});},params.autoplay);}
_this.loopCreated=false;_this.removeLoopedSlides=function(){if(_this.loopCreated){for(var i=0;i<_this.slides.length;i++){if(_this.slides[i].getData('looped')===true)_this.wrapper.removeChild(_this.slides[i]);}}};_this.createLoop=function(){if(_this.slides.length===0)return;if(params.slidesPerView==='auto'){_this.loopedSlides=params.loopedSlides||1;}
else{_this.loopedSlides=params.slidesPerView+params.loopAdditionalSlides;}
if(_this.loopedSlides>_this.slides.length){_this.loopedSlides=_this.slides.length;}
var slideFirstHTML='',slideLastHTML='',i;var slidesSetFullHTML='';var numSlides=_this.slides.length;var fullSlideSets=Math.floor(_this.loopedSlides/numSlides);var remainderSlides=_this.loopedSlides%numSlides;for(i=0;i<(fullSlideSets*numSlides);i++){var j=i;if(i>=numSlides){var over=Math.floor(i/numSlides);j=i-(numSlides*over);}
slidesSetFullHTML+=_this.slides[j].outerHTML;}
for(i=0;i<remainderSlides;i++){slideLastHTML+=addClassToHtmlString(params.slideDuplicateClass,_this.slides[i].outerHTML);}
for(i=numSlides-remainderSlides;i<numSlides;i++){slideFirstHTML+=addClassToHtmlString(params.slideDuplicateClass,_this.slides[i].outerHTML);}
var slides=slideFirstHTML+slidesSetFullHTML+wrapper.innerHTML+slidesSetFullHTML+slideLastHTML;wrapper.innerHTML=slides;_this.loopCreated=true;_this.calcSlides();for(i=0;i<_this.slides.length;i++){if(i<_this.loopedSlides||i>=_this.slides.length-_this.loopedSlides)_this.slides[i].setData('looped',true);}
_this.callPlugins('onCreateLoop');};_this.fixLoop=function(){var newIndex;if(_this.activeIndex<_this.loopedSlides){newIndex=_this.slides.length-_this.loopedSlides*3+_this.activeIndex;_this.swipeTo(newIndex,0,false);}
else if((params.slidesPerView==='auto'&&_this.activeIndex>=_this.loopedSlides*2)||(_this.activeIndex>_this.slides.length-params.slidesPerView*2)){newIndex=-_this.slides.length+_this.activeIndex+_this.loopedSlides;_this.swipeTo(newIndex,0,false);}};_this.loadSlides=function(){var slidesHTML='';_this.activeLoaderIndex=0;var slides=params.loader.slides;var slidesToLoad=params.loader.loadAllSlides?slides.length:params.slidesPerView*(1+params.loader.surroundGroups);for(var i=0;i<slidesToLoad;i++){if(params.loader.slidesHTMLType==='outer')slidesHTML+=slides[i];else{slidesHTML+='<'+params.slideElement+' class="'+params.slideClass+'" data-swiperindex="'+i+'">'+slides[i]+'</'+params.slideElement+'>';}}
_this.wrapper.innerHTML=slidesHTML;_this.calcSlides(true);if(!params.loader.loadAllSlides){_this.wrapperTransitionEnd(_this.reloadSlides,true);}};_this.reloadSlides=function(){var slides=params.loader.slides;var newActiveIndex=parseInt(_this.activeSlide().data('swiperindex'),10);if(newActiveIndex<0||newActiveIndex>slides.length-1)return;_this.activeLoaderIndex=newActiveIndex;var firstIndex=Math.max(0,newActiveIndex-params.slidesPerView*params.loader.surroundGroups);var lastIndex=Math.min(newActiveIndex+params.slidesPerView*(1+params.loader.surroundGroups)-1,slides.length-1);if(newActiveIndex>0){var newTransform=-slideSize*(newActiveIndex-firstIndex);_this.setWrapperTranslate(newTransform);_this.setWrapperTransition(0);}
var i;if(params.loader.logic==='reload'){_this.wrapper.innerHTML='';var slidesHTML='';for(i=firstIndex;i<=lastIndex;i++){slidesHTML+=params.loader.slidesHTMLType==='outer'?slides[i]:'<'+params.slideElement+' class="'+params.slideClass+'" data-swiperindex="'+i+'">'+slides[i]+'</'+params.slideElement+'>';}
_this.wrapper.innerHTML=slidesHTML;}
else{var minExistIndex=1000;var maxExistIndex=0;for(i=0;i<_this.slides.length;i++){var index=_this.slides[i].data('swiperindex');if(index<firstIndex||index>lastIndex){_this.wrapper.removeChild(_this.slides[i]);}
else{minExistIndex=Math.min(index,minExistIndex);maxExistIndex=Math.max(index,maxExistIndex);}}
for(i=firstIndex;i<=lastIndex;i++){var newSlide;if(i<minExistIndex){newSlide=document.createElement(params.slideElement);newSlide.className=params.slideClass;newSlide.setAttribute('data-swiperindex',i);newSlide.innerHTML=slides[i];_this.wrapper.insertBefore(newSlide,_this.wrapper.firstChild);}
if(i>maxExistIndex){newSlide=document.createElement(params.slideElement);newSlide.className=params.slideClass;newSlide.setAttribute('data-swiperindex',i);newSlide.innerHTML=slides[i];_this.wrapper.appendChild(newSlide);}}}
_this.reInit(true);};function makeSwiper(){_this.calcSlides();if(params.loader.slides.length>0&&_this.slides.length===0){_this.loadSlides();}
if(params.loop){_this.createLoop();}
_this.init();initEvents();if(params.pagination){_this.createPagination(true);}
if(params.loop||params.initialSlide>0){_this.swipeTo(params.initialSlide,0,false);}
else{_this.updateActiveSlide(0);}
if(params.autoplay){_this.startAutoplay();}
_this.centerIndex=_this.activeIndex;if(params.onSwiperCreated)_this.fireCallback(params.onSwiperCreated,_this);_this.callPlugins('onSwiperCreated');}
makeSwiper();};Swiper.prototype={plugins:{},wrapperTransitionEnd:function(callback,permanent){'use strict';var a=this,el=a.wrapper,events=['webkitTransitionEnd','transitionend','oTransitionEnd','MSTransitionEnd','msTransitionEnd'],i;function fireCallBack(){callback(a);if(a.params.queueEndCallbacks)a._queueEndCallbacks=false;if(!permanent){for(i=0;i<events.length;i++){a.h.removeEventListener(el,events[i],fireCallBack);}}}
if(callback){for(i=0;i<events.length;i++){a.h.addEventListener(el,events[i],fireCallBack);}}},getWrapperTranslate:function(axis){'use strict';var el=this.wrapper,matrix,curTransform,curStyle,transformMatrix;if(typeof axis==='undefined'){axis=this.params.mode==='horizontal'?'x':'y';}
if(this.support.transforms&&this.params.useCSS3Transforms){curStyle=window.getComputedStyle(el,null);if(window.WebKitCSSMatrix){transformMatrix=new WebKitCSSMatrix(curStyle.webkitTransform==='none'?'':curStyle.webkitTransform);}
else{transformMatrix=curStyle.MozTransform||curStyle.OTransform||curStyle.MsTransform||curStyle.msTransform||curStyle.transform||curStyle.getPropertyValue('transform').replace('translate(','matrix(1, 0, 0, 1,');matrix=transformMatrix.toString().split(',');}
if(axis==='x'){if(window.WebKitCSSMatrix)
curTransform=transformMatrix.m41;else if(matrix.length===16)
curTransform=parseFloat(matrix[12]);else
curTransform=parseFloat(matrix[4]);}
if(axis==='y'){if(window.WebKitCSSMatrix)
curTransform=transformMatrix.m42;else if(matrix.length===16)
curTransform=parseFloat(matrix[13]);else
curTransform=parseFloat(matrix[5]);}}
else{if(axis==='x')curTransform=parseFloat(el.style.left,10)||0;if(axis==='y')curTransform=parseFloat(el.style.top,10)||0;}
return curTransform||0;},setWrapperTranslate:function(x,y,z){'use strict';var es=this.wrapper.style,coords={x:0,y:0,z:0},translate;if(arguments.length===3){coords.x=x;coords.y=y;coords.z=z;}
else{if(typeof y==='undefined'){y=this.params.mode==='horizontal'?'x':'y';}
coords[y]=x;}
if(this.support.transforms&&this.params.useCSS3Transforms){translate=this.support.transforms3d?'translate3d('+coords.x+'px, '+coords.y+'px, '+coords.z+'px)':'translate('+coords.x+'px, '+coords.y+'px)';es.webkitTransform=es.MsTransform=es.msTransform=es.MozTransform=es.OTransform=es.transform=translate;}
else{es.left=coords.x+'px';es.top=coords.y+'px';}
this.callPlugins('onSetWrapperTransform',coords);if(this.params.onSetWrapperTransform)this.fireCallback(this.params.onSetWrapperTransform,this,coords);},setWrapperTransition:function(duration){'use strict';var es=this.wrapper.style;es.webkitTransitionDuration=es.MsTransitionDuration=es.msTransitionDuration=es.MozTransitionDuration=es.OTransitionDuration=es.transitionDuration=(duration/1000)+'s';this.callPlugins('onSetWrapperTransition',{duration:duration});if(this.params.onSetWrapperTransition)this.fireCallback(this.params.onSetWrapperTransition,this,duration);},h:{getWidth:function(el,outer,round){'use strict';var width=window.getComputedStyle(el,null).getPropertyValue('width');var returnWidth=parseFloat(width);if(isNaN(returnWidth)||width.indexOf('%')>0){returnWidth=el.offsetWidth-parseFloat(window.getComputedStyle(el,null).getPropertyValue('padding-left'))-parseFloat(window.getComputedStyle(el,null).getPropertyValue('padding-right'));}
if(outer)returnWidth+=parseFloat(window.getComputedStyle(el,null).getPropertyValue('padding-left'))+parseFloat(window.getComputedStyle(el,null).getPropertyValue('padding-right'));if(round)return Math.round(returnWidth);else return returnWidth;},getHeight:function(el,outer,round){'use strict';if(outer)return el.offsetHeight;var height=window.getComputedStyle(el,null).getPropertyValue('height');var returnHeight=parseFloat(height);if(isNaN(returnHeight)||height.indexOf('%')>0){returnHeight=el.offsetHeight-parseFloat(window.getComputedStyle(el,null).getPropertyValue('padding-top'))-parseFloat(window.getComputedStyle(el,null).getPropertyValue('padding-bottom'));}
if(outer)returnHeight+=parseFloat(window.getComputedStyle(el,null).getPropertyValue('padding-top'))+parseFloat(window.getComputedStyle(el,null).getPropertyValue('padding-bottom'));if(round)return Math.round(returnHeight);else return returnHeight;},getOffset:function(el){'use strict';var box=el.getBoundingClientRect();var body=document.body;var clientTop=el.clientTop||body.clientTop||0;var clientLeft=el.clientLeft||body.clientLeft||0;var scrollTop=window.pageYOffset||el.scrollTop;var scrollLeft=window.pageXOffset||el.scrollLeft;if(document.documentElement&&!window.pageYOffset){scrollTop=document.documentElement.scrollTop;scrollLeft=document.documentElement.scrollLeft;}
return{top:box.top+scrollTop-clientTop,left:box.left+scrollLeft-clientLeft};},windowWidth:function(){'use strict';if(window.innerWidth)return window.innerWidth;else if(document.documentElement&&document.documentElement.clientWidth)return document.documentElement.clientWidth;},windowHeight:function(){'use strict';if(window.innerHeight)return window.innerHeight;else if(document.documentElement&&document.documentElement.clientHeight)return document.documentElement.clientHeight;},windowScroll:function(){'use strict';if(typeof pageYOffset!=='undefined'){return{left:window.pageXOffset,top:window.pageYOffset};}
else if(document.documentElement){return{left:document.documentElement.scrollLeft,top:document.documentElement.scrollTop};}},addEventListener:function(el,event,listener,useCapture){'use strict';if(typeof useCapture==='undefined'){useCapture=false;}
if(el.addEventListener){el.addEventListener(event,listener,useCapture);}
else if(el.attachEvent){el.attachEvent('on'+event,listener);}},removeEventListener:function(el,event,listener,useCapture){'use strict';if(typeof useCapture==='undefined'){useCapture=false;}
if(el.removeEventListener){el.removeEventListener(event,listener,useCapture);}
else if(el.detachEvent){el.detachEvent('on'+event,listener);}}},setTransform:function(el,transform){'use strict';var es=el.style;es.webkitTransform=es.MsTransform=es.msTransform=es.MozTransform=es.OTransform=es.transform=transform;},setTranslate:function(el,translate){'use strict';var es=el.style;var pos={x:translate.x||0,y:translate.y||0,z:translate.z||0};var transformString=this.support.transforms3d?'translate3d('+(pos.x)+'px,'+(pos.y)+'px,'+(pos.z)+'px)':'translate('+(pos.x)+'px,'+(pos.y)+'px)';es.webkitTransform=es.MsTransform=es.msTransform=es.MozTransform=es.OTransform=es.transform=transformString;if(!this.support.transforms){es.left=pos.x+'px';es.top=pos.y+'px';}},setTransition:function(el,duration){'use strict';var es=el.style;es.webkitTransitionDuration=es.MsTransitionDuration=es.msTransitionDuration=es.MozTransitionDuration=es.OTransitionDuration=es.transitionDuration=duration+'ms';},support:{touch:(window.Modernizr&&Modernizr.touch===true)||(function(){'use strict';return!!(('ontouchstart'in window)||window.DocumentTouch&&document instanceof DocumentTouch);})(),transforms3d:(window.Modernizr&&Modernizr.csstransforms3d===true)||(function(){'use strict';var div=document.createElement('div').style;return('webkitPerspective'in div||'MozPerspective'in div||'OPerspective'in div||'MsPerspective'in div||'perspective'in div);})(),transforms:(window.Modernizr&&Modernizr.csstransforms===true)||(function(){'use strict';var div=document.createElement('div').style;return('transform'in div||'WebkitTransform'in div||'MozTransform'in div||'msTransform'in div||'MsTransform'in div||'OTransform'in div);})(),transitions:(window.Modernizr&&Modernizr.csstransitions===true)||(function(){'use strict';var div=document.createElement('div').style;return('transition'in div||'WebkitTransition'in div||'MozTransition'in div||'msTransition'in div||'MsTransition'in div||'OTransition'in div);})(),classList:(function(){'use strict';var div=document.createElement('div').style;return'classList'in div;})()},browser:{ie8:(function(){'use strict';var rv=-1;if(navigator.appName==='Microsoft Internet Explorer'){var ua=navigator.userAgent;var re=new RegExp(/MSIE ([0-9]{1,}[\.0-9]{0,})/);if(re.exec(ua)!==null)
rv=parseFloat(RegExp.$1);}
return rv!==-1&&rv<9;})(),ie10:window.navigator.msPointerEnabled,ie11:window.navigator.pointerEnabled}};if(window.jQuery||window.Zepto){(function($){'use strict';$.fn.swiper=function(params){var s=new Swiper($(this)[0],params);$(this).data('swiper',s);return s;};})(window.jQuery||window.Zepto);}
if(typeof(module)!=='undefined')
{module.exports=Swiper;}
if(typeof define==='function'&&define.amd){define([],function(){'use strict';return Swiper;});};;

(function(window,undefined){'use strict';hgm.photo={galleryTemplate:null,galleries:[]};var DEFAULT_OPTIONS={showActiveCount:false,dynamicHeight:false,navClass:null,onSlideClick:null,onSlideChangeStart:null,onSlideChangeEnd:null,onSwiperCreated:null,showDescription:false,showSlideShow:false,loop:true,showViewOptions:false};hgm.photo.Gallery=Class.extend({$container:null,$swiperContainer:null,swiper:null,initialized:null,overlayTimeout:0,slideCount:0,options:null,leftNavButton:null,rightNavButton:null,isPlaying:false,$playButton:null,$slideshowCollection:null,init:function(model,$container,options){if(!hgm.photo.galleryTemplate){hgm.photo.galleryTemplate=new EJS({element:'hgm_photo_GalleryTemplate'});}
this.$container=$container;this.options=$.extend({},DEFAULT_OPTIONS,options);this.initialized=$.Deferred();$.when(model).then(this.initContainer.bind(this));},show:function(){this.initialized.done(function(model){this.$container.show();$('body').addClass('noscroll');this.jumpToImageFromHashParam(model);}.bind(this));return this;},jumpToImageFromHashParam:function(model){var id=hgm.getHashParam('image')||hgm.getHashParam();if(id){model.forEach(function(image,index){if(image.id==id){$(function(){this.swipeTo(index);}.bind(this));return false;}}.bind(this));}},swipeTo:function(index){this.initialized.done(function(){this.swiper.swipeTo(index);}.bind(this));},slideNext:function(){this.initialized.done(function(){this.$container.find('.swiper-wrapper').addClass('swiper-no-swiping');this.swiper.swipeNext();}.bind(this));},slidePrevious:function(){this.initialized.done(function(){this.$container.find('.swiper-wrapper').addClass('swiper-no-swiping');this.swiper.swipePrev();}.bind(this));},slideshow:function(event){var $playButton=event.target?$(event.target):null;if($playButton&&$playButton.hasClass('playing')){$playButton.removeClass('playing');this.stopAutoplay();}else{$playButton.addClass('playing');this.startAutoplay();}},startAutoPlay:function(){this.initialized.done(function(){this.swiper.startAutoplay();}.bind(this));},stopAutoPlay:function(){this.initialized.done(function(){this.$slideshowCollection.show();this.$playButton.removeClass('playing');this.isPlaying=false;this.swiper.stopAutoplay();}.bind(this));},getActiveSlide:function(){if(this.swiper){return $(this.swiper.activeSlide);}
else{return null;}},removeSlide:function(index){this.swiper.removeSlide(index);this.slideCount--;if(this.options.showActiveCount===true){this.$container.parent().find('.swiper-count').remove();this.$container.after(this.galleryCounter());}},initContainer:function(model){if(model&&model.length){this.render(model);this.initSwiper();$('.modalToolTip').show().delay(1500).fadeOut(1000);this.initialized.resolve(model);}
else{this.initialized.reject();}},render:function(model){this.$container.addClass('loaded');this.$container.html(hgm.photo.galleryTemplate.render({gallery:model,showDescription:this.options.showDescription}));this.$swiperContainer=this.$container.find('.swiper-container');},initSwiper:function(){this.swiper=this.$swiperContainer.swiper({speed:500,mode:'horizontal',loop:this.options.loop,sliderPerView:1,queueStartCallbacks:false,queueEndCallbacks:true,calculateHeight:false,useCSS3Transforms:false,mousewheelControl:false,noSwiping:true,hashNav:false,onSwiperCreated:this.onSwiperCreated.bind(this),onSlideChangeStart:this.onSlideChangeStart.bind(this),onSlideChangeEnd:this.onSlideChangeEnd.bind(this),onSlideClick:this.onSlideClick.bind(this),onTouchStart:this.onTouchStart.bind(this)});},onTouchStart:function(){hgm.debug('playing? : ',this.isPlaying);this.stopAutoPlay();},onSwiperCreated:function(swiper,event){var $leftNavButton=this.$container.find('.gallery-nav.left'),$rightNavButton=this.$container.find('.gallery-nav.right');$leftNavButton.click(this.slidePrevious.bind(this));$rightNavButton.click(this.slideNext.bind(this));this.swiper=swiper;this.preloadSlides(false);this.slideCount=this.getSlideCount();swiper.params.autoplay=5000;if(this.options.showActiveCount===true){this.$container.after(this.galleryCounter());}
if(this.options.showViewOptions===true){this.addViewOptions();}
if(this.options.navClass!==null){this.setNavCss();}
this.triggerEventCallback('onSwiperCreated',swiper,event);if(this.options.showSlideShow){this.$container.after(this.slideShowButton);this.slideShowBinds();}},onSlideChangeStart:function(swiper,event){this.updateActiveIdx();this.preloadSlides();if(this.options.dynamicHeight===true){this.dynamicContainerHeight();}
this.triggerEventCallback('onSlideChangeStart',swiper,event);},onSlideChangeEnd:function(swiper,event){this.$container.find('.swiper-wrapper').removeClass('swiper-no-swiping');this.triggerEventCallback('onSlideChangeEnd',swiper,event);},onSlideClick:function(swiper,event){if(!this.handleNextPrevClick(event)){this.triggerEventCallback('onSlideClick',swiper,event);}},triggerEventCallback:function(name,swiper,event){if(this.options[name]){this.options[name](swiper,event);}},handleNextPrevClick:function(event){var x=(event.offsetX===undefined)?event.layerX:event.offsetX,y=(event.offsetY===undefined)?event.layerY:event.offsetY;if(!this.leftNavButton||!this.rightNavButton){this.cacheNavButtonCoords();$(window).bind('orientationchange',this.cacheNavButtonCoords.bind(this));}
if(x>=this.leftNavButton.left&&x<this.leftNavButton.left+this.leftNavButton.width){if(y>=this.leftNavButton.top&&y<this.leftNavButton.top+this.leftNavButton.height){this.slidePrevious();return true;}}
if(x>=this.rightNavButton.left&&x<this.rightNavButton.left+this.rightNavButton.width){if(y>=this.rightNavButton.top&&y<this.rightNavButton.top+this.rightNavButton.height){this.slideNext();return true;}}
return false;},cacheNavButtonCoords:function(){var $leftNavButton=this.$container.find('.gallery-nav.left'),$rightNavButton=this.$container.find('.gallery-nav.right');this.leftNavButton=$leftNavButton.position();this.leftNavButton.top+=parseInt($leftNavButton.css('marginTop'),10);this.leftNavButton.width=$leftNavButton.width();this.leftNavButton.height=$leftNavButton.height();this.rightNavButton=$rightNavButton.position();this.rightNavButton.top+=parseInt($rightNavButton.css('marginTop'),10);this.rightNavButton.width=$rightNavButton.width();this.rightNavButton.height=$rightNavButton.height();},getImageSize:function(){var screenWidth=this.$container.width();if(screenWidth>1024){return'huge';}
else if(screenWidth>=640){return'large';}
else if(screenWidth>320){return'medium';}
else{return'small';}},preloadSlides:function(visibleOnly){visibleOnly=visibleOnly===undefined?true:!!visibleOnly;var current=this.swiper.activeIndex?this.swiper.activeIndex+1:1,indexes=[current-1,current,current+1],size=this.getImageSize();indexes.forEach(function(index){var selector='.swiper-slide:nth-child('+index+') .image',$element=this.$container.find(selector),imageChoice=$element.attr('data-image-'+size);$element.css({'background-image':'url('+imageChoice+')'});}.bind(this));},updateActiveIdx:function(){this.$container.parent().find('.active-slide').html(this.swiper.activeLoopIndex+1);},getSlideCount:function(){return this.swiper.slides.length-2*(this.swiper.loopedSlides||0);},setSlideCount:function(count){this.slideCount=count;},galleryCounter:function(){var $countContainer=$('<div class="swiper-count"></div>'),$fullscreenLink=$('<a class="fullscreen-link ui-link">Fullscreen</a>');$countContainer.html('Image <span class="active-slide">1</span> / '+' <span>'+this.slideCount+'</span> ');if(hgm.isMobileDevice()){$fullscreenLink.attr('href',this.$container.data('url'));$countContainer.append($fullscreenLink);}
return $countContainer;},addViewOptions:function(){var $viewOptions=$('<div class="view-options"></div>'),activeView=this.$container.data('view-type'),optionsHtml='';this.initialized.done(function(model){if(window.hasExterior){optionsHtml+='<a href="#" class="show-ext'+(activeView==60000?' selected':'')+'" data-view-type="60000">Exterior</a>';}
if(window.hasInterior){optionsHtml+='<a href="#" class="show-int'+(activeView==60001?' selected':'')+'" data-view-type="60001">Interior</a>';}
if(typeof window.hasExterior==='undefined'||typeof window.hasInterior==='undefined'){$.each(model,function(index,image){if(!window.hasExterior&&image.isExt){window.hasExterior=true;optionsHtml+='<a href="#" class="show-ext'+(activeView==60000?' selected':'')+'" data-view-type="60000">Exterior</a>';}
if(!window.hasInterior&&image.isInt){window.hasInterior=true;optionsHtml+='<a href="#" class="show-int'+(activeView==60001?' selected':'')+'" data-view-type="60001">Interior</a>';}
if(window.hasExterior&&window.hasInterior){return false;}});}
if(optionsHtml.length!==0){optionsHtml='<a href="#" class="show-all'+(activeView?'':' selected')+'" data-view-type="">All</a>'+
optionsHtml;}
$viewOptions.html(optionsHtml);this.$container.after($viewOptions);this.bindSortEvents();}.bind(this));},slideShowButton:function(){return $('<div class="play-slideshow">'+'<div class="play"><div class="icon"></div> Slideshow</div>'+'<div class="pause"><div class="icon"></div> Slideshow</div>'+'</div>');},slideShowBinds:function(){this.$playButton=this.$container.parent().find('.play-slideshow');this.$slideshowCollection=this.$container.parent().find('.gallery-nav, .swiper-count');this.$playButton.click(function(){if(this.$playButton.hasClass('playing')){this.$slideshowCollection.show();this.stopAutoPlay();this.$playButton.removeClass('playing');this.isPlaying=false;}
else{this.$slideshowCollection.hide();this.slideNext();this.startAutoPlay();this.$playButton.addClass('playing');this.isPlaying=true;}}.bind(this));},dynamicContainerHeight:function(){var $currImg=$(this.swiper.activeSlide()),imgHeight=$currImg.find('.image').data('height');$currImg.height(imgHeight);this.$container.animate({height:imgHeight},'fast');},setNavCss:function(){var classLeft,classRight;if(typeof this.options.navClass==='object'){classLeft=this.options.navClass.classLeft;classRight=this.options.navClass.classRight;this.$container.find('.gallery-nav.left').addClass(classLeft);this.$container.find('.gallery-nav.right').addClass(classRight);}
else{this.$container.find('.gallery-nav').addClass(this.options.navClass);}},bindSortEvents:function(){var vhcData=this.$container.data('yrmd-json'),viewTypes={60000:'exterior',60001:'interior'};$('.view-options a').bind('click',function(e){e.preventDefault();var view=$(this).data('view-type');vhcData=$.extend(vhcData,{viewType:view,height:'350px'});if($('.swipe-gallery-ajax').length){$('.swipe-gallery-ajax').load('/blocks/year-model-gallery/index/',vhcData);}
else{$('.swipe-gallery').empty().addClass('swipe-gallery-ajax').removeClass('swipe-gallery').load('/blocks/year-model-gallery/index/',vhcData);}
hgm.trackEvent('Gallery','view switch',view?viewTypes[view]:'all');});}});}(window));;;

(function(){'use strict';var DEFAULT_OPTIONS={onSlideClick:null};hgm.photo.Thumbnails=Class.extend({model:null,$thumbnailsContainer:null,swiper:null,gallery:null,options:null,removedSlides:[],initialized:null,init:function(model,$thumbnailsContainer,options,gallery){this.options=$.extend({},DEFAULT_OPTIONS,options);this.initialized=$.Deferred();this.$thumbnailsContainer=$thumbnailsContainer;this.$thumbnailsContainer.find('img.fitfill').imgFitFill({mode:'fill'});this.gallery=gallery;if(model&&!$thumbnailsContainer.data('skip-thumbnails')){$.when(model).then(function(data){var $thumbsWrapper=this.$thumbnailsContainer.find('.thumbs-wrapper');this.hideLoadingSpinner();$.each(data,function(idx,elem){var $img=$('<img/>').attr('src',elem.images.thumb.url),$slide=$('<div/>').addClass('thumbs-slide').addClass(idx===0?'thumb-active':'').data('index',idx).append($img);$thumbsWrapper.append($slide);}.bind(this));this.initThumbSwiper();this.bindEvents();}.bind(this));}
else{this.initThumbSwiper();this.bindEvents();this.hideLoadingSpinner();}},hideLoadingSpinner:function(){this.$thumbnailsContainer.parent().find('.thumbs-container').css({'background':'none'});},initThumbSwiper:function(){this.swiper=this.$thumbnailsContainer.find('.thumbs-container').swiper({speed:200,wrapperClass:'thumbs-wrapper',slideClass:'thumbs-slide',freeMode:true,freeModeFluid:true,slidesPerView:'auto',visibilityFullFit:true,onSlideClick:this.options.onSlideClick});this.initialized.resolve();this.removedSlides=[];},bindEvents:function(){this.$thumbnailsContainer.find('.thumbs-nav-left').click(function(){this.swiper.swipePrev();}.bind(this));this.$thumbnailsContainer.find('.thumbs-nav-right').click(function(){this.swiper.swipeNext();}.bind(this));this.$thumbnailsContainer.find('.thumbs-slide a').click(function(event){event.preventDefault();});this.$thumbnailsContainer.find('.thumbs-slide img').on('error',function(event){var thumbnailIndex=$(event.target).parent().data('index'),currentIndex=thumbnailIndex;$.each(this.removedSlides,function(arrayIndex,deletedIndex){if(deletedIndex<thumbnailIndex)currentIndex--;});this.swiper.removeSlide(currentIndex);if(typeof this.gallery!='undefined'&&this.gallery){this.gallery.removeSlide(currentIndex);}
this.removedSlides.push(thumbnailIndex);}.bind(this));},swipeTo:function(index){this.initialized.done(function(){var $allThumbnails=this.$thumbnailsContainer.find('.thumbs-slide'),$thisThumbnail=$($allThumbnails.get(index));if(!$thisThumbnail.hasClass('swiper-slide-visible')){this.swiper.swipeTo(index);}
$allThumbnails.removeClass('thumb-active');$thisThumbnail.addClass('thumb-active');}.bind(this));}});}());;;

(function(){'use strict';hgm.photo.AdGallery=Class.extend({lastAdRefreshTime:0,MIN_TIME_TO_AD_REFRESH:1,refreshAds:function(){var time=Date.now();hgm.debug('Time since last Refresh',(time-this.lastAdRefreshTime)/1000);if(!this.lastAdRefreshTime||(time-this.lastAdRefreshTime)/1000>this.MIN_TIME_TO_AD_REFRESH){this.lastAdRefreshTime=time;var $ad=$('#ad-1,#ad-2');$ad.data('page-url',this.$galleryContainer.data('url'));$ad.data('ad-zone',this.$galleryContainer.data('zone'));$ad.adsRefresh();$ad.data('ad-zone',this.$galleryContainer.data('zone'));$ad.data('page-url','');}}});}());;;

(function(window){'use strict';hgm.photo.ThumbGallery=Class.extend({galleryModel:null,$galleryContainer:null,$thumbnailsContainer:null,gallery:null,thumbnails:null,loop:true,init:function($galleryContainer,$thumbnailsContainer,model){this.$galleryContainer=$galleryContainer;this.$thumbnailsContainer=$thumbnailsContainer;this.galleryModel=model;if(hgm.isMobileDevice()&&window.matchMedia('(orientation: landscape)').matches){this.$galleryContainer.css('height',this.$galleryContainer.data('landscape-height'));}
this.initMainGallerySwiper();this.initThumbnails();this.bindEvents();},bindEvents:function(){$(window).bind('orientationchange',function(event){if(event.orientation==='portrait'){hgm.debug('Portrait',this.$galleryContainer.data('portrait-height'));this.$galleryContainer.css('height',this.$galleryContainer.data('portrait-height'));this.gallery.swiper.resizeFix();}else{hgm.debug('Landscape',this.$galleryContainer.data('landscape-height'));this.$galleryContainer.css('height',this.$galleryContainer.data('landscape-height'));this.gallery.swiper.resizeFix();}}.bind(this));},initMainGallerySwiper:function(){$('body').data('adRefreshes',1);this.gallery=new hgm.photo.Gallery(this.galleryModel,this.$galleryContainer,{showActiveCount:!!this.$galleryContainer.data('show-count'),showDescription:!!this.$galleryContainer.data('show-title'),onSlideChangeStart:this.onMainSlideStart.bind(this),onSlideClick:this.onMainSlideClick.bind(this),showSlideShow:this.$galleryContainer.data('slideshow'),loop:this.loop,showViewOptions:!!this.$galleryContainer.data('show-view-type')});this.gallery.show();},initThumbnails:function(){this.thumbnails=new hgm.photo.Thumbnails(this.galleryModel,this.$thumbnailsContainer,{onSlideClick:this.onThumbClick.bind(this)},this.gallery);},onThumbClick:function(swiper){this.gallery.stopAutoPlay();this.gallery.swipeTo(swiper.clickedSlideIndex);},onMainSlideStart:function(swiper){this.thumbnails.swipeTo(swiper.activeLoopIndex);},onMainSlideClick:function(swiper){var $currentSlide=$(swiper.activeSlide()),$image=$currentSlide.find('.image'),url=$image.data('image-huge'),width=$image.data('width'),height=$image.data('height'),title=$currentSlide.find('.image-desc').html();this.gallery.stopAutoPlay();if(!hgm.isMobileDevice()&&url&&title){hgm.lightBox.open(url,title,width,height);}}});}(window));;;

(function(){'use strict';hgm.photo.YrmdThumbGallery=hgm.photo.ThumbGallery.extend(hgm.photo.AdGallery.prototype).extend({galleryModel:null,thumbOffset:0,$playerContainer:null,init:function($galleryContainer,$thumbnailsContainer,thumbOffset,galleryModel){$('body').data('adRefreshes',1);this.thumbOffset=thumbOffset||0;$galleryContainer.find('img.fitfill').imgFitFill({mode:'fill'});this.galleryModel=galleryModel;this._super($galleryContainer,$thumbnailsContainer,this.galleryModel);},onMainSlideStart:function(swiper){this.refreshAds();this.$galleryContainer.find('.swiper-slide-video').remove();this.thumbnails.swipeTo(swiper.activeLoopIndex+this.thumbOffset);},onThumbClick:function(swiper,event){if($('.video-container').is(':visible')){this.pauseHideVideo();}
if(swiper.clickedSlideIndex>=this.thumbOffset){this.gallery.swipeTo(swiper.clickedSlideIndex-this.thumbOffset);}
else{this.playVideoThumbClick(swiper,event);}},playVideoThumbClick:function(swiper){var $currentThumbnail=$(swiper.activeSlide()),videoId=$currentThumbnail.data('video-id'),videoType=$currentThumbnail.data('video-type');if(videoId&&videoType){this.renderVideoContainer(videoId,videoType);}},renderVideoContainer:function(id,service){if(this.$playerContainer){this.$playerContainer.show();}
else{this.$playerContainer=$('<div />',{'class':'video-container','data-id':id,'data-service':service}).append($('<div />',{'id':'galleryVideo'}),$('<a />',{'class':'video-close'}));this.$galleryContainer.parent().append(this.$playerContainer);this.closeVideoBind();this.addVideo(id,service);}},addVideo:function(id,service){var player=this.$playerContainer.data('player');if(player){player.playVideo();}
else{player=hgm.video.renderVideo(id,service,'galleryVideo',true,function(){});this.$playerContainer.data('player',player);}},closeVideoBind:function(){$('.video-close').on('click',function(){this.pauseHideVideo();}.bind(this));},pauseHideVideo:function(){this.$playerContainer.data('player').pauseVideo();this.$galleryContainer.parent().find('.video-container').hide();}});}());;;
// Generated by CoffeeScript 1.4.0
/*
jQuery Waypoints - v2.0.2
Copyright (c) 2011-2013 Caleb Troughton
Dual licensed under the MIT license and GPL license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/licenses.txt
*/
(function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++){if(e in this&&this[e]===t)return e}return-1},e=[].slice;(function(t,e){if(typeof define==="function"&&define.amd){return define("waypoints",["jquery"],function(n){return e(n,t)})}else{return e(t.jQuery,t)}})(this,function(n,r){var i,o,l,s,f,u,a,c,h,d,p,y,v,w,g,m;i=n(r);c=t.call(r,"ontouchstart")>=0;s={horizontal:{},vertical:{}};f=1;a={};u="waypoints-context-id";p="resize.waypoints";y="scroll.waypoints";v=1;w="waypoints-waypoint-ids";g="waypoint";m="waypoints";o=function(){function t(t){var e=this;this.$element=t;this.element=t[0];this.didResize=false;this.didScroll=false;this.id="context"+f++;this.oldScroll={x:t.scrollLeft(),y:t.scrollTop()};this.waypoints={horizontal:{},vertical:{}};t.data(u,this.id);a[this.id]=this;t.bind(y,function(){var t;if(!(e.didScroll||c)){e.didScroll=true;t=function(){e.doScroll();return e.didScroll=false};return r.setTimeout(t,n[m].settings.scrollThrottle)}});t.bind(p,function(){var t;if(!e.didResize){e.didResize=true;t=function(){n[m]("refresh");return e.didResize=false};return r.setTimeout(t,n[m].settings.resizeThrottle)}})}t.prototype.doScroll=function(){var t,e=this;t={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};if(c&&(!t.vertical.oldScroll||!t.vertical.newScroll)){n[m]("refresh")}n.each(t,function(t,r){var i,o,l;l=[];o=r.newScroll>r.oldScroll;i=o?r.forward:r.backward;n.each(e.waypoints[t],function(t,e){var n,i;if(r.oldScroll<(n=e.offset)&&n<=r.newScroll){return l.push(e)}else if(r.newScroll<(i=e.offset)&&i<=r.oldScroll){return l.push(e)}});l.sort(function(t,e){return t.offset-e.offset});if(!o){l.reverse()}return n.each(l,function(t,e){if(e.options.continuous||t===l.length-1){return e.trigger([i])}})});return this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}};t.prototype.refresh=function(){var t,e,r,i=this;r=n.isWindow(this.element);e=this.$element.offset();this.doScroll();t={horizontal:{contextOffset:r?0:e.left,contextScroll:r?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:r?0:e.top,contextScroll:r?0:this.oldScroll.y,contextDimension:r?n[m]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};return n.each(t,function(t,e){return n.each(i.waypoints[t],function(t,r){var i,o,l,s,f;i=r.options.offset;l=r.offset;o=n.isWindow(r.element)?0:r.$element.offset()[e.offsetProp];if(n.isFunction(i)){i=i.apply(r.element)}else if(typeof i==="string"){i=parseFloat(i);if(r.options.offset.indexOf("%")>-1){i=Math.ceil(e.contextDimension*i/100)}}r.offset=o-e.contextOffset+e.contextScroll-i;if(r.options.onlyOnScroll&&l!=null||!r.enabled){return}if(l!==null&&l<(s=e.oldScroll)&&s<=r.offset){return r.trigger([e.backward])}else if(l!==null&&l>(f=e.oldScroll)&&f>=r.offset){return r.trigger([e.forward])}else if(l===null&&e.oldScroll>=r.offset){return r.trigger([e.forward])}})})};t.prototype.checkEmpty=function(){if(n.isEmptyObject(this.waypoints.horizontal)&&n.isEmptyObject(this.waypoints.vertical)){this.$element.unbind([p,y].join(" "));return delete a[this.id]}};return t}();l=function(){function t(t,e,r){var i,o;r=n.extend({},n.fn[g].defaults,r);if(r.offset==="bottom-in-view"){r.offset=function(){var t;t=n[m]("viewportHeight");if(!n.isWindow(e.element)){t=e.$element.height()}return t-n(this).outerHeight()}}this.$element=t;this.element=t[0];this.axis=r.horizontal?"horizontal":"vertical";this.callback=r.handler;this.context=e;this.enabled=r.enabled;this.id="waypoints"+v++;this.offset=null;this.options=r;e.waypoints[this.axis][this.id]=this;s[this.axis][this.id]=this;i=(o=t.data(w))!=null?o:[];i.push(this.id);t.data(w,i)}t.prototype.trigger=function(t){if(!this.enabled){return}if(this.callback!=null){this.callback.apply(this.element,t)}if(this.options.triggerOnce){return this.destroy()}};t.prototype.disable=function(){return this.enabled=false};t.prototype.enable=function(){this.context.refresh();return this.enabled=true};t.prototype.destroy=function(){delete s[this.axis][this.id];delete this.context.waypoints[this.axis][this.id];return this.context.checkEmpty()};t.getWaypointsByElement=function(t){var e,r;r=n(t).data(w);if(!r){return[]}e=n.extend({},s.horizontal,s.vertical);return n.map(r,function(t){return e[t]})};return t}();d={init:function(t,e){var r;if(e==null){e={}}if((r=e.handler)==null){e.handler=t}this.each(function(){var t,r,i,s;t=n(this);i=(s=e.context)!=null?s:n.fn[g].defaults.context;if(!n.isWindow(i)){i=t.closest(i)}i=n(i);r=a[i.data(u)];if(!r){r=new o(i)}return new l(t,r,e)});n[m]("refresh");return this},disable:function(){return d._invoke(this,"disable")},enable:function(){return d._invoke(this,"enable")},destroy:function(){return d._invoke(this,"destroy")},prev:function(t,e){return d._traverse.call(this,t,e,function(t,e,n){if(e>0){return t.push(n[e-1])}})},next:function(t,e){return d._traverse.call(this,t,e,function(t,e,n){if(e<n.length-1){return t.push(n[e+1])}})},_traverse:function(t,e,i){var o,l;if(t==null){t="vertical"}if(e==null){e=r}l=h.aggregate(e);o=[];this.each(function(){var e;e=n.inArray(this,l[t]);return i(o,e,l[t])});return this.pushStack(o)},_invoke:function(t,e){t.each(function(){var t;t=l.getWaypointsByElement(this);return n.each(t,function(t,n){n[e]();return true})});return this}};n.fn[g]=function(){var t,r;r=arguments[0],t=2<=arguments.length?e.call(arguments,1):[];if(d[r]){return d[r].apply(this,t)}else if(n.isFunction(r)){return d.init.apply(this,arguments)}else if(n.isPlainObject(r)){return d.init.apply(this,[null,r])}else if(!r){return n.error("jQuery Waypoints needs a callback function or handler option.")}else{return n.error("The "+r+" method does not exist in jQuery Waypoints.")}};n.fn[g].defaults={context:r,continuous:true,enabled:true,horizontal:false,offset:0,triggerOnce:false};h={refresh:function(){return n.each(a,function(t,e){return e.refresh()})},viewportHeight:function(){var t;return(t=r.innerHeight)!=null?t:i.height()},aggregate:function(t){var e,r,i;e=s;if(t){e=(i=a[n(t).data(u)])!=null?i.waypoints:void 0}if(!e){return[]}r={horizontal:[],vertical:[]};n.each(r,function(t,i){n.each(e[t],function(t,e){return i.push(e)});i.sort(function(t,e){return t.offset-e.offset});r[t]=n.map(i,function(t){return t.element});return r[t]=n.unique(r[t])});return r},above:function(t){if(t==null){t=r}return h._filter(t,"vertical",function(t,e){return e.offset<=t.oldScroll.y})},below:function(t){if(t==null){t=r}return h._filter(t,"vertical",function(t,e){return e.offset>t.oldScroll.y})},left:function(t){if(t==null){t=r}return h._filter(t,"horizontal",function(t,e){return e.offset<=t.oldScroll.x})},right:function(t){if(t==null){t=r}return h._filter(t,"horizontal",function(t,e){return e.offset>t.oldScroll.x})},enable:function(){return h._invoke("enable")},disable:function(){return h._invoke("disable")},destroy:function(){return h._invoke("destroy")},extendFn:function(t,e){return d[t]=e},_invoke:function(t){var e;e=n.extend({},s.vertical,s.horizontal);return n.each(e,function(e,n){n[t]();return true})},_filter:function(t,e,r){var i,o;i=a[n(t).data(u)];if(!i){return[]}o=[];n.each(i.waypoints[e],function(t,e){if(r(i,e)){return o.push(e)}});o.sort(function(t,e){return t.offset-e.offset});return n.map(o,function(t){return t.element})}};n[m]=function(){var t,n;n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[];if(h[n]){return h[n].apply(null,t)}else{return h.aggregate.call(null,n)}};n[m].settings={resizeThrottle:100,scrollThrottle:30};return i.load(function(){return n[m]("refresh")})})}).call(this);;;

function loadProductTour(){$('#product-tour').dialog({dialogClass:'product-tour-dialog',autoOpen:true,draggable:false,resizable:false,modal:true,width:575,show:'fade',hide:'fade',closeText:'',open:function(){$('.ui-widget-overlay').click(function(){$('#product-tour').dialog('close');});}});return false;};;

(function(undefined){'use strict';var MONTH_ABBREVS=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];var NO_PRICING_TEXT='No Pricing';var NO_MILEAGE_TEXT='N/A';hgm.format={number:function(value){return value.toString().replace(/\B(?=(\d{3})+(?!\d))/g,',');},currency:function(value,options){var noPricingText=NO_PRICING_TEXT;if(options!==undefined&&options.hash!==undefined&&options.hash.noPricingText!==undefined){noPricingText=options.hash.noPricingText;}
if(options!==undefined&&options.hash!==undefined&&options.hash.subtract!==undefined){return value>0?'$'+this.number(Math.abs(value-options.hash.subtract)):noPricingText;}else{return value>0?'$'+this.number(value):noPricingText;}},mileage:function(value,isNew,options){var noMileageText=NO_MILEAGE_TEXT,postText='&nbsp;';if(options!==undefined&&options.hash!==undefined&&options.hash.noMileageText!==undefined){noMileageText=options.hash.noMileageText;}
if(options!==undefined&&options.hash!==undefined&&options.hash.postText!==undefined){postText=options.hash.postText;}
if($.type(isNew)==='number'||isNew===undefined){return isNew||value>0?this.number(value)+postText:noMileageText;}else if(isNew.hash!==undefined&&isNew.hash.subtract!==undefined){return value>0?this.number(Math.abs(value-isNew.hash.subtract))+postText:noMileageText;}else{return value>0?this.number(value)+postText:noMileageText;}},date:function(date,options){var a,d,t;if(options===undefined||options.hash===undefined||options.hash.multiplyBy===undefined){a=date.split(' ');d=a[0].split('-');t=a[1].split(':');if((d.length>=3)&&(t.length>=3)){d=new Date(d[0],(d[1]-1),d[2],t[0],t[1],t[2]);}}else{d=new Date(date*options.hash.multiplyBy);}
return MONTH_ABBREVS[d.getMonth()]+' '+d.getDate();},phone:function(phone){return phone.toString().toLowerCase().replace(/[^x0-9]/g,'').replace(/([0-9]{3})([0-9]{3})([0-9]{4})/,'$1-$2-$3').replace(/x/,' x');},phoneUri:function(phone){phone=String(phone);if(phone){var parts=phone.toLowerCase().split('x');if(parts.length===1){return'tel://'+phone;}
if(parts.length>1){return'tel://'+parts[0]+',,,'+parts[1];}}
return'';}};}());;;

var Handlebars={};Handlebars.VERSION="1.0.beta.6";Handlebars.helpers={};Handlebars.partials={};Handlebars.registerHelper=function(name,fn,inverse){if(inverse){fn.not=inverse;}
this.helpers[name]=fn;};Handlebars.registerPartial=function(name,str){this.partials[name]=str;};Handlebars.registerHelper('helperMissing',function(arg){if(arguments.length===2){return undefined;}else{throw new Error("Could not find property '"+arg+"'");}});var toString=Object.prototype.toString,functionType="[object Function]";Handlebars.registerHelper('blockHelperMissing',function(context,options){var inverse=options.inverse||function(){},fn=options.fn;var ret="";var type=toString.call(context);if(type===functionType){context=context.call(this);}
if(context===true){return fn(this);}else if(context===false||context==null){return inverse(this);}else if(type==="[object Array]"){if(context.length>0){for(var i=0,j=context.length;i<j;i++){ret=ret+fn(context[i]);}}else{ret=inverse(this);}
return ret;}else{return fn(context);}});Handlebars.registerHelper('each',function(context,options){var fn=options.fn,inverse=options.inverse;var ret="";if(context&&context.length>0){for(var i=0,j=context.length;i<j;i++){ret=ret+fn(context[i]);}}else{ret=inverse(this);}
return ret;});Handlebars.registerHelper('if',function(context,options){var type=toString.call(context);if(type===functionType){context=context.call(this);}
if(!context||Handlebars.Utils.isEmpty(context)){return options.inverse(this);}else{return options.fn(this);}});Handlebars.registerHelper('unless',function(context,options){var fn=options.fn,inverse=options.inverse;options.fn=inverse;options.inverse=fn;return Handlebars.helpers['if'].call(this,context,options);});Handlebars.registerHelper('with',function(context,options){return options.fn(context);});Handlebars.registerHelper('log',function(context){Handlebars.log(context);});;var handlebars=(function(){var parser={trace:function trace(){},yy:{},symbols_:{"error":2,"root":3,"program":4,"EOF":5,"statements":6,"simpleInverse":7,"statement":8,"openInverse":9,"closeBlock":10,"openBlock":11,"mustache":12,"partial":13,"CONTENT":14,"COMMENT":15,"OPEN_BLOCK":16,"inMustache":17,"CLOSE":18,"OPEN_INVERSE":19,"OPEN_ENDBLOCK":20,"path":21,"OPEN":22,"OPEN_UNESCAPED":23,"OPEN_PARTIAL":24,"params":25,"hash":26,"param":27,"STRING":28,"INTEGER":29,"BOOLEAN":30,"hashSegments":31,"hashSegment":32,"ID":33,"EQUALS":34,"pathSegments":35,"SEP":36,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"STRING",29:"INTEGER",30:"BOOLEAN",33:"ID",34:"EQUALS",36:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[25,2],[25,1],[27,1],[27,1],[27,1],[27,1],[26,1],[31,2],[31,1],[32,3],[32,3],[32,3],[32,3],[21,1],[35,3],[35,1]],performAction:function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return $$[$0-1]
break;case 2:this.$=new yy.ProgramNode($$[$0-2],$$[$0])
break;case 3:this.$=new yy.ProgramNode($$[$0])
break;case 4:this.$=new yy.ProgramNode([])
break;case 5:this.$=[$$[$0]]
break;case 6:$$[$0-1].push($$[$0]);this.$=$$[$0-1]
break;case 7:this.$=new yy.InverseNode($$[$0-2],$$[$0-1],$$[$0])
break;case 8:this.$=new yy.BlockNode($$[$0-2],$$[$0-1],$$[$0])
break;case 9:this.$=$$[$0]
break;case 10:this.$=$$[$0]
break;case 11:this.$=new yy.ContentNode($$[$0])
break;case 12:this.$=new yy.CommentNode($$[$0])
break;case 13:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1])
break;case 14:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1])
break;case 15:this.$=$$[$0-1]
break;case 16:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1])
break;case 17:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1],true)
break;case 18:this.$=new yy.PartialNode($$[$0-1])
break;case 19:this.$=new yy.PartialNode($$[$0-2],$$[$0-1])
break;case 20:break;case 21:this.$=[[$$[$0-2]].concat($$[$0-1]),$$[$0]]
break;case 22:this.$=[[$$[$0-1]].concat($$[$0]),null]
break;case 23:this.$=[[$$[$0-1]],$$[$0]]
break;case 24:this.$=[[$$[$0]],null]
break;case 25:$$[$0-1].push($$[$0]);this.$=$$[$0-1];break;case 26:this.$=[$$[$0]]
break;case 27:this.$=$$[$0]
break;case 28:this.$=new yy.StringNode($$[$0])
break;case 29:this.$=new yy.IntegerNode($$[$0])
break;case 30:this.$=new yy.BooleanNode($$[$0])
break;case 31:this.$=new yy.HashNode($$[$0])
break;case 32:$$[$0-1].push($$[$0]);this.$=$$[$0-1]
break;case 33:this.$=[$$[$0]]
break;case 34:this.$=[$$[$0-2],$$[$0]]
break;case 35:this.$=[$$[$0-2],new yy.StringNode($$[$0])]
break;case 36:this.$=[$$[$0-2],new yy.IntegerNode($$[$0])]
break;case 37:this.$=[$$[$0-2],new yy.BooleanNode($$[$0])]
break;case 38:this.$=new yy.IdNode($$[$0])
break;case 39:$$[$0-2].push($$[$0]);this.$=$$[$0-2];break;case 40:this.$=[$$[$0]]
break;}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,33:[1,25],35:24},{17:26,21:23,33:[1,25],35:24},{17:27,21:23,33:[1,25],35:24},{17:28,21:23,33:[1,25],35:24},{21:29,33:[1,25],35:24},{1:[2,1]},{6:30,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,31],21:23,33:[1,25],35:24},{10:32,20:[1,33]},{10:34,20:[1,33]},{18:[1,35]},{18:[2,24],21:40,25:36,26:37,27:38,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,38],28:[2,38],29:[2,38],30:[2,38],33:[2,38],36:[1,46]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],36:[2,40]},{18:[1,47]},{18:[1,48]},{18:[1,49]},{18:[1,50],21:51,33:[1,25],35:24},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:52,33:[1,25],35:24},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:40,26:53,27:54,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,23]},{18:[2,26],28:[2,26],29:[2,26],30:[2,26],33:[2,26]},{18:[2,31],32:55,33:[1,56]},{18:[2,27],28:[2,27],29:[2,27],30:[2,27],33:[2,27]},{18:[2,28],28:[2,28],29:[2,28],30:[2,28],33:[2,28]},{18:[2,29],28:[2,29],29:[2,29],30:[2,29],33:[2,29]},{18:[2,30],28:[2,30],29:[2,30],30:[2,30],33:[2,30]},{18:[2,33],33:[2,33]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],34:[1,57],36:[2,40]},{33:[1,58]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,59]},{18:[1,60]},{18:[2,21]},{18:[2,25],28:[2,25],29:[2,25],30:[2,25],33:[2,25]},{18:[2,32],33:[2,32]},{34:[1,57]},{21:61,28:[1,62],29:[1,63],30:[1,64],33:[1,25],35:24},{18:[2,39],28:[2,39],29:[2,39],30:[2,39],33:[2,39],36:[2,39]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,34],33:[2,34]},{18:[2,35],33:[2,35]},{18:[2,36],33:[2,36]},{18:[2,37],33:[2,37]}],defaultActions:{16:[2,1],37:[2,23],53:[2,21]},parseError:function parseError(str,hash){throw new Error(str);},parse:function parse(input){var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,TERROR=2,EOF=1;this.lexer.setInput(input);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;if(typeof this.lexer.yylloc=="undefined")
this.lexer.yylloc={};var yyloc=this.lexer.yylloc;lstack.push(yyloc);if(typeof this.yy.parseError==="function")
this.parseError=this.yy.parseError;function popStack(n){stack.length=stack.length-2*n;vstack.length=vstack.length-n;lstack.length=lstack.length-n;}
function lex(){var token;token=self.lexer.lex()||1;if(typeof token!=="number"){token=self.symbols_[token]||token;}
return token;}
var symbol,preErrorSymbol,state,action,a,r,yyval={},p,len,newState,expected;while(true){state=stack[stack.length-1];if(this.defaultActions[state]){action=this.defaultActions[state];}else{if(symbol==null)
symbol=lex();action=table[state]&&table[state][symbol];}
if(typeof action==="undefined"||!action.length||!action[0]){if(!recovering){expected=[];for(p in table[state])
if(this.terminals_[p]&&p>2){expected.push("'"+this.terminals_[p]+"'");}
var errStr="";if(this.lexer.showPosition){errStr="Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+this.terminals_[symbol]+"'";}else{errStr="Parse error on line "+(yylineno+1)+": Unexpected "+(symbol==1?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'");}
this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected});}}
if(action[0]instanceof Array&&action.length>1){throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol);}
switch(action[0]){case 1:stack.push(symbol);vstack.push(this.lexer.yytext);lstack.push(this.lexer.yylloc);stack.push(action[1]);symbol=null;if(!preErrorSymbol){yyleng=this.lexer.yyleng;yytext=this.lexer.yytext;yylineno=this.lexer.yylineno;yyloc=this.lexer.yylloc;if(recovering>0)
recovering--;}else{symbol=preErrorSymbol;preErrorSymbol=null;}
break;case 2:len=this.productions_[action[1]][1];yyval.$=vstack[vstack.length-len];yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column};r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack);if(typeof r!=="undefined"){return r;}
if(len){stack=stack.slice(0,-1*len*2);vstack=vstack.slice(0,-1*len);lstack=lstack.slice(0,-1*len);}
stack.push(this.productions_[action[1]][0]);vstack.push(yyval.$);lstack.push(yyval._$);newState=table[stack[stack.length-2]][stack[stack.length-1]];stack.push(newState);break;case 3:return true;}}
return true;}};var lexer=(function(){var lexer=({EOF:1,parseError:function parseError(str,hash){if(this.yy.parseError){this.yy.parseError(str,hash);}else{throw new Error(str);}},setInput:function(input){this._input=input;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match='';this.conditionStack=['INITIAL'];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};return this;},input:function(){var ch=this._input[0];this.yytext+=ch;this.yyleng++;this.match+=ch;this.matched+=ch;var lines=ch.match(/\n/);if(lines)this.yylineno++;this._input=this._input.slice(1);return ch;},unput:function(ch){this._input=ch+this._input;return this;},more:function(){this._more=true;return this;},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?'...':'')+past.substr(-20).replace(/\n/g,"");},upcomingInput:function(){var next=this.match;if(next.length<20){next+=this._input.substr(0,20-next.length);}
return(next.substr(0,20)+(next.length>20?'...':'')).replace(/\n/g,"");},showPosition:function(){var pre=this.pastInput();var c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^";},next:function(){if(this.done){return this.EOF;}
if(!this._input)this.done=true;var token,match,col,lines;if(!this._more){this.yytext='';this.match='';}
var rules=this._currentRules();for(var i=0;i<rules.length;i++){match=this._input.match(this.rules[rules[i]]);if(match){lines=match[0].match(/\n.*/g);if(lines)this.yylineno+=lines.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-1:this.yylloc.last_column+match[0].length}
this.yytext+=match[0];this.match+=match[0];this.matches=match;this.yyleng=this.yytext.length;this._more=false;this._input=this._input.slice(match[0].length);this.matched+=match[0];token=this.performAction.call(this,this.yy,this,rules[i],this.conditionStack[this.conditionStack.length-1]);if(token)return token;else return;}}
if(this._input===""){return this.EOF;}else{this.parseError('Lexical error on line '+(this.yylineno+1)+'. Unrecognized text.\n'+this.showPosition(),{text:"",token:null,line:this.yylineno});}},lex:function lex(){var r=this.next();if(typeof r!=='undefined'){return r;}else{return this.lex();}},begin:function begin(condition){this.conditionStack.push(condition);},popState:function popState(){return this.conditionStack.pop();},_currentRules:function _currentRules(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules;},topState:function(){return this.conditionStack[this.conditionStack.length-2];},pushState:function begin(condition){this.begin(condition);}});lexer.performAction=function anonymous(yy,yy_,$avoiding_name_collisions,YY_START){var YYSTATE=YY_START
switch($avoiding_name_collisions){case 0:if(yy_.yytext.slice(-1)!=="\\")this.begin("mu");if(yy_.yytext.slice(-1)==="\\")yy_.yytext=yy_.yytext.substr(0,yy_.yyleng-1),this.begin("emu");if(yy_.yytext)return 14;break;case 1:return 14;break;case 2:this.popState();return 14;break;case 3:return 24;break;case 4:return 16;break;case 5:return 20;break;case 6:return 19;break;case 7:return 19;break;case 8:return 23;break;case 9:return 23;break;case 10:yy_.yytext=yy_.yytext.substr(3,yy_.yyleng-5);this.popState();return 15;break;case 11:return 22;break;case 12:return 34;break;case 13:return 33;break;case 14:return 33;break;case 15:return 36;break;case 16:break;case 17:this.popState();return 18;break;case 18:this.popState();return 18;break;case 19:yy_.yytext=yy_.yytext.substr(1,yy_.yyleng-2).replace(/\\"/g,'"');return 28;break;case 20:return 30;break;case 21:return 30;break;case 22:return 29;break;case 23:return 33;break;case 24:yy_.yytext=yy_.yytext.substr(1,yy_.yyleng-2);return 33;break;case 25:return'INVALID';break;case 26:return 5;break;}};lexer.rules=[/^[^\x00]*?(?=(\{\{))/,/^[^\x00]+/,/^[^\x00]{2,}?(?=(\{\{))/,/^\{\{>/,/^\{\{#/,/^\{\{\//,/^\{\{\^/,/^\{\{\s*else\b/,/^\{\{\{/,/^\{\{&/,/^\{\{![\s\S]*?\}\}/,/^\{\{/,/^=/,/^\.(?=[} ])/,/^\.\./,/^[\/.]/,/^\s+/,/^\}\}\}/,/^\}\}/,/^"(\\["]|[^"])*"/,/^true(?=[}\s])/,/^false(?=[}\s])/,/^[0-9]+(?=[}\s])/,/^[a-zA-Z0-9_$-]+(?=[=}\s\/.])/,/^\[[^\]]*\]/,/^./,/^$/];lexer.conditions={"mu":{"rules":[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],"inclusive":false},"emu":{"rules":[2],"inclusive":false},"INITIAL":{"rules":[0,1,26],"inclusive":true}};return lexer;})()
parser.lexer=lexer;return parser;})();if(typeof require!=='undefined'&&typeof exports!=='undefined'){exports.parser=handlebars;exports.parse=function(){return handlebars.parse.apply(handlebars,arguments);}
exports.main=function commonjsMain(args){if(!args[1])
throw new Error('Usage: '+args[0]+' FILE');if(typeof process!=='undefined'){var source=require('fs').readFileSync(require('path').join(process.cwd(),args[1]),"utf8");}else{var cwd=require("file").path(require("file").cwd());var source=cwd.join(args[1]).read({charset:"utf-8"});}
return exports.parser.parse(source);}
if(typeof module!=='undefined'&&require.main===module){exports.main(typeof process!=='undefined'?process.argv.slice(1):require("system").args);}};;Handlebars.Parser=handlebars;Handlebars.parse=function(string){Handlebars.Parser.yy=Handlebars.AST;return Handlebars.Parser.parse(string);};Handlebars.print=function(ast){return new Handlebars.PrintVisitor().accept(ast);};Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(level,str){}};Handlebars.log=function(level,str){Handlebars.logger.log(level,str);};;(function(){Handlebars.AST={};Handlebars.AST.ProgramNode=function(statements,inverse){this.type="program";this.statements=statements;if(inverse){this.inverse=new Handlebars.AST.ProgramNode(inverse);}};Handlebars.AST.MustacheNode=function(params,hash,unescaped){this.type="mustache";this.id=params[0];this.params=params.slice(1);this.hash=hash;this.escaped=!unescaped;};Handlebars.AST.PartialNode=function(id,context){this.type="partial";this.id=id;this.context=context;};var verifyMatch=function(open,close){if(open.original!==close.original){throw new Handlebars.Exception(open.original+" doesn't match "+close.original);}};Handlebars.AST.BlockNode=function(mustache,program,close){verifyMatch(mustache.id,close);this.type="block";this.mustache=mustache;this.program=program;};Handlebars.AST.InverseNode=function(mustache,program,close){verifyMatch(mustache.id,close);this.type="inverse";this.mustache=mustache;this.program=program;};Handlebars.AST.ContentNode=function(string){this.type="content";this.string=string;};Handlebars.AST.HashNode=function(pairs){this.type="hash";this.pairs=pairs;};Handlebars.AST.IdNode=function(parts){this.type="ID";this.original=parts.join(".");var dig=[],depth=0;for(var i=0,l=parts.length;i<l;i++){var part=parts[i];if(part===".."){depth++;}
else if(part==="."||part==="this"){this.isScoped=true;}
else{dig.push(part);}}
this.parts=dig;this.string=dig.join('.');this.depth=depth;this.isSimple=(dig.length===1)&&(depth===0);};Handlebars.AST.StringNode=function(string){this.type="STRING";this.string=string;};Handlebars.AST.IntegerNode=function(integer){this.type="INTEGER";this.integer=integer;};Handlebars.AST.BooleanNode=function(bool){this.type="BOOLEAN";this.bool=bool;};Handlebars.AST.CommentNode=function(comment){this.type="comment";this.comment=comment;};})();;Handlebars.Exception=function(message){var tmp=Error.prototype.constructor.apply(this,arguments);for(var p in tmp){if(tmp.hasOwnProperty(p)){this[p]=tmp[p];}}
this.message=tmp.message;};Handlebars.Exception.prototype=new Error;Handlebars.SafeString=function(string){this.string=string;};Handlebars.SafeString.prototype.toString=function(){return this.string.toString();};(function(){var escape={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var badChars=/&(?!\w+;)|[<>"'`]/g;var possible=/[&<>"'`]/;var escapeChar=function(chr){return escape[chr]||"&amp;";};Handlebars.Utils={escapeExpression:function(string){if(string instanceof Handlebars.SafeString){return string.toString();}else if(string==null||string===false){return"";}
if(!possible.test(string)){return string;}
return string.replace(badChars,escapeChar);},isEmpty:function(value){if(typeof value==="undefined"){return true;}else if(value===null){return true;}else if(value===false){return true;}else if(Object.prototype.toString.call(value)==="[object Array]"&&value.length===0){return true;}else{return false;}}};})();;Handlebars.Compiler=function(){};Handlebars.JavaScriptCompiler=function(){};(function(Compiler,JavaScriptCompiler){Compiler.OPCODE_MAP={appendContent:1,getContext:2,lookupWithHelpers:3,lookup:4,append:5,invokeMustache:6,appendEscaped:7,pushString:8,truthyOrFallback:9,functionOrFallback:10,invokeProgram:11,invokePartial:12,push:13,assignToHash:15,pushStringParam:16};Compiler.MULTI_PARAM_OPCODES={appendContent:1,getContext:1,lookupWithHelpers:2,lookup:1,invokeMustache:3,pushString:1,truthyOrFallback:1,functionOrFallback:1,invokeProgram:3,invokePartial:1,push:1,assignToHash:1,pushStringParam:1};Compiler.DISASSEMBLE_MAP={};for(var prop in Compiler.OPCODE_MAP){var value=Compiler.OPCODE_MAP[prop];Compiler.DISASSEMBLE_MAP[value]=prop;}
Compiler.multiParamSize=function(code){return Compiler.MULTI_PARAM_OPCODES[Compiler.DISASSEMBLE_MAP[code]];};Compiler.prototype={compiler:Compiler,disassemble:function(){var opcodes=this.opcodes,opcode,nextCode;var out=[],str,name,value;for(var i=0,l=opcodes.length;i<l;i++){opcode=opcodes[i];if(opcode==='DECLARE'){name=opcodes[++i];value=opcodes[++i];out.push("DECLARE "+name+" = "+value);}else{str=Compiler.DISASSEMBLE_MAP[opcode];var extraParams=Compiler.multiParamSize(opcode);var codes=[];for(var j=0;j<extraParams;j++){nextCode=opcodes[++i];if(typeof nextCode==="string"){nextCode="\""+nextCode.replace("\n","\\n")+"\"";}
codes.push(nextCode);}
str=str+" "+codes.join(" ");out.push(str);}}
return out.join("\n");},guid:0,compile:function(program,options){this.children=[];this.depths={list:[]};this.options=options;var knownHelpers=this.options.knownHelpers;this.options.knownHelpers={'helperMissing':true,'blockHelperMissing':true,'each':true,'if':true,'unless':true,'with':true,'log':true};if(knownHelpers){for(var name in knownHelpers){this.options.knownHelpers[name]=knownHelpers[name];}}
return this.program(program);},accept:function(node){return this[node.type](node);},program:function(program){var statements=program.statements,statement;this.opcodes=[];for(var i=0,l=statements.length;i<l;i++){statement=statements[i];this[statement.type](statement);}
this.isSimple=l===1;this.depths.list=this.depths.list.sort(function(a,b){return a-b;});return this;},compileProgram:function(program){var result=new this.compiler().compile(program,this.options);var guid=this.guid++;this.usePartial=this.usePartial||result.usePartial;this.children[guid]=result;for(var i=0,l=result.depths.list.length;i<l;i++){depth=result.depths.list[i];if(depth<2){continue;}
else{this.addDepth(depth-1);}}
return guid;},block:function(block){var mustache=block.mustache;var depth,child,inverse,inverseGuid;var params=this.setupStackForMustache(mustache);var programGuid=this.compileProgram(block.program);if(block.program.inverse){inverseGuid=this.compileProgram(block.program.inverse);this.declare('inverse',inverseGuid);}
this.opcode('invokeProgram',programGuid,params.length,!!mustache.hash);this.declare('inverse',null);this.opcode('append');},inverse:function(block){var params=this.setupStackForMustache(block.mustache);var programGuid=this.compileProgram(block.program);this.declare('inverse',programGuid);this.opcode('invokeProgram',null,params.length,!!block.mustache.hash);this.declare('inverse',null);this.opcode('append');},hash:function(hash){var pairs=hash.pairs,pair,val;this.opcode('push','{}');for(var i=0,l=pairs.length;i<l;i++){pair=pairs[i];val=pair[1];this.accept(val);this.opcode('assignToHash',pair[0]);}},partial:function(partial){var id=partial.id;this.usePartial=true;if(partial.context){this.ID(partial.context);}else{this.opcode('push','depth0');}
this.opcode('invokePartial',id.original);this.opcode('append');},content:function(content){this.opcode('appendContent',content.string);},mustache:function(mustache){var params=this.setupStackForMustache(mustache);this.opcode('invokeMustache',params.length,mustache.id.original,!!mustache.hash);if(mustache.escaped&&!this.options.noEscape){this.opcode('appendEscaped');}else{this.opcode('append');}},ID:function(id){this.addDepth(id.depth);this.opcode('getContext',id.depth);this.opcode('lookupWithHelpers',id.parts[0]||null,id.isScoped||false);for(var i=1,l=id.parts.length;i<l;i++){this.opcode('lookup',id.parts[i]);}},STRING:function(string){this.opcode('pushString',string.string);},INTEGER:function(integer){this.opcode('push',integer.integer);},BOOLEAN:function(bool){this.opcode('push',bool.bool);},comment:function(){},pushParams:function(params){var i=params.length,param;while(i--){param=params[i];if(this.options.stringParams){if(param.depth){this.addDepth(param.depth);}
this.opcode('getContext',param.depth||0);this.opcode('pushStringParam',param.string);}else{this[param.type](param);}}},opcode:function(name,val1,val2,val3){this.opcodes.push(Compiler.OPCODE_MAP[name]);if(val1!==undefined){this.opcodes.push(val1);}
if(val2!==undefined){this.opcodes.push(val2);}
if(val3!==undefined){this.opcodes.push(val3);}},declare:function(name,value){this.opcodes.push('DECLARE');this.opcodes.push(name);this.opcodes.push(value);},addDepth:function(depth){if(depth===0){return;}
if(!this.depths[depth]){this.depths[depth]=true;this.depths.list.push(depth);}},setupStackForMustache:function(mustache){var params=mustache.params;this.pushParams(params);if(mustache.hash){this.hash(mustache.hash);}
this.ID(mustache.id);return params;}};JavaScriptCompiler.prototype={nameLookup:function(parent,name,type){if(/^[0-9]+$/.test(name)){return parent+"["+name+"]";}else if(JavaScriptCompiler.isValidJavaScriptVariableName(name)){return parent+"."+name;}
else{return parent+"['"+name+"']";}},appendToBuffer:function(string){if(this.environment.isSimple){return"return "+string+";";}else{return"buffer += "+string+";";}},initializeBuffer:function(){return this.quotedString("");},namespace:"Handlebars",compile:function(environment,options,context,asObject){this.environment=environment;this.options=options||{};this.name=this.environment.name;this.isChild=!!context;this.context=context||{programs:[],aliases:{self:'this'},registers:{list:[]}};this.preamble();this.stackSlot=0;this.stackVars=[];this.compileChildren(environment,options);var opcodes=environment.opcodes,opcode;this.i=0;for(l=opcodes.length;this.i<l;this.i++){opcode=this.nextOpcode(0);if(opcode[0]==='DECLARE'){this.i=this.i+2;this[opcode[1]]=opcode[2];}else{this.i=this.i+opcode[1].length;this[opcode[0]].apply(this,opcode[1]);}}
return this.createFunctionContext(asObject);},nextOpcode:function(n){var opcodes=this.environment.opcodes,opcode=opcodes[this.i+n],name,val;var extraParams,codes;if(opcode==='DECLARE'){name=opcodes[this.i+1];val=opcodes[this.i+2];return['DECLARE',name,val];}else{name=Compiler.DISASSEMBLE_MAP[opcode];extraParams=Compiler.multiParamSize(opcode);codes=[];for(var j=0;j<extraParams;j++){codes.push(opcodes[this.i+j+1+n]);}
return[name,codes];}},eat:function(opcode){this.i=this.i+opcode.length;},preamble:function(){var out=[];this.useRegister('foundHelper');if(!this.isChild){var namespace=this.namespace;var copies="helpers = helpers || "+namespace+".helpers;";if(this.environment.usePartial){copies=copies+" partials = partials || "+namespace+".partials;";}
out.push(copies);}else{out.push('');}
if(!this.environment.isSimple){out.push(", buffer = "+this.initializeBuffer());}else{out.push("");}
this.lastContext=0;this.source=out;},createFunctionContext:function(asObject){var locals=this.stackVars;if(!this.isChild){locals=locals.concat(this.context.registers.list);}
if(locals.length>0){this.source[1]=this.source[1]+", "+locals.join(", ");}
if(!this.isChild){var aliases=[]
for(var alias in this.context.aliases){this.source[1]=this.source[1]+', '+alias+'='+this.context.aliases[alias];}}
if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";";}
if(!this.isChild){this.source[1]+='\n'+this.context.programs.join('\n')+'\n';}
if(!this.environment.isSimple){this.source.push("return buffer;");}
var params=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var i=0,l=this.environment.depths.list.length;i<l;i++){params.push("depth"+this.environment.depths.list[i]);}
if(asObject){params.push(this.source.join("\n  "));return Function.apply(this,params);}else{var functionSource='function '+(this.name||'')+'('+params.join(',')+') {\n  '+this.source.join("\n  ")+'}';Handlebars.log(Handlebars.logger.DEBUG,functionSource+"\n\n");return functionSource;}},appendContent:function(content){this.source.push(this.appendToBuffer(this.quotedString(content)));},append:function(){var local=this.popStack();this.source.push("if("+local+" || "+local+" === 0) { "+this.appendToBuffer(local)+" }");if(this.environment.isSimple){this.source.push("else { "+this.appendToBuffer("''")+" }");}},appendEscaped:function(){var opcode=this.nextOpcode(1),extra="";this.context.aliases.escapeExpression='this.escapeExpression';if(opcode[0]==='appendContent'){extra=" + "+this.quotedString(opcode[1][0]);this.eat(opcode);}
this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+extra));},getContext:function(depth){if(this.lastContext!==depth){this.lastContext=depth;}},lookupWithHelpers:function(name,isScoped){if(name){var topStack=this.nextStack();this.usingKnownHelper=false;var toPush;if(!isScoped&&this.options.knownHelpers[name]){toPush=topStack+" = "+this.nameLookup('helpers',name,'helper');this.usingKnownHelper=true;}else if(isScoped||this.options.knownHelpersOnly){toPush=topStack+" = "+this.nameLookup('depth'+this.lastContext,name,'context');}else{this.register('foundHelper',this.nameLookup('helpers',name,'helper'));toPush=topStack+" = foundHelper || "+this.nameLookup('depth'+this.lastContext,name,'context');}
toPush+=';';this.source.push(toPush);}else{this.pushStack('depth'+this.lastContext);}},lookup:function(name){var topStack=this.topStack();this.source.push(topStack+" = ("+topStack+" === null || "+topStack+" === undefined || "+topStack+" === false ? "+
topStack+" : "+this.nameLookup(topStack,name,'context')+");");},pushStringParam:function(string){this.pushStack('depth'+this.lastContext);this.pushString(string);},pushString:function(string){this.pushStack(this.quotedString(string));},push:function(name){this.pushStack(name);},invokeMustache:function(paramSize,original,hasHash){this.populateParams(paramSize,this.quotedString(original),"{}",null,hasHash,function(nextStack,helperMissingString,id){if(!this.usingKnownHelper){this.context.aliases.helperMissing='helpers.helperMissing';this.context.aliases.undef='void 0';this.source.push("else if("+id+"=== undef) { "+nextStack+" = helperMissing.call("+helperMissingString+"); }");if(nextStack!==id){this.source.push("else { "+nextStack+" = "+id+"; }");}}});},invokeProgram:function(guid,paramSize,hasHash){var inverse=this.programExpression(this.inverse);var mainProgram=this.programExpression(guid);this.populateParams(paramSize,null,mainProgram,inverse,hasHash,function(nextStack,helperMissingString,id){if(!this.usingKnownHelper){this.context.aliases.blockHelperMissing='helpers.blockHelperMissing';this.source.push("else { "+nextStack+" = blockHelperMissing.call("+helperMissingString+"); }");}});},populateParams:function(paramSize,helperId,program,inverse,hasHash,fn){var needsRegister=hasHash||this.options.stringParams||inverse||this.options.data;var id=this.popStack(),nextStack;var params=[],param,stringParam,stringOptions;if(needsRegister){this.register('tmp1',program);stringOptions='tmp1';}else{stringOptions='{ hash: {} }';}
if(needsRegister){var hash=(hasHash?this.popStack():'{}');this.source.push('tmp1.hash = '+hash+';');}
if(this.options.stringParams){this.source.push('tmp1.contexts = [];');}
for(var i=0;i<paramSize;i++){param=this.popStack();params.push(param);if(this.options.stringParams){this.source.push('tmp1.contexts.push('+this.popStack()+');');}}
if(inverse){this.source.push('tmp1.fn = tmp1;');this.source.push('tmp1.inverse = '+inverse+';');}
if(this.options.data){this.source.push('tmp1.data = data;');}
params.push(stringOptions);this.populateCall(params,id,helperId||id,fn,program!=='{}');},populateCall:function(params,id,helperId,fn,program){var paramString=["depth0"].concat(params).join(", ");var helperMissingString=["depth0"].concat(helperId).concat(params).join(", ");var nextStack=this.nextStack();if(this.usingKnownHelper){this.source.push(nextStack+" = "+id+".call("+paramString+");");}else{this.context.aliases.functionType='"function"';var condition=program?"foundHelper && ":""
this.source.push("if("+condition+"typeof "+id+" === functionType) { "+nextStack+" = "+id+".call("+paramString+"); }");}
fn.call(this,nextStack,helperMissingString,id);this.usingKnownHelper=false;},invokePartial:function(context){params=[this.nameLookup('partials',context,'partial'),"'"+context+"'",this.popStack(),"helpers","partials"];if(this.options.data){params.push("data");}
this.pushStack("self.invokePartial("+params.join(", ")+");");},assignToHash:function(key){var value=this.popStack();var hash=this.topStack();this.source.push(hash+"['"+key+"'] = "+value+";");},compiler:JavaScriptCompiler,compileChildren:function(environment,options){var children=environment.children,child,compiler;for(var i=0,l=children.length;i<l;i++){child=children[i];compiler=new this.compiler();this.context.programs.push('');var index=this.context.programs.length;child.index=index;child.name='program'+index;this.context.programs[index]=compiler.compile(child,options,this.context);}},programExpression:function(guid){if(guid==null){return"self.noop";}
var child=this.environment.children[guid],depths=child.depths.list;var programParams=[child.index,child.name,"data"];for(var i=0,l=depths.length;i<l;i++){depth=depths[i];if(depth===1){programParams.push("depth0");}
else{programParams.push("depth"+(depth-1));}}
if(depths.length===0){return"self.program("+programParams.join(", ")+")";}else{programParams.shift();return"self.programWithDepth("+programParams.join(", ")+")";}},register:function(name,val){this.useRegister(name);this.source.push(name+" = "+val+";");},useRegister:function(name){if(!this.context.registers[name]){this.context.registers[name]=true;this.context.registers.list.push(name);}},pushStack:function(item){this.source.push(this.nextStack()+" = "+item+";");return"stack"+this.stackSlot;},nextStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot);}
return"stack"+this.stackSlot;},popStack:function(){return"stack"+this.stackSlot--;},topStack:function(){return"stack"+this.stackSlot;},quotedString:function(str){return'"'+str.replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\n/g,'\\n').replace(/\r/g,'\\r')+'"';}};var reservedWords=("break else new var"+" case finally return void"+" catch for switch while"+" continue function this with"+" default if throw"+" delete in try"+" do instanceof typeof"+" abstract enum int short"+" boolean export interface static"+" byte extends long super"+" char final native synchronized"+" class float package throws"+" const goto private transient"+" debugger implements protected volatile"+" double import public let yield").split(" ");var compilerWords=JavaScriptCompiler.RESERVED_WORDS={};for(var i=0,l=reservedWords.length;i<l;i++){compilerWords[reservedWords[i]]=true;}
JavaScriptCompiler.isValidJavaScriptVariableName=function(name){if(!JavaScriptCompiler.RESERVED_WORDS[name]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(name)){return true;}
return false;}})(Handlebars.Compiler,Handlebars.JavaScriptCompiler);Handlebars.precompile=function(string,options){options=options||{};var ast=Handlebars.parse(string);var environment=new Handlebars.Compiler().compile(ast,options);return new Handlebars.JavaScriptCompiler().compile(environment,options);};Handlebars.compile=function(string,options){options=options||{};var compiled;function compile(){var ast=Handlebars.parse(string);var environment=new Handlebars.Compiler().compile(ast,options);var templateSpec=new Handlebars.JavaScriptCompiler().compile(environment,options,undefined,true);return Handlebars.template(templateSpec);}
return function(context,options){if(!compiled){compiled=compile();}
return compiled.call(this,context,options);};};;Handlebars.VM={template:function(templateSpec){var container={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(i,fn,data){var programWrapper=this.programs[i];if(data){return Handlebars.VM.program(fn,data);}else if(programWrapper){return programWrapper;}else{programWrapper=this.programs[i]=Handlebars.VM.program(fn);return programWrapper;}},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(context,options){options=options||{};return templateSpec.call(container,Handlebars,context,options.helpers,options.partials,options.data);};},programWithDepth:function(fn,data,$depth){var args=Array.prototype.slice.call(arguments,2);return function(context,options){options=options||{};return fn.apply(this,[context,options.data||data].concat(args));};},program:function(fn,data){return function(context,options){options=options||{};return fn(context,options.data||data);};},noop:function(){return"";},invokePartial:function(partial,name,context,helpers,partials,data){options={helpers:helpers,partials:partials,data:data};if(partial===undefined){throw new Handlebars.Exception("The partial "+name+" could not be found");}else if(partial instanceof Function){return partial(context,options);}else if(!Handlebars.compile){throw new Handlebars.Exception("The partial "+name+" could not be compiled when running in runtime-only mode");}else{partials[name]=Handlebars.compile(partial);return partials[name](context,options);}}};Handlebars.template=Handlebars.VM.template;;;;

Handlebars.registerHelper('if_eq',function(context,options){if(context==options.hash.compare)
return options.fn(this);return options.inverse(this);});Handlebars.registerHelper('unless_eq',function(context,options){if(context==options.hash.compare)
return options.inverse(this);return options.fn(this);});Handlebars.registerHelper('if_gt',function(context,options){if(parseInt(context)>parseInt(options.hash.compare))
return options.fn(this);return options.inverse(this);});Handlebars.registerHelper('unless_gt',function(context,options){if(context>options.hash.compare)
return options.inverse(this);return options.fn(this);});Handlebars.registerHelper('if_lt',function(context,options){if(context<options.hash.compare)
return options.fn(this);return options.inverse(this);});Handlebars.registerHelper('unless_lt',function(context,options){if(context<options.hash.compare)
return options.inverse(this);return options.fn(this);});Handlebars.registerHelper('if_gteq',function(context,options){if(context>=options.hash.compare)
return options.fn(this);return options.inverse(this);});Handlebars.registerHelper('unless_gteq',function(context,options){if(context>=options.hash.compare)
return options.inverse(this);return options.fn(this);});Handlebars.registerHelper('if_lteq',function(context,options){if(context<=options.hash.compare)
return options.fn(this);return options.inverse(this);});Handlebars.registerHelper('unless_lteq',function(context,options){if(context<=options.hash.compare)
return options.inverse(this);return options.fn(this);});Handlebars.registerHelper('nl2br',function(text){var nl2br=(text+'').replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,'$1'+'<br>'+'$2');return new Handlebars.SafeString(nl2br);});Handlebars.registerHelper('strTrim',function(text){if(typeof text==='string'){return $.trim(text);}
return text;});;;

(function(register){'use strict';function apply(condition,context,options){return condition?options.fn(context):options.inverse(context);}
register('formatMileage',function(value,isNew,options){return hgm.format.mileage(value,isNew,options);});register('formatCurrency',function(value,options){return hgm.format.currency(value,options);});register('formatDate',function(date,options){return hgm.format.date(date,options);});register('formatPhone',hgm.format.phone);register('formatPhoneUri',hgm.format.phoneUri);register('ifAnd',function(left,right,options){return apply(parseInt(left,10)&&parseInt(right,10),this,options);});register('ifOr',function(left,right,options){return apply(parseInt(left,10)||parseInt(right,10),this,options);});register('slice',function(context,block){var offset=parseInt(block.hash.offset,10)||0,limit=parseInt(block.hash.limit,10)||5,len=context.length;offset=offset<len?offset:0;limit=limit+offset<len?limit+offset:len;return context.slice(offset,limit).map(block).join('');});register('ifPhoneRevenue',function(a,options){return apply(a==='Dealix',this,options);});register('getScoreBarWidth',function(number,avg){if(number==avg){return 50;}
else{var score=avg>0&&number>0?50*number/avg:0;return Math.max(3,Math.min(score,95));}});register('ifHeadlinePhone',function(vendor,phone,options){return apply((phone&&vendor!=='Cars'&&vendor!=='Cars.com'),this,options);});register('listingThumbnail',function(url){if(typeof url==='string'&&url.indexOf('internetbrands.com')>=0){url=url.replace(/w=(\d)+/,'w=160');url=url.replace(/h=(\d)+/,'h=120');}
return $.trim(url);});register('debug',function(optionalValue){hgm.debug('Current Context');hgm.debug('====================');hgm.debug(this);if(optionalValue){hgm.debug('Value');hgm.debug('====================');hgm.debug(optionalValue);}});register('getListingId',function(externalId,externalListingId){if(externalListingId){return externalListingId;}
else{var pos=externalId.indexOf('-');if(pos<0){return externalId;}else{return externalId.substring(pos+1);}}});Handlebars.registerHelper('ifNotEmptyString',function(text,options){if($.trim(text)){return options.fn(this);}
return options.inverse(this);});Handlebars.registerHelper('displayHtmlEntities',function(text){return $('<textarea />').html(text).text();});}(Handlebars.registerHelper.bind(Handlebars)));;;

(function(window){'use strict';hgm.listings=hgm.listings||{};hgm.listings.ppc=Class.extend({EXTERNAL_URL:'/listing',listingsUrl:null,container:null,parentContainer:null,template:null,clickTracker:null,numListings:null,numPpcListings:null,numColumns:null,count:0,totalCount:0,wrapper:null,source:0,make:null,model:null,zip:null,range:null,newFlag:null,category:null,categories:null,yearLow:null,yearHigh:null,priceLow:null,priceHigh:null,noPriceFlag:null,title:'',init:function(container,template,wrapper){this.container=container;this.template=Handlebars.compile(template.html());this.wrapper=wrapper;},setParentContainer:function(parentContainer){this.parentContainer=parentContainer;},setListingsUrl:function(listingsUrl){this.listingsUrl=listingsUrl;},getListingsUrl:function(){return this.listingsUrl+'&range='+this.range+'&zip='+this.zip;},setClickTracker:function(clickTracker){this.clickTracker=clickTracker;},setNumListings:function(numListings){this.numListings=numListings;},setNumPpcListings:function(numPpcListings){this.numPpcListings=numPpcListings;},setNumColumns:function(numColumns){this.numColumns=numColumns;},getCount:function(){return this.count;},getTotalCount:function(){return this.totalCount;},setMake:function(make){this.make=make;},setModel:function(model){this.model=model;},setZip:function(zip){this.zip=zip;},getZip:function(){return this.zip;},setRange:function(range){this.range=range;},getRange:function(){return this.range;},setNewFlag:function(newFlag){this.newFlag=newFlag;},setCategory:function(category){this.category=category;},setCategories:function(categories){this.categories=categories;},setYearLow:function(yearLow){this.yearLow=yearLow;},setYearHigh:function(yearHigh){this.yearHigh=yearHigh;},setPriceLow:function(priceLow){this.priceLow=priceLow;},setPriceHigh:function(priceHigh){this.priceHigh=priceHigh;},setNoPriceFlag:function(noPriceFlag){this.noPriceFlag=noPriceFlag;},setTitleStr:function(title){this.title=title;},setSource:function(source){this.source=source;},getSource:function(){return this.source;},load:function(){if(this.zip){var self=this;hgm.cookie.set('hgm_ppc_zip',self.zip);$.getJSON('/blocks/listings-ppc/retrieve',{'numListings':self.numListings,'numPpcListings':self.numPpcListings,'numColumns':self.numColumns,'make':self.make,'model':self.model,'zip':self.zip,'range':self.range,'new-flag':self.newFlag,'category':self.category,'categories':self.categories,'year-low':self.yearLow,'year-high':self.yearHigh,'price-low':self.priceLow,'price-high':self.priceHigh,'noprice-flag':self.noPriceFlag},function(data){self.display(data);});}},display:function(data){this.container.html(this.template(data.listings));this.count=0;if(data&&data.count){this.totalCount=data.count;}
if(data&&data.listings){this.count=data.listings.length;}
if(this.count>0){if(this.container.closest('#'+this.wrapper).length===0){this.container.wrap('<div id="'+this.wrapper+'">');$('#'+this.wrapper).append('<div class="tcc-powered" style="display:none">Listings Powered by<a href="http://www.thecarconnection.com/used-cars" class="logo">&nbsp;</a><a class="more" href="'+this.getListingsUrl()+'" >See more listings &#187;</a></div>');$('#'+this.wrapper).append('<div class="clear"></div>');if(this.title){$('#'+this.wrapper).prepend('<h2 class="sponsored">'+this.title+'</h2>');}}else{if(this.title){$('#'+this.wrapper+' .sponsored').html(this.title);}
this.container.closest('#'+this.wrapper).show();}
if(this.parentContainer){$(this.parentContainer).change();$(this.parentContainer).find('h2').show();}
$('#'+this.wrapper).parent().find('h2').show();}else{if(this.container.closest('#'+this.wrapper).length>0){this.container.closest('#'+this.wrapper).hide();$('#'+this.wrapper).parent().find('h2').hide();}}
this.initClick();},initClick:function(){var self=this,source=self.getSource(),listingLink='',src='';if(source&&source!=='0'){src='&src='+source;}
this.container.children('.car.ppc').click(function(){if(_gaq&&self.clickTracker){_gaq.push(['_trackEvent','Listings Module',self.clickTracker,'PPC Click']);}
var win=window.open(self.EXTERNAL_URL+'/'+$(this).data('vin'),'_blank');win.focus();});this.container.children('.car.noppc').click(function(){hgm.storage.set('hgm.listings.module.click',self.clickTracker);if(self.clickTracker){listingLink=$(this).data('vin');hgm.trackEvent('Listings Module',self.clickTracker,'Listings Click',0,false,function(){if(window.location.href.indexOf('/inventory?')<0){window.location=self.getListingsUrl()+'#vin='+listingLink+src;}});}});$('.listings-and-ppc .allListingsLink').click(function(event){event.preventDefault();hgm.storage.set('hgm.listings.module.click',self.clickTracker);if(self.clickTracker){listingLink=$(this).attr('href');hgm.trackEvent('Listings Module',self.clickTracker,'All Listings Click',0,false,function(){window.location=listingLink;});}});}});}(window));;;

$(function(){var listingsAndPpcZip,listingsAndPpcRange;if(typeof usedTabContainer==='undefined'){usedTabContainer='';}
$('.listings-and-ppc',usedTabContainer).live('change',function(event){$(this).slideDown();$('.change-zip select[name="listingsRange"]').val(listingsPpc.getRange());$('.change-zip input').val(listingsPpc.getZip());updateLocationInUI(hgm.geo.getCached());});$('.change-zip input',usedTabContainer).live('click',function(){this.select();});$('.change-zip input',usedTabContainer).live('keyup',function(){if($(this).val().length===5){refreshPpc();}});$('.change-zip select[name="listingsRange"]').live('change',refreshPpc);function refreshPpc(){$('.change-zip input',usedTabContainer).qtip('destroy');if(listingsAndPpcZip!==$('.change-zip input',usedTabContainer).val()){hgm.geo.setZip($('.change-zip input').val()).done(function(geoData){listingsAndPpcZip=geoData.zip;listingsAndPpcRange=$('.change-zip select[name="listingsRange"]').val();updateLocationInUI(geoData);if($('#listings-ppc-block').length){loadPpc();}}).fail(function(){$('.change-zip input').qtip(getQtipConfig('Please enter a valid ZIP code'));});}else if(listingsAndPpcRange!==$('.change-zip select[name="listingsRange"]')){listingsAndPpcRange=$('.change-zip select[name="listingsRange"]').val();updateLocationInUI(hgm.geo.getCached());if($('#listings-ppc-block').length){loadPpc();}}}
function loadPpc(){listingsPpc.setZip(listingsAndPpcZip);listingsPpc.setRange(listingsAndPpcRange);listingsPpc.load();}
function updateLocationInUI(geoData){var zipCode=geoData.zip;$('.change-zip input',usedTabContainer).val(zipCode);$('.listings-and-ppc .showCount').html(listingsPpc.getCount());$('.listings-and-ppc .totalCount').html(listingsPpc.getTotalCount());$('.listings-and-ppc .allListingsLink').attr('href',listingsPpc.getListingsUrl());}
function getQtipConfig(msg){return{style:{tip:true,classes:"ui-tooltip-dark ui-tooltip-shadow ui-tooltip-rounded"},content:msg,position:{my:"bottom center",at:"top center"},show:{when:false,ready:true},hide:'blur'};}});;;
/*	
 *	jQuery dotdotdot 1.0.2
 *	
 *	Copyright (c) 2011 Fred Heusschen
 *	www.frebsite.nl
 *
 *	Plugin website:
 *	dotdotdot.frebsite.nl
 *
 *	Dual licensed under the MIT and GPL licenses.
 *	http://en.wikipedia.org/wiki/MIT_License
 *	http://en.wikipedia.org/wiki/GNU_General_Public_License
 */
 (function(e){function k(a,b,c,d){var g=a.contents(),f=!1;a.empty();for(var h=0,o=g.length;h<o;h++){if(f)break;var j=g[h],i=e(j);typeof j!="undefined"&&(a.append(i),d&&a.append(d),j.nodeType==3?b.innerHeight()>c.maxHeight&&(f=m(i,b,c)):f=k(i,b,c,d),f||d&&d.remove())}return f}function m(a,b,c){var d=!1,g=a[0];if(typeof g=="undefined")return!1;var f=c.wrap=="letter"?"":" ",h=i(g).split(f);n(g,h.join(f)+c.ellipsis);for(var e=h.length-1;e>=0;e--)if(b.innerHeight()>c.maxHeight)n(g,i(g).substring(0,i(g).length-
(h[e].length+f.length+c.ellipsis.length))+c.ellipsis);else{d=!0;break}d||(d=a.parent(),a.remove(),d=m(d.contents().last(),b,c));return d}function n(a,b){if(a.innerText)a.innerText=b;else if(a.nodeValue)a.nodeValue=b;else if(a.textContent)a.textContent=b}function i(a){return a.innerText?a.innerText:a.nodeValue?a.nodeValue:a.textContent?a.textContent:""}function p(a,b){if(typeof a=="undefined")return!1;if(!a)return!1;return typeof a=="string"?(a=e(a,b),a.length?a:!1):typeof a=="object"?typeof a.jquery==
"undefined"?!1:a:!1}function q(a,b){if(!a)return!1;b=typeof b=="string"?"dotdotdot: "+b:["dotdotdot:",b];window.console&&window.console.log&&window.console.log(b);return!1}if(!e.fn.dotdotdot)e.fn.dotdotdot=function(a){if(this.length==0)return q(!0,'No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){e(this).dotdotdot(a)});var b=this;b.bind_events=function(){b.bind("update.dot"+d,function(a){a.stopPropagation();var a=b.innerHeight(),d=["paddingTop","paddingBottom"];
for(z=0,l=d.length;z<l;z++){var e=parseInt(b.css(d[z]));isNaN(e)&&(e=0);a-=e}c.maxHeight=typeof c.height=="number"?c.height:a;f.empty();f.append(g.clone(!0));a=!1;c.afterElement&&(a=c.afterElement.clone(!0),c.afterElement.remove());f.innerHeight()>c.maxHeight&&k(f,f,c,a)});b.bind("destroy.dot"+d,function(a){a.stopPropagation();b.unbind_events();b.empty();b.append(g)})};b.unbind_events=function(){b.unbind(".dot"+d)};b.find("> .dotdotdot").length>0&&b.trigger("destroy");var c=c=e.extend(!0,{},e.fn.dotdotdot.defaults,
a),d=e.fn.dotdotdot.serial++,g=b.contents(),f=b.wrapInner("<"+c.wrapper+' class="dotdotdot" />').find("> .dotdotdot");c.afterElement=p(c.after,f);b.bind_events();b.trigger("update");return b},e.fn.dotdotdot.serial=0,e.fn.dotdotdot.defaults={wrapper:"div",ellipsis:"... ",wrap:"word",after:null,height:null,debug:!1}})(jQuery);;;

(function(){'use strict';var ELEMENT_IDS=['mpg','engine','epa-class','drivetrain','passengers','doors','body'];hgm.pricecheck={create:function($container,yrmdId){return new hgm.pricecheck.Ui($container,yrmdId);}};hgm.pricecheck.Ui=Class.extend({$slider:null,$style:null,specsById:null,styles:null,init:function($container,yrmdId){this.specsById={};this.styles=[];this.$slider=$container.find('#slider');this.$style=$container.find('#style');this.$msrp=$container.find('#msrp');this.$invoice=$container.find('#invoice');this.$specsLink=$container.find('.spec-detail-link');this.$priceWithOptionsLink=$container.find('.price-with-options');ELEMENT_IDS.forEach(function(id){this.specsById[id]=$container.find('#'+id);}.bind(this));this.$slider.slider({value:1,min:1,max:1});this.load(yrmdId);},load:function(yrmdId){$.getJSON('/blocks/price-check/loadspecs',{yrmd:yrmdId}).done(function(styles){this.styles=styles;this.$slider.slider({value:1,min:1,max:this.styles.length,slide:$.proxy(function(event,$slider){this.viewStyle($slider.value-1);},this),change:$.proxy(function(e,ui){$(ui.handle).show();if(ui.value===this.styles.length){$(ui.handle).css('left',$('.slider-wrapper').width()-40);}},this)});this.$slider.append($('<div class="slider-block"></div>'));var left=5,totalBlocks=this.styles.length-1,blockWidth=100/totalBlocks,$block=this.$slider.find('.slider-block');$.each(this.styles,function(){$block.append('<div class="slider-divider-line" style="left:'+left+'%" />');left+=blockWidth;});$block.css('width','100%');}.bind(this));},viewStyle:function(index){var style=this.styles[index],specs=style.specs;this.$style.text(style.name);this.$msrp.text(style.msrp);this.$invoice.text(style.invoice);this.$specsLink.attr('href',style.link);this.$priceWithOptionsLink.attr('href',style.priceWithOptionsLink);ELEMENT_IDS.forEach(function(id){this.specsById[id].text(specs[id]);}.bind(this));}});}());;;

hgm.listingsLink=hgm.listingsLink||{};hgm.listingsLink.update=function(){var listingLinks;listingLinks=$('a[href^="/inventory?make="]').filter(function(index){if(!$(this).attr('href').match(/(zip|city|state)/)){return this;}});if(listingLinks){hgm.detectLocation(function(zipCode){hgm.debug(listingLinks);$.each(listingLinks,function(key,val){var temp=$(val).attr('href');$(val).attr('href',temp+'&zip='+zipCode);});});}};;;

(function(){'use strict';var STORAGE_KEY='hgm.vote.review';hgm.vote=hgm.vote||{};hgm.vote.review={Model:Class.extend({reviews:null,init:function(){this.reviews=hgm.storage.getObject(STORAGE_KEY,[]);},isEmpty:function(){return this.reviews.length===0;},isHelpful:function(review){return this.reviews.indexOf(Number(review))!==-1;},markHelpful:function(review){if(this.isHelpful(review)){return false;}
else{this.reviews.push(Number(review));hgm.storage.setObject(STORAGE_KEY,this.reviews);$.ajax({url:'/blocks/vote-review/vote-helpful',data:{review:review}});return true;}},getTotalHelpful:function(review){var deferred=$.Deferred();$.getJSON('/blocks/vote-review/totals?review='+review,function(data){if(data){deferred.resolve(data);}else{deferred.reject(0);}});return deferred.promise();}})};}());;;

function initUI(){'use strict';$('.recent-user-reviews-wrapper .ratings-brkdwn-lvl').waypoint(function(direction){$(this).animate({'width':$(this).parent().width()*$(this).data('width')/50+'px'});},{offset:'100%',triggerOnce:true});var model=new hgm.vote.review.Model();var voteCount=0;var moreText='+  More &#187;';var lessText='- Less &#187;';$('.thumbUpCount').each(function(index){var self=this;model.getTotalHelpful($(this).data('id')).done(function(data){$(self).html(data);}).fail(function(data){$(self).html(0);});$(self).parent().find('.yesBtn').click(function(event){if(model.markHelpful($(self).data('id'))){if($(self).html()===''){voteCount=0;}else{voteCount=parseInt($(self).html());}
$(self).html(voteCount+1);}});});$('.user-review .content .text').each(function(index){var self=this;$(self).find('.more-less').toggle(function(){$(this).parent().find('.less-content').toggle();$(this).parent().find('.more-content').toggle('slow');$(this).html(lessText);},function(){$(this).parent().find('.more-content').toggle();$(this).parent().find('.less-content').toggle('slow');$(this).html(moreText);});});};;

var UsedListing={};UsedListing.eventListener_make=function(formNum){var eventData={formNum:formNum},$elementMake=$('#usedlistings'+formNum+' .make-select'),$elementModel=$('#usedlistings'+formNum+' .model-select'),model='';$elementMake.bind('change',eventData,function(event){if($elementMake.val()){var $this=$(this),$body=$('body');$body.css('cursor','wait');if($this.val()){if(typeof UsedListing.currentModel!=='undefined'){model='/model/'+escape(UsedListing.currentModel);}
$elementModel.load('/blocks/find-used-listing/getModel/make/'+escape($this.val())+model,function(){$body.css('cursor','default');if($elementModel.find('option').length!==1){$elementModel.removeAttr('disabled');if($elementModel.data('selectBoxIt')){$elementModel.data('selectBoxIt').refresh();}}else{$elementModel.html('<option value="">Select Model</option>');$elementModel.prop('disabled',true);if($elementModel.data('selectBoxIt')){$elementModel.data('selectBoxIt').refresh();}}});}}else{$elementModel.prop('disabled',true);$elementModel.html('<option value="">Select Model</option>');if($elementModel.data('selectBoxIt')){$elementModel.data('selectBoxIt').refresh();}}});$elementMake.trigger('change');};UsedListing.eventListener_model=function(formNum){var eventData={formNum:formNum};$('#usedlistings'+formNum+' .model-select').bind('change',eventData,function(event){var $zip=$('#usedlistings'+formNum+' .used-listing-zipcode');if(!$zip.val()){$zip.focus();}});};UsedListing.initForms=function(formNum){UsedListing.eventListener_make(formNum);UsedListing.eventListener_model(formNum);};function makeQtip(element,errormessage){$(element).qtip({style:{padding:1,background:'#FE511C',color:'white',textAlign:'center',border:{width:0,radius:10,color:'#FE511C'},tip:true,name:'light'},content:errormessage,position:{corner:{tooltip:'topMiddle',target:'bottomMiddle'}},show:{when:false,ready:true},hide:{when:{event:'click'},effect:{type:'blur'}}});}
function getListing(url,formNum){var elementYear=$('#usedlistings'+formNum+' .year-select'),elementMake=$('#usedlistings'+formNum+' .make-select'),elementModel=$('#usedlistings'+formNum+' .model-select'),elementZip=$('#usedlistings'+formNum+' .used-listing-zipcode'),zipError=$('#usedlistings'+formNum+' .zip-error-msg'),newYear='';elementZip.qtip('destroy');if(elementYear.length){newYear=elementYear.val();}else{newYear=0;}
if(!elementMake.val()){makeQtip(elementMake,'Please select a make');return false;}
hgm.geo.setZip(elementZip.val()).done(function(geoData){elementZip.qtip('destroy');document.location="/inventory?"+$.param({make:elementMake.val(),model:elementModel.val(),zip:geoData.zip,'new-flag':newYear});}).fail(function(){makeQtip(elementZip,'Please enter a valid ZIP code');elementZip.focus();});}
$(function(){var $zip=$('input.used-listing-zipcode');hgm.geo.subscribe(function(geoData){$zip.val(geoData.zip);});$zip.bind('focusin',function(){if($zip.attr('placeholder')==='Zip code'){$zip.attr('placeholder','');}});$zip.bind('focusout',function(){if(!$zip.attr('placeholder')){$zip.attr('placeholder','Zip code');}});});function handleEnter(field,event,url,formNum){var keyCode=event.keyCode?event.keyCode:event.which?event.which:event.charCode;$(event.target).qtip('destroy');if(keyCode===13){getListing(url,formNum);}};;

(function($){$.fn.adGallery=function(options){var defaults={loader_image:'/images/loading_rect.gif',start_at_index:0,description_wrapper:false,thumb_opacity:0.7,animate_first_image:false,animation_speed:400,width:false,height:'auto',display_next_and_prev:true,display_back_and_forward:false,display_slider:true,scroll_jump:0,slideshow:{enable:true,autostart:false,speed:3000,start_label:'&nbsp;',stop_label:'&nbsp;',stop_on_scroll:true,countdown_prefix:'(',countdown_sufix:')',onStart:false,onStop:false},effect:'fade',enable_keyboard_move:true,cycle:true,callbacks:{init:false,afterImageVisible:false,beforeImageVisible:false},gaq:false};var settings=$.extend(false,defaults,options);if(options&&options.slideshow){settings.slideshow=$.extend(false,defaults.slideshow,options.slideshow);settings.slideshow.gaq=settings.gaq;}
if(!settings.slideshow.enable){settings.slideshow.autostart=false;}
var galleries=[];$(this).each(function(){var gallery=new AdGallery(this,settings);galleries[galleries.length]=gallery;});return galleries;};function VerticalSlideAnimation(img_container,direction,desc){var current_top=parseInt(img_container.css('top'),10);if(direction=='left'){var old_image_top='-'+this.image_wrapper_height+'px';img_container.css('top',this.image_wrapper_height+'px');}else{var old_image_top=this.image_wrapper_height+'px';img_container.css('top','-'+this.image_wrapper_height+'px');}
if(desc){desc.css('bottom','-'+desc[0].offsetHeight+'px');desc.animate({bottom:0},this.settings.animation_speed*2);}
if(this.current_description){this.current_description.animate({bottom:'-'+this.current_description[0].offsetHeight+'px'},this.settings.animation_speed*2);}
return{old_image:{top:old_image_top},new_image:{top:current_top}};}
function HorizontalSlideAnimation(img_container,direction,desc){var current_left=parseInt(img_container.css('left'),10);if(direction=='left'){var old_image_left='-'+this.image_wrapper_width+'px';img_container.css('left',this.image_wrapper_width+'px');}else{var old_image_left=this.image_wrapper_width+'px';img_container.css('left','-'+this.image_wrapper_width+'px');}
if(desc){desc.css('bottom','-'+desc[0].offsetHeight+'px');desc.animate({bottom:0},this.settings.animation_speed*2);}
if(this.current_description){this.current_description.animate({bottom:'-'+this.current_description[0].offsetHeight+'px'},this.settings.animation_speed*2);}
return{old_image:{left:old_image_left},new_image:{left:current_left}};}
function ResizeAnimation(img_container,direction,desc){var image_width=img_container.width();var image_height=img_container.height();var current_left=parseInt(img_container.css('left'),10);var current_top=parseInt(img_container.css('top'),10);img_container.css({width:0,height:0,top:this.image_wrapper_height/2,left:this.image_wrapper_width/2});return{old_image:{width:0,height:0,top:this.image_wrapper_height/2,left:this.image_wrapper_width/2},new_image:{width:image_width,height:image_height,top:current_top,left:current_left}};}
function FadeAnimation(img_container,direction,desc){img_container.css('opacity',0);return{old_image:{opacity:0},new_image:{opacity:1}};}
function NoneAnimation(img_container,direction,desc){img_container.css('opacity',0);return{old_image:{opacity:0},new_image:{opacity:1},speed:0};}
function AdGallery(wrapper,settings){this.init(wrapper,settings);}
AdGallery.prototype={wrapper:false,image_wrapper:false,gallery_info:false,nav:false,loader:false,preloads:false,thumbs_wrapper:false,scroll_back:false,scroll_forward:false,next_link:false,prev_link:false,slideshow:false,image_wrapper_width:0,image_wrapper_height:0,current_index:0,current_image:false,current_description:false,nav_display_width:0,settings:false,images:false,in_transition:false,animations:false,init:function(wrapper,settings){var context=this;this.wrapper=$(wrapper);this.settings=settings;this.setupElements();this.setupAnimations();if(this.settings.width){this.image_wrapper_width=this.settings.width;this.image_wrapper.width(this.settings.width);this.wrapper.width(this.settings.width);}else{this.image_wrapper_width=this.image_wrapper.width();}
this.nav_display_width=this.nav.width();this.current_index=0;this.current_image=false;this.current_description=false;this.in_transition=false;this.findImages();if(this.settings.height){if(this.settings.height=='auto'){this.tallest_image_ratio=Math.max.apply(Math,$.map(this.images,function(e){return e.size&&e.size.width?e.size.height/e.size.width:0;}));this.tallest_image_ratio=Math.min(0.75,this.tallest_image_ratio);this.image_wrapper_height=this.image_wrapper_width*this.tallest_image_ratio;this.image_wrapper.height(this.image_wrapper_height);}
else{this.image_wrapper_height=this.settings.height;this.image_wrapper.height(this.settings.height);}}else{this.image_wrapper_height=this.image_wrapper.height();}
if(this.settings.display_next_and_prev){this.initNextAndPrev();}
var nextimage_callback=function(callback){return context.nextImage(callback);};this.slideshow=new AdGallerySlideshow(nextimage_callback,this.settings.slideshow);this.controls.find('.ad-prev').after(this.slideshow.create());if(this.settings.slideshow.enable){this.slideshow.enable();}else{this.slideshow.disable();}
if(this.settings.display_back_and_forward){this.initBackAndForward();}
if(this.settings.display_slider){this.initSlider();}
if(this.settings.enable_keyboard_move){this.initKeyEvents();}
this.initCookie();var start_at=parseInt(this.settings.start_at_index,10);if(window.location.hash&&window.location.hash.indexOf('#ad-image')===0){start_at=window.location.hash.replace(/[^0-9]+/g,'');if((start_at*1)!=start_at){start_at=this.settings.start_at_index;}}
else{var hash=parseInt(window.location.hash.substring(1));if(!isNaN(hash)){var img=this.thumbs_wrapper.find('img#img_'+hash);if(img){var start=this.thumbs_wrapper.find('li').index(img.parent().parent());if(start>=0){start_at=start;}}}}
this.loading(true);this.showImage(start_at,function(){if(context.settings.slideshow.autostart){context.preloadImage(start_at+1);context.slideshow.start();}});this.fireCallback(this.settings.callbacks.init);},setupAnimations:function(){this.animations={'slide-vert':VerticalSlideAnimation,'slide-hori':HorizontalSlideAnimation,'resize':ResizeAnimation,'fade':FadeAnimation,'none':NoneAnimation};},setupElements:function(){this.controls=this.wrapper.find('.ad-controls');this.gallery_info=$('<p class="ad-info"></p>');this.controls.append(this.gallery_info);this.image_wrapper=this.wrapper.find('.ad-image-wrapper');this.image_wrapper.empty();this.nav=this.wrapper.find('.ad-nav');this.thumbs_wrapper=this.nav.find('.ad-thumbs');this.preloads=$('<div class="ad-preloads"></div>');this.loader=$('<img class="ad-loader" src="'+this.settings.loader_image+'">');this.image_wrapper.append(this.loader);this.loader.hide();$(document.body).append(this.preloads);},loading:function(bool){if(bool){this.loader.show();}else{this.loader.hide();}},addAnimation:function(name,fn){if($.isFunction(fn)){this.animations[name]=fn;}},findImages:function(){var context=this;this.images=[];var thumb_wrapper_width=0;var thumbs_loaded=0;var thumbs=this.thumbs_wrapper.find('a');var thumb_count=thumbs.length;if(this.settings.thumb_opacity<1){thumbs.find('img').css('opacity',this.settings.thumb_opacity);}
thumbs.each(function(i){var link=$(this);var image_src=link.attr('href');var thumb=link.find('img');if(!context.isImageLoaded(thumb[0])){thumb.load(function(){thumb_wrapper_width+=this.parentNode.parentNode.offsetWidth;thumbs_loaded++;});}else{thumb_wrapper_width+=thumb[0].parentNode.parentNode.offsetWidth;thumbs_loaded++;}
link.addClass('ad-thumb'+i);link.click(function(event){event.preventDefault();context.showImage(i);context.slideshow.stop();if(context.settings.gaq){context.settings.gaq.push(['_trackEvent',"Generic Gallery2 ","Generic Gallery2 Thumb Clicked","Thumb Clicked"]);}
return false;}).hover(function(){if(!$(this).is('.ad-active')&&context.settings.thumb_opacity<1){$(this).find('img').fadeTo(300,1);}
context.preloadImage(i);},function(){if(!$(this).is('.ad-active')&&context.settings.thumb_opacity<1){$(this).find('img').fadeTo(300,context.settings.thumb_opacity);}});var link=false;if(thumb.data('ad-link')){link=thumb.data('ad-link');}else if(thumb.attr('longdesc')&&thumb.attr('longdesc').length){link=thumb.attr('longdesc');}
var desc=false;if(thumb.data('ad-desc')){desc=thumb.data('ad-desc');}else if(thumb.attr('alt')&&thumb.attr('alt').length){desc=thumb.attr('alt');}
var title=false;if(thumb.data('ad-title')){title=thumb.data('ad-title');}else if(thumb.attr('title')&&thumb.attr('title').length){title=thumb.attr('title');}
var ids=thumb.prop('id').match(/\d+/);context.images[i]={thumb:thumb.attr('src'),image:image_src,error:false,preloaded:false,desc:desc,title:title,size:thumb.data('width')&&thumb.data('height')?{width:thumb.data('width'),height:thumb.data('height')}:null,link:link,imgId:(ids!=null)?ids[0]:''};});var inter=setInterval(function(){if(thumb_count==thumbs_loaded){thumb_wrapper_width-=Math.ceil(thumb_wrapper_width/thumb_count/2);var list=context.nav.find('.ad-thumb-list');list.css('width',thumb_wrapper_width+'px');var i=1;var last_height=list.height(),maxTimes=Math.ceil(thumb_wrapper_width/thumb_count*2);while(i<maxTimes){list.css('width',(thumb_wrapper_width+i)+'px');if(last_height!=list.height()){break;}
last_height=list.height();i++;}
clearInterval(inter);}},100);},initKeyEvents:function(){},initNextAndPrev:function(){this.next_link=this.controls.find(".ad-next");this.prev_link=this.controls.find(".ad-prev");var context=this;this.prev_link.click(function(){context.prevImage();context.slideshow.stop();if(context.settings.gaq){context.settings.gaq.push(['_trackEvent',"Generic Gallery2 ","Generic Gallery2 Prev clicked","Prev clicked"]);}});this.next_link.click(function(){context.nextImage();context.slideshow.stop();if(context.settings.gaq){context.settings.gaq.push(['_trackEvent',"Generic Gallery2 ","Generic Gallery2 Next clicked","Next clicked"]);}});},initBackAndForward:function(){var context=this;this.scroll_forward=$('<div class="ad-forward"></div>');this.scroll_back=$('<div class="ad-back"></div>');this.nav.append(this.scroll_forward);this.nav.prepend(this.scroll_back);var has_scrolled=0;var thumbs_scroll_interval=false;$(this.scroll_back).add(this.scroll_forward).click(function(){var width=context.nav_display_width-50;if(context.settings.scroll_jump>0){var width=context.settings.scroll_jump;}
if($(this).is('.ad-forward')){var left=context.thumbs_wrapper.scrollLeft()+width;}else{var left=context.thumbs_wrapper.scrollLeft()-width;}
if(context.settings.slideshow.stop_on_scroll){context.slideshow.stop();}
context.thumbs_wrapper.animate({scrollLeft:left+'px'});return false;}).css('opacity',0.6).hover(function(){var direction='left';if($(this).is('.ad-forward')){direction='right';}
thumbs_scroll_interval=setInterval(function(){has_scrolled++;if(has_scrolled>30&&context.settings.slideshow.stop_on_scroll){context.slideshow.stop();}
var left=context.thumbs_wrapper.scrollLeft()+1;if(direction=='left'){left=context.thumbs_wrapper.scrollLeft()-1;}
context.thumbs_wrapper.scrollLeft(left);},10);$(this).css('opacity',1);},function(){has_scrolled=0;clearInterval(thumbs_scroll_interval);$(this).css('opacity',0.6);});},initSlider:function(){var context=this;var firstThumb=this.thumbs_wrapper.find('li')[0];if(firstThumb==undefined){this.slider=false;return;}
var itemWidth=firstThumb.offsetWidth,max=itemWidth*(this.thumbs_wrapper.find('li').length)-context.thumbs_wrapper.width();if(max<=itemWidth){this.slider=false;return;}
this.slider=this.wrapper.find('.ad-slider .slider-range');this.slider.slider({max:max,animate:false,slide:function(event,ui){context.thumbs_wrapper.scrollLeft(ui.value);},stop:function(event,ui){if(context.settings.gaq){context.settings.gaq.push(['_trackEvent',"Generic Gallery2 ","Generic Gallery2 Slider moved","Slider moved"]);}}});this.slider.width(this.wrapper.width()-this.slider.find('.ui-slider-handle').width());},initCookie:function(){var gids=[];$.each(this.images,function(index,image){gids.push(image.imgId);});},_afterShow:function(){this.gallery_info.html((this.current_index+1)+'/'+this.images.length);if(!this.settings.cycle){this.prev_link.show().css('height',this.image_wrapper_height);this.next_link.show().css('height',this.image_wrapper_height);if(this.current_index==(this.images.length-1)){this.next_link.hide();}
if(this.current_index==0){this.prev_link.hide();}}
this.fireCallback(this.settings.callbacks.afterImageVisible);},_getContainedImageSize:function(image_width,image_height){if(image_height>this.image_wrapper_height){var ratio=image_width/image_height;image_height=this.image_wrapper_height;image_width=this.image_wrapper_height*ratio;}
if(image_width>this.image_wrapper_width){var ratio=image_height/image_width;image_width=this.image_wrapper_width;image_height=this.image_wrapper_width*ratio;}
return{width:image_width,height:image_height};},_centerImage:function(img_container,image_width,image_height,vert){img_container.css('top','0px');if(typeof(vert)!='undefined'&&vert){if(image_height<this.image_wrapper_height){var dif=this.image_wrapper_height-image_height;img_container.css('top',(dif/2)+'px');}}
img_container.css('left','0px');if(image_width<this.image_wrapper_width){var dif=this.image_wrapper_width-image_width;img_container.css('left',(dif/2)+'px');}},_getDescription:function(image){var desc=false;if(image.desc.length||image.title.length){var title='';if(image.title.length){title='<strong class="ad-description-title">'+image.title+'</strong>';}
var desc='';if(image.desc.length){desc='<span>'+image.desc+'</span>';}
desc=$('<p class="ad-image-description">'+title+desc+'</p>');}
return desc;},showImage:function(index,callback){if(this.images[index]&&!this.in_transition){var context=this;var image=this.images[index];this.in_transition=true;if(!image.preloaded){this.loading(true);this.preloadImage(index,function(){context.loading(false);context._showWhenLoaded(index,callback);});}else{this._showWhenLoaded(index,callback);}
if(this.images[index].imgId!=''){}}},_showWhenLoaded:function(index,callback){if(this.images[index]){var context=this;var image=this.images[index];var img_container=$(document.createElement('div')).addClass('hgm-ad-image');var img=$(new Image()).attr('src',image.image);if(image.link){var link=$('<a href="'+image.link+'"></a>');link.append(img);img_container.append(link);this.controls.find('.ad-enlarge').attr('href',image.link).removeClass('disable');}else{img_container.append(img);this.controls.find('.ad-enlarge').attr('href','').addClass('disable');}
this.image_wrapper.prepend(img_container);var size=this._getContainedImageSize(image.size.width,image.size.height);img.attr('width',size.width);img.attr('height',size.height);img_container.css({width:size.width+'px',height:size.height+'px'});this._centerImage(img_container,size.width,size.height);var desc=this._getDescription(image,img_container);if(desc){if(!this.settings.description_wrapper){img_container.append(desc);var width=size.width-parseInt(desc.css('padding-left'),10)-parseInt(desc.css('padding-right'),10);desc.css('width',width+'px');}else{this.settings.description_wrapper.append(desc);}}
this.highLightThumb(this.nav.find('.ad-thumb'+index));var direction='right';if(this.current_index<index){direction='left';}
this.fireCallback(this.settings.callbacks.beforeImageVisible);if(this.current_image||this.settings.animate_first_image){var animation_speed=this.settings.animation_speed;var easing='swing';var animation=this.animations[this.settings.effect].call(this,img_container,direction,desc);if(typeof animation.speed!='undefined'){animation_speed=animation.speed;}
if(typeof animation.easing!='undefined'){easing=animation.easing;}
if(this.current_image){var old_image=this.current_image;var old_description=this.current_description;old_image.animate(animation.old_image,animation_speed,easing,function(){old_image.remove();if(old_description)old_description.remove();});}
img_container.animate(animation.new_image,animation_speed,easing,function(){context.current_index=index;context.current_image=img_container;context.current_description=desc;context.in_transition=false;context._afterShow();context.fireCallback(callback);});}else{this.current_index=index;this.current_image=img_container;context.current_description=desc;this.in_transition=false;context._afterShow();this.fireCallback(callback);}}},nextIndex:function(){if(this.current_index==(this.images.length-1)){if(!this.settings.cycle){return false;}
var next=0;}else{var next=this.current_index+1;}
return next;},nextImage:function(callback){var next=this.nextIndex();if(next===false)return false;this.preloadImage(next+1);this.showImage(next,callback);return true;},prevIndex:function(){if(this.current_index==0){if(!this.settings.cycle){return false;}
var prev=this.images.length-1;}else{var prev=this.current_index-1;}
return prev;},prevImage:function(callback){var prev=this.prevIndex();if(prev===false)return false;this.preloadImage(prev-1);this.showImage(prev,callback);return true;},preloadAll:function(){var context=this;var i=0;function preloadNext(){if(i<context.images.length){i++;context.preloadImage(i,preloadNext);}}
context.preloadImage(i,preloadNext);},preloadImage:function(index,callback){if(this.images[index]){var image=this.images[index];if(!this.images[index].preloaded){var img=$(new Image());img.attr('src',image.image);if(!this.isImageLoaded(img[0])){this.preloads.append(img);var context=this;img.load(function(){image.preloaded=true;image.size={width:this.width,height:this.height};context.fireCallback(callback);}).error(function(){image.error=true;image.preloaded=false;image.size=false;});}else{image.preloaded=true;image.size={width:img[0].width,height:img[0].height};this.fireCallback(callback);}}else{this.fireCallback(callback);}}},isImageLoaded:function(img){if(typeof img.complete!='undefined'&&!img.complete){return false;}
if(typeof img.naturalWidth!='undefined'&&img.naturalWidth==0){return false;}
return true;},highLightThumb:function(thumb){this.thumbs_wrapper.find('.ad-active').removeClass('ad-active');thumb.addClass('ad-active');if(this.settings.thumb_opacity<1){this.thumbs_wrapper.find('a:not(.ad-active) img').fadeTo(300,this.settings.thumb_opacity);thumb.find('img').fadeTo(300,1);}
var left=thumb[0].parentNode.offsetLeft;left-=(this.nav_display_width/2)-(thumb[0].offsetWidth/2);this.thumbs_wrapper.animate({scrollLeft:left+'px'},function(){$(this).css('zoom','');$(this).css('zoom',1);});if(this.slider){var max=this.slider.slider("option","max");if(left<=max){this.slider.slider("value",left);}
else{this.slider.slider("value",max);}}},fireCallback:function(fn){if($.isFunction(fn)){fn.call(this);}}};function AdGallerySlideshow(nextimage_callback,settings){this.init(nextimage_callback,settings);}
AdGallerySlideshow.prototype={start_link:false,countdown:false,controls:false,settings:false,nextimage_callback:false,enabled:false,running:false,countdown_interval:false,init:function(nextimage_callback,settings){var context=this;this.nextimage_callback=nextimage_callback;this.settings=settings;},create:function(){this.start_link=$('<span class="ad-slideshow-start">'+this.settings.start_label+'</span>');this.countdown=$('<span class="ad-slideshow-countdown"></span>');this.controls=$('<div class="ad-slideshow-controls button"></div>');this.controls.append(this.start_link).append(this.countdown);this.countdown.hide();var context=this;this.start_link.click(function(){if(context.running){context.stop();$(this).html(context.settings.start_label);if(context.settings.gaq){context.settings.gaq.push(['_trackEvent',"Generic Gallery2 ","Generic Gallery2 Slideshow start","Slideshow start"]);}}
else{context.start();$(this).html(context.settings.stop_label);if(context.settings.gaq){context.settings.gaq.push(['_trackEvent',"Generic Gallery2 ","Generic Gallery2 Slideshow start","Slideshow start"]);}}});$(document).keydown(function(e){if(e.keyCode==83){if(context.running){context.stop();}else{context.start();}}});return this.controls;},disable:function(){this.enabled=false;this.stop();this.controls.hide();},enable:function(){this.enabled=true;this.controls.show();},toggle:function(){if(this.enabled){this.disable();}else{this.enable();}},start:function(){if(this.running||!this.enabled)return false;var context=this;this.running=true;this.controls.addClass('ad-slideshow-running');this._next();this.fireCallback(this.settings.onStart);return true;},stop:function(){if(!this.running)return false;this.running=false;this.countdown.hide();this.controls.removeClass('ad-slideshow-running');clearInterval(this.countdown_interval);this.fireCallback(this.settings.onStop);return true;},_next:function(){var context=this;var pre=this.settings.countdown_prefix;var su=this.settings.countdown_sufix;clearInterval(context.countdown_interval);var slide_timer=0;this.countdown_interval=setInterval(function(){slide_timer+=1000;if(slide_timer>=context.settings.speed){var whenNextIsShown=function(){if(context.running){context._next();}
slide_timer=0;};if(!context.nextimage_callback(whenNextIsShown)){context.stop();}
slide_timer=0;}
var sec=parseInt(context.countdown.text().replace(/[^0-9]/g,''),10);sec--;if(sec>0){context.countdown.html(pre+sec+su);}},1000);},fireCallback:function(fn){if($.isFunction(fn)){fn.call(this);}}};})(jQuery);;;

(function(global){'use strict';var PADCHAR='=';var ALPHA='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';function getbyte64(s,i){var idx=ALPHA.indexOf(s.charAt(i));if(idx===-1){throw'Cannot decode base64';}
return idx;}
function decode(s){s=''+s;var pads,i,b10;var imax=s.length;if(imax===0){return s;}
if(imax%4){throw'Cannot decode base64';}
pads=0;if(s.charAt(imax-1)===PADCHAR){pads=1;if(s.charAt(imax-2)===PADCHAR){pads=2;}
imax-=4;}
var x=[];for(i=0;i<imax;i+=4){b10=(getbyte64(s,i)<<18)|(getbyte64(s,i+1)<<12)|(getbyte64(s,i+2)<<6)|getbyte64(s,i+3);x.push(String.fromCharCode(b10>>16,(b10>>8)&0xff,b10&0xff));}
switch(pads){case 1:b10=(getbyte64(s,i)<<18)|(getbyte64(s,i+1)<<12)|(getbyte64(s,i+2)<<6);x.push(String.fromCharCode(b10>>16,(b10>>8)&0xff));break;case 2:b10=(getbyte64(s,i)<<18)|(getbyte64(s,i+1)<<12);x.push(String.fromCharCode(b10>>16));break;}
return x.join('');}
function getbyte(s,i){var x=s.charCodeAt(i);if(x>255){throw'INVALID_CHARACTER_ERR: DOM Exception 5';}
return x;}
function encode(s){if(arguments.length!==1){throw'SyntaxError: Not enough arguments';}
var padchar=PADCHAR;var alpha=ALPHA;var i,b10;var x=[];s=''+s;var imax=s.length-s.length%3;if(!s.length){return s;}
for(i=0;i<imax;i+=3){b10=(getbyte(s,i)<<16)|(getbyte(s,i+1)<<8)|getbyte(s,i+2);x.push(alpha.charAt(b10>>18));x.push(alpha.charAt((b10>>12)&0x3F));x.push(alpha.charAt((b10>>6)&0x3f));x.push(alpha.charAt(b10&0x3f));}
switch(s.length-imax){case 1:b10=getbyte(s,i)<<16;x.push(alpha.charAt(b10>>18)+alpha.charAt((b10>>12)&0x3F)+
padchar+padchar);break;case 2:b10=(getbyte(s,i)<<16)|(getbyte(s,i+1)<<8);x.push(alpha.charAt(b10>>18)+alpha.charAt((b10>>12)&0x3F)+
alpha.charAt((b10>>6)&0x3f)+padchar);break;}
return x.join('');}
if(typeof global.btoa!=='function'){global.btoa=encode;}
if(typeof global.atob!=='function'){global.atob=decode;}}(this));;;

(function(document,undefined){'use strict';hgm.social={};(function(){var initCalled=false;var appId;var deferredInit=$.Deferred();function getAppId(){return appId;}
function getUserId(){if(window.FB&&FB.getUserID){return FB.getUserID()||undefined;}
var cookie=hgm.cookie.get('fbsr_'+appId);if(cookie){var parts=cookie.split('.');if(parts.length>=2){try{var payload=JSON.parse(atob(parts[1].replace(/-/g,'+').replace(/_/g,'/')));if(payload&&payload.user_id){return payload.user_id;}
else{hgm.debug('social.fb - missing user ID',payload);}}
catch(e){hgm.debug('social.fb - invalid payload',parts[1]);}}
else{hgm.debug('social.fb - missing payload');}}
else{hgm.debug('social.fb - no cookie');}}
function init(apiKey,channel,siteAppId,debug){if(initCalled){hgm.debug('social.fb - already initialized');}
else{initCalled=true;appId=siteAppId;loadLibrary(debug).done(function(){insertDomNode();bindEvents();initLibrary();notifyReady();});}
return deferredInit.promise();}
function insertDomNode(){$('body').append('<div id="fb-root" style="top:0; left:0; position: fixed;"></div>');}
function loadLibrary(debug){if(!window.FB){var sdk='//connect.facebook.net/en_US/sdk'+(debug?'/debug':'')+'.js';return hgm.getScript(document.location.protocol+sdk);}
else{return $.Deferred().resolve().promise();}}
function initLibrary(){FB.init({appId:appId,version:'v2.1',cookie:true,status:true,xfbml:true});}
function bindEvents(){FB.Event.subscribe('edge.create',function(targetUrl){hgm.debug('social.fb - like',targetUrl);_gaq.push(['_trackSocial','facebook','like',targetUrl]);});FB.Event.subscribe('edge.remove',function(targetUrl){hgm.debug('social.fb - unlike',targetUrl);_gaq.push(['_trackSocial','facebook','unlike',targetUrl]);});FB.Event.subscribe('message.send',function(targetUrl){hgm.debug('social.fb - share',targetUrl);_gaq.push(['_trackSocial','facebook','send',targetUrl]);});FB.Event.subscribe('auth.authResponseChange',function(response){if(response&&response.authResponse){if('accessToken'in response.authResponse){hgm.cookie.set('fbtok_'+appId,response.authResponse.accessToken);}
else{hgm.cookie.remove('fbtok_'+appId);}}
hgm.event.fire('social.fb.status',response);});}
function notifyReady(){var eventParams={appId:appId,userId:getUserId()};hgm.event.fire('social.fb.ready',eventParams);deferredInit.resolve(eventParams);}
function afterInit(success){return deferredInit.done(success).promise();}
function getUser(user){return sendRequest('/'+normalizeUser(user));}
function getPermissions(){return sendRequest('/me/permissions').pipe(function(response){return response&&response.data&&response.data[0]||{};});}
function getFriends(offset,limit){return sendRequest('/me/friends',{offset:offset||0,limit:limit||10});}
function getAppFriends(offset,limit){var deferred=$.Deferred();hgm.debug('FB.Data.query');var query=FB.Data.query('SELECT uid, name FROM user WHERE is_app_user = 1 AND uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) limit '+offset+','+limit);query.wait(function(rows){hgm.debug('FB.Data.query - done');hgm.debug(rows);deferred.resolve(rows);},function(){hgm.debug('FB.Data.query - failed?');hgm.debug(arguments);});return deferred;}
function normalizeUser(user){return user||'me';}
function getReadArticles(user,offset,limit){return sendRequest('/'+normalizeUser(user)+'/news.reads',{offset:offset||0,limit:limit||10});}
function readArticle(url){return addActivity('news.reads',{article:url});}
function addActivity(action,object){return sendRequest('/me/'+action,object,'post');}
function removeActivity(id){return sendRequest('/'+id,'delete');}
function login(permissions){var deferred=$.Deferred();afterInit(function(){var scope=permissions?{scope:permissions}:undefined;hgm.debug('FB.login - scope:',scope);FB.login(function(response){if(response&&response.authResponse){hgm.debug('FB.login - success - user:',response.authResponse.userID);deferred.resolve(response);}else{var msg='FB.login - failure';if(response&&response.error&&typeof response.error.message==='string'){msg+=' - msg: '+response.error.message;}
hgm.debug(msg);deferred.reject({code:hgm.errors.NOT_LOGGED_IN,response:response});}},scope);});return deferred.promise();}
function checkPermissions(required){var deferred=$.Deferred();getPermissions().done(function(granted){hgm.debug('granted:',granted);if(hasAllPermissions(required,granted)){deferred.resolve();}
else{deferred.reject({code:hgm.errors.NOT_AUTHORIZED,granted:granted});}}).fail(function(){login(required).done(function(){deferred.resolve();}).fail(function(response){deferred.reject(response);});});return deferred.promise();}
function hasAllPermissions(required,granted){if(typeof required==='string'){required=required.split(',');}
return required.every(function(permission){return granted[permission];});}
function doIfAuthorized(permissions,success,error){var deferred=$.Deferred();checkPermissions(permissions).done(function(){deferred.resolve();}).fail(function(response){deferred.reject(response);});return deferred.done(success).fail(error).promise();}
function doIfConnected(success,error){var deferred=$.Deferred();afterInit(function(){FB.getLoginStatus(function(response){if(response.status==='connected'){deferred.resolve(response);}else if(response.status==='not_authorized'){deferred.reject({code:hgm.errors.NOT_CONNECTED,response:response});}else{deferred.reject({code:hgm.errors.NOT_LOGGED_IN,response:response});}});});return deferred.done(success).fail(error).promise();}
function sendRequest(url,params,type){var apiLog='FB.api '+url;if(typeof params==='string'){type=params;params=null;}
if(type&&type!=='get'){apiLog+=' '+type;}
if(params){apiLog+=' '+JSON.stringify(params);}
var deferred=$.Deferred(),args=Array.prototype.slice.call(arguments);args.push(function(response){if(response&&!response.error){hgm.debug(apiLog,'- success');deferred.resolve(response);}else{var error={code:hgm.errors.UNKNOWN,response:response};var msg=apiLog+' - failure';if(response&&typeof response.error.message==='string'){msg+=' - msg: '+(error.message=response.error.message);if(error.message.indexOf('not authorized')!==-1){error.code=hgm.errors.NOT_AUTHORIZED;}}
hgm.debug(msg);deferred.reject(error);}});doIfConnected(function(){hgm.debug(apiLog);FB.api.apply(FB,args);},function(response){hgm.debug(apiLog,'- failure - status:',response.status);deferred.reject(response);});return deferred.promise();}
function inviteFriends(){hgm.debug('FB.invite');return doIfConnected(function(){FB.ui({title:'Invite Your Friends to Read Motor Authority',message:'Join me on Motor Authority.',filters:['app_non_users'],method:'apprequests'});});}
function createEvents(){hgm.event.create('social.fb.ready','unique memory once');}
function reset(){initCalled=false;appId=undefined;deferredInit=$.Deferred();createEvents();}
createEvents();hgm.social.fb={getAppId:getAppId,getUserId:getUserId,init:init,afterInit:afterInit,login:login,doIfConnected:doIfConnected,doIfAuthorized:doIfAuthorized,getUser:getUser,getPermissions:getPermissions,getFriends:getFriends,getAppFriends:getAppFriends,inviteFriends:inviteFriends,getReadArticles:getReadArticles,readArticle:readArticle,addActivity:addActivity,removeActivity:removeActivity,reset:reset};}());(function(){var status=false;var callbacks={};function isReady(){return status==='ready';}
function bind(event,callback){(callbacks[event]=callbacks[event]||[]).push(callback);}
function trigger(event,args){var calls=callbacks[event];if(calls){hgm.debug('Triggering',event,'event');for(var i=0,l=calls.length;i<l;i++){calls[i](args);}}}
function init(user){if(status===false){status='init';$.getScript(document.location.protocol+'//platform.twitter.com/widgets.js',function(){status='ready';twttr.events.bind('tweet',function(e){if(e){var targetUrl;if(e.target&&e.target.nodeName==='IFRAME'){targetUrl=extractParamFromUri(e.target.src,'url');}
_gaq.push(['_trackSocial','twitter','tweet',targetUrl]);trigger('tweet',{url:targetUrl});}});twttr.events.bind('follow',function(e){_gaq.push(['_trackSocial','twitter','follow',e.data.screen_name]);trigger('follow',{user:e.data.screen_name});});});trigger('init',{user:user});}}
function extractParamFromUri(uri,name){if(uri){uri=uri.split('#')[0];var parts=uri.split('?');if(parts.length>1){var query=decodeURI(parts[1]);name+='=';var params=query.split('&');for(var i=0,param;(param=params[i]);++i){if(param.indexOf(name)===0){return unescape(param.split('=')[1]);}}}}
return undefined;}
hgm.social.twttr={isReady:isReady,bind:bind,init:init};}());}(document));;;

(function(){'use strict';var NATIVE_SOURCE='native';var NATIVE_COOKIE_NAME='hgm__user';var FACEBOOK_SOURCE='fb';var NO_SOURCE;var NOT_LOGGED_IN;var sources=[];var doneCalled=false;var status;function createEvents(){hgm.event.create('auth.status','unique memory');hgm.event.create('auth.login','unique memory');hgm.event.create('auth.logout','unique memory');}
function checkSources(){var bestSource=NO_SOURCE,bestStatus=NOT_LOGGED_IN,remaining=sources.length;if(remaining){sources.forEach(function(source){hgm.debug('auth - check',source.toString());source.check(function(status){status=status||NOT_LOGGED_IN;hgm.debug('auth - check',source.toString(),'status:',status.toString());if(source.supersedes(bestSource)){bestSource=source;bestStatus=status;}
if(!--remaining){done();}});});}
else{done();}
function done(){status=bestStatus;hgm.event.fire('auth.status',status);}}
function changeStatus(newStatus){newStatus=newStatus||NOT_LOGGED_IN;hgm.debug('auth - current:',status.toString(),'new:',newStatus.toString());if(status.equals(newStatus)){hgm.debug('auth - no change');}
else{if(status.isLoggedIn()){hgm.event.fire('auth.logout',status);}
status=newStatus;if(newStatus.isLoggedIn()){hgm.event.fire('auth.login',status);}
hgm.event.fire('auth.status',status);}}
function getSource(name){var found=null;sources.forEach(function(source){if(source.name===name){found=source;}});if(!found){hgm.debug('auth - invalid source',name);}
return found;}
hgm.auth={NATIVE:NATIVE_SOURCE,FACEBOOK:FACEBOOK_SOURCE,isLoggedIn:function(){return status.isLoggedIn();},isLoggedInNative:function(){return status.isLoggedIn(NATIVE_SOURCE);},isLoggedInFacebook:function(){return status.isLoggedIn(FACEBOOK_SOURCE);},register:function(source){sources.push(source);},registerNative:function(){this.register(new hgm.auth.Source(NATIVE_SOURCE,1,function(callback){var cookie=hgm.cookie.get(NATIVE_COOKIE_NAME);if(cookie){hgm.debug('auth - native cookie:',cookie);var parts=atob(cookie).split(':');if(parts.length===2){hgm.debug('auth - native token',parts[0]);return callback(new hgm.auth.Status(this.name,parts[0]));}
else{hgm.debug('auth - invalid native login cookie');}}
callback();}));},registerFacebook:function(){this.register(new hgm.auth.Source(FACEBOOK_SOURCE,2,function(callback){hgm.event.on('social.fb.ready',function(event){callback(event.userId?new hgm.auth.Status(FACEBOOK_SOURCE,event.userId):null);});hgm.event.on('social.fb.status',function(response){changeStatus(extractStatus(response));});}));function extractStatus(response){hgm.debug('auth - Facebook response:',response);if(response.status==='connected'){return new hgm.auth.Status(FACEBOOK_SOURCE,response.authResponse.userID);}
else{return null;}}},done:function(){if(!doneCalled){doneCalled=true;checkSources();}},loginNative:function(){var source=getSource(NATIVE_SOURCE);if(source){source.check(changeStatus);}},logoutNative:function(){this.logout(NATIVE_SOURCE);},logout:function(source){if(status&&status.isLoggedIn(source)){changeStatus(NOT_LOGGED_IN);}
else{hgm.debug('auth - cannot logout',source,'from',status);}},reset:function(initialStatus){hgm.event.reset();hgm.cookie.remove(NATIVE_COOKIE_NAME);sources=[];doneCalled=false;status=initialStatus||NOT_LOGGED_IN;createEvents();}};hgm.auth.Source=Class.extend({name:null,priority:null,handler:null,init:function(name,priority,handler){this.name=name;this.priority=priority;this.handler=handler;},check:function(callback){this.handler(callback);},supersedes:function(other){return this.priority>other.priority;},toString:function(){return this.name;}});hgm.auth.Status=Class.extend({source:null,token:null,init:function(source,token){if(token){this.source=source;this.token=token;}},isLoggedIn:function(source){return source?this.source===source:!!this.source;},equals:function(other){return this.source===other.source&&this.token===other.token;},toString:function(){return this.isLoggedIn()?this.source+':'+this.token:'none';}});NO_SOURCE=new hgm.auth.Source('none',0,function(){});NOT_LOGGED_IN=status=new hgm.auth.Status('none');createEvents();}());;;

!(function(_global,undefined){function localStorageDB(db_name,engine){var db_prefix='db_',db_id=db_prefix+db_name,db_new=false,db=null;try{var storage=(engine==sessionStorage?sessionStorage:localStorage);}catch(e){var storage=engine;}
db=storage[db_id];if(!(db&&(db=JSON.parse(db))&&db.tables&&db.data)){if(!validateName(db_name)){error("The name '"+db_name+"' contains invalid characters");}else{db={tables:{},data:{}};commit();db_new=true;}}
function drop(){delete storage[db_id];db=null;}
function tableCount(){var count=0;for(var table in db.tables){if(db.tables.hasOwnProperty(table)){count++;}}
return count;}
function tableFields(table_name){return db.tables[table_name].fields;}
function tableExists(table_name){return db.tables[table_name]?true:false;}
function tableExistsWarn(table_name){if(!tableExists(table_name)){error("The table '"+table_name+"' does not exist");}}
function columnExists(table_name,field_name){var exists=false;var table_fields=db.tables[table_name].fields;for(var field in table_fields){if(table_fields[field]==field_name)
{exists=true;break;}}
return exists;}
function createTable(table_name,fields){db.tables[table_name]={fields:fields,auto_increment:1};db.data[table_name]={};}
function dropTable(table_name){delete db.tables[table_name];delete db.data[table_name];}
function truncate(table_name){db.tables[table_name].auto_increment=1;db.data[table_name]={};}
function alterTable(table_name,new_fields,default_values){db.tables[table_name].fields=db.tables[table_name].fields.concat(new_fields);if(typeof default_values!="undefined"){for(var ID in db.data[table_name]){if(!db.data[table_name].hasOwnProperty(ID)){continue;}
for(var field in new_fields){if(typeof default_values=="object"){db.data[table_name][ID][new_fields[field]]=default_values[new_fields[field]];}else{db.data[table_name][ID][new_fields[field]]=default_values;}}}}}
function rowCount(table_name){var count=0;for(var ID in db.data[table_name]){if(db.data[table_name].hasOwnProperty(ID)){count++;}}
return count;}
function insert(table_name,data){data.ID=db.tables[table_name].auto_increment;db.data[table_name][db.tables[table_name].auto_increment]=data;db.tables[table_name].auto_increment++;return data.ID;}
function select(table_name,ids,start,limit,sort){var ID=null,results=[],row=null;for(var i=0;i<ids.length;i++){ID=ids[i];row=db.data[table_name][ID];results.push(clone(row));}
if(sort&&sort instanceof Array){for(var i=0;i<sort.length;i++){results.sort(sort_results(sort[i][0],sort[i].length>1?sort[i][1]:null));}}
start=start&&typeof start==="number"?start:null;limit=limit&&typeof limit==="number"?limit:null;if(start&&limit){results=results.slice(start,start+limit);}else if(start){results=results.slice(start);}else if(limit){results=results.slice(start,limit);}
return results;}
function sort_results(field,order){return function(x,y){if(order==="DESC"){return x[field]<y[field];}else{return x[field]>y[field];}};}
function queryByValues(table_name,data){var result_ids=[],exists=false,row=null;for(var ID in db.data[table_name]){if(!db.data[table_name].hasOwnProperty(ID)){continue;}
row=db.data[table_name][ID];exists=true;for(var field in data){if(!data.hasOwnProperty(field)){continue;}
if(typeof data[field]=='string'){if(row[field].toString().toLowerCase()!=data[field].toString().toLowerCase()){exists=false;break;}}else{if(row[field]!=data[field]){exists=false;break;}}}
if(exists){result_ids.push(ID);}}
return result_ids;}
function queryByFunction(table_name,query_function){var result_ids=[],exists=false,row=null;for(var ID in db.data[table_name]){if(!db.data[table_name].hasOwnProperty(ID)){continue;}
row=db.data[table_name][ID];if(query_function(clone(row))==true){result_ids.push(ID);}}
return result_ids;}
function getIDs(table_name){var result_ids=[];for(var ID in db.data[table_name]){if(db.data[table_name].hasOwnProperty(ID)){result_ids.push(ID);}}
return result_ids;}
function deleteRows(table_name,ids){for(var i=0;i<ids.length;i++){if(db.data[table_name].hasOwnProperty(ids[i])){delete db.data[table_name][ids[i]];}}
return ids.length;}
function update(table_name,ids,update_function){var ID='',num=0;for(var i=0;i<ids.length;i++){ID=ids[i];var updated_data=update_function(clone(db.data[table_name][ID]));if(updated_data){delete updated_data['ID'];var new_data=db.data[table_name][ID];for(var field in updated_data){if(updated_data.hasOwnProperty(field)){new_data[field]=updated_data[field];}}
db.data[table_name][ID]=validFields(table_name,new_data);num++;}}
return num;}
function commit(){try{storage.setItem(db_id,JSON.stringify(db));return true;}catch(e){return false;}}
function serialize(){return JSON.stringify(db);}
function error(msg){throw new Error(msg);}
function clone(obj){var new_obj={};for(var key in obj){if(obj.hasOwnProperty(key)){new_obj[key]=obj[key];}}
return new_obj;}
function validateName(name){return name.toString().match(/[^a-z_0-9]/ig)?false:true;}
function validFields(table_name,data){var field='',new_data={};for(var i=0;i<db.tables[table_name].fields.length;i++){field=db.tables[table_name].fields[i];if(data[field]!==undefined){new_data[field]=data[field];}}
return new_data;}
function validateData(table_name,data){var field='',new_data={};for(var i=0;i<db.tables[table_name].fields.length;i++){field=db.tables[table_name].fields[i];new_data[field]=(data[field]===null||data[field]===undefined)?null:data[field];}
return new_data;}
return{commit:function(){return commit();},isNew:function(){return db_new;},drop:function(){drop();},serialize:function(){return serialize();},tableExists:function(table_name){return tableExists(table_name);},tableFields:function(table_name){return tableFields(table_name);},tableCount:function(){return tableCount();},columnExists:function(table_name,field_name){return columnExists(table_name,field_name);},createTable:function(table_name,fields){var result=false;if(!validateName(table_name)){error("The database name '"+table_name+"' contains invalid characters.");}else if(this.tableExists(table_name)){error("The table name '"+table_name+"' already exists.");}else{var is_valid=true;for(var i=0;i<fields.length;i++){if(!validateName(fields[i])){is_valid=false;break;}}
if(is_valid){var fields_literal={};for(var i=0;i<fields.length;i++){fields_literal[fields[i]]=true;}
delete fields_literal['ID'];fields=['ID'];for(var field in fields_literal){if(fields_literal.hasOwnProperty(field)){fields.push(field);}}
createTable(table_name,fields);result=true;}else{error("One or more field names in the table definition contains invalid characters");}}
return result;},createTableWithData:function(table_name,data){if(typeof data!=='object'||!data.length||data.length<1){error("Data supplied isn't in object form. Example: [{k:v,k:v},{k:v,k:v} ..]");}
var fields=Object.keys(data[0]);if(this.createTable(table_name,fields)){this.commit();for(var i=0;i<data.length;i++){if(!insert(table_name,data[i])){error("Failed to insert record: ["+JSON.stringify(data[i])+"]");}}
this.commit();}
return true;},dropTable:function(table_name){tableExistsWarn(table_name);dropTable(table_name);},truncate:function(table_name){tableExistsWarn(table_name);truncate(table_name);},alterTable:function(table_name,new_fields,default_values){var result=false;if(!validateName(table_name)){error("The database name '"+table_name+"' contains invalid characters");}else{if(typeof new_fields=="object"){var is_valid=true;for(var i=0;i<new_fields.length;i++){if(!validateName(new_fields[i])){is_valid=false;break;}}
if(is_valid){var fields_literal={};for(var i=0;i<new_fields.length;i++){fields_literal[new_fields[i]]=true;}
delete fields_literal['ID'];new_fields=[];for(var field in fields_literal){if(fields_literal.hasOwnProperty(field)){new_fields.push(field);}}
alterTable(table_name,new_fields,default_values);result=true;}else{error("One or more field names in the table definition contains invalid characters");}}else if(typeof new_fields=="string"){if(validateName(new_fields)){var new_fields_array=[];new_fields_array.push(new_fields);alterTable(table_name,new_fields_array,default_values);result=true;}else{error("One or more field names in the table definition contains invalid characters");}}}
return result;},rowCount:function(table_name){tableExistsWarn(table_name);return rowCount(table_name);},insert:function(table_name,data){tableExistsWarn(table_name);return insert(table_name,validateData(table_name,data));},insertOrUpdate:function(table_name,query,data){tableExistsWarn(table_name);var result_ids=[];if(!query){result_ids=getIDs(table_name);}else if(typeof query=='object'){result_ids=queryByValues(table_name,validFields(table_name,query));}else if(typeof query=='function'){result_ids=queryByFunction(table_name,query);}
if(result_ids.length==0){return insert(table_name,validateData(table_name,data));}else{var ids=[];for(var n=0;n<result_ids.length;n++){update(table_name,result_ids,function(o){ids.push(o.ID);return data;});}
return ids;}},update:function(table_name,query,update_function){tableExistsWarn(table_name);var result_ids=[];if(!query){result_ids=getIDs(table_name);}else if(typeof query=='object'){result_ids=queryByValues(table_name,validFields(table_name,query));}else if(typeof query=='function'){result_ids=queryByFunction(table_name,query);}
return update(table_name,result_ids,update_function);},query:function(table_name,query,limit,start,sort){tableExistsWarn(table_name);var result_ids=[];if(!query){result_ids=getIDs(table_name,limit,start);}else if(typeof query=='object'){result_ids=queryByValues(table_name,validFields(table_name,query),limit,start);}else if(typeof query=='function'){result_ids=queryByFunction(table_name,query,limit,start);}
return select(table_name,result_ids,start,limit,sort);},queryAll:function(table_name,params){return this.query(table_name,params.hasOwnProperty('query')?params.query:null,params.hasOwnProperty('limit')?params.limit:null,params.hasOwnProperty('start')?params.start:null,params.hasOwnProperty('sort')?params.sort:null);},deleteRows:function(table_name,query){tableExistsWarn(table_name);var result_ids=[];if(!query){result_ids=getIDs(table_name);}else if(typeof query=='object'){result_ids=queryByValues(table_name,validFields(table_name,query));}else if(typeof query=='function'){result_ids=queryByFunction(table_name,query);}
return deleteRows(table_name,result_ids);}}}
if(typeof define==='function'&&define.amd){define(function(){return localStorageDB;});}else{_global['localStorageDB']=localStorageDB;}}(window));;;

(function(){'use strict';hgm.showroom=hgm.showroom||{};hgm.showroom.Model=Class.extend({isModifiable:function(){return false;},isEmpty:function(){return this.count()===0;},count:function(){return this.all().length;},allIds:function(){return this.all().map(function(car){return car.id;});},all:function(){return[];},contains:function(id){return this.get(id)!==null;},get:function(id){var found=null;this.all().every(function(car){if(car.id==id){found=car;return false;}
return true;});return found;},add:function(car){hgm.debug('showroom - cannot modify this showroom');return false;},remove:function(id){hgm.debug('showroom - cannot modify this showroom');return false;},clear:function(){hgm.debug('showroom - cannot modify this showroom');},getNote:function(id){var car=this.get(id);return car&&car.note||'';},setNote:function(id,note){hgm.debug('showroom - cannot modify this showroom');return false;}});}());;;

(function(undefined){'use strict';var DB='hgm_showroom';var TABLE='cars';var TTL=24*60*60*1000;var db;var refreshed;function getDb(){if(!db){var modified=false;db=new localStorageDB(DB);if(db.isNew()){hgm.debug('showroom - create database');db.createTable(TABLE,['id','make','makeSeo','model','modelSeo','year','url','images','mod','ts','note']);modified=true;}
else{if(!db.columnExists(TABLE,'note')){hgm.debug('showroom - add note field');db.alterTable(TABLE,'note','');modified=true;}}
if(modified){db.commit();}}
return db;}
function refresh(showroom){var db=getDb(),cars=db.query(TABLE),now=Date.now(),cutoff=now-TTL,expired=[];cars.forEach(function(car){if(car.ts<=cutoff){hgm.debug('showroom - expired',car.id,car.ts);expired.push(car.id);}
else{hgm.debug('showroom - not expired',car.id);}});if(expired.length){hgm.debug('showroom - cars to refresh:',expired.length);$.getJSON('/showroom-ajax/load-cars-info',{ids:expired.join(',')}).done(function(cars){if(cars&&cars.length){cars.forEach(function(car){hgm.debug('showroom - refresh',car.id);car.ts=now;db.insertOrUpdate(TABLE,{id:car.id},car);hgm.event.fire('showroom.change',{type:'refresh',car:car,showroom:showroom});});db.commit();}}).fail(function(jqxhr){hgm.debug('showroom - failure refreshing cars',jqxhr.status);});}
else{hgm.debug('showroom - no expired cars');}}
hgm.showroom.Local=hgm.showroom.Model.extend({isModifiable:function(){return true;},count:function(){return getDb().rowCount(TABLE);},all:function(skipRefresh){if(!refreshed&&!skipRefresh){refreshed=true;setTimeout(function(){refresh(this);}.bind(this),0);}
return getDb().query(TABLE);},get:function(id){var found=getDb().query(TABLE,{id:id});return found.length?found[0]:null;},add:function(car){if(car&&car.id){var db=getDb(),where={id:car.id};if(!db.query(TABLE,where).length){car.ts=Date.now();car.note=car.note||'';db.insertOrUpdate(TABLE,where,car);db.commit();hgm.debug('showroom - added car',car.id);hgm.event.fire('showroom.change',{type:'add',car:car,showroom:this});hgm.event.fire('showroom.count',{count:this.count(),showroom:this});return true;}
else{hgm.debug('showroom - cannot add present car');}}
else{hgm.debug('showroom - cannot add car missing id');}
return false;},remove:function(id){var db=getDb();if(db.deleteRows(TABLE,{id:id})){db.commit();hgm.debug('showroom - removed',id);hgm.event.fire('showroom.change',{type:'remove',id:id,showroom:this});hgm.event.fire('showroom.count',{count:this.count(),showroom:this});return true;}
else{hgm.debug('showroom - cannot remove missing',id);return false;}},clear:function(){var db=getDb();db.truncate(TABLE);db.commit();hgm.debug('showroom - cleared');hgm.event.fire('showroom.change',{type:'clear',showroom:this});hgm.event.fire('showroom.count',{count:0,showroom:this});},setNote:function(id,note){var db=getDb(),update=function(car){car.note=note;return car;};if(db.update(TABLE,{id:id},update)){db.commit();hgm.debug('showroom - note saved');hgm.event.fire('showroom.change',{type:'note',id:id,note:note,showroom:this});return true;}
else{hgm.debug('showroom - cannot save note for missing car');return false;}}});hgm.showroom.Local.reset=function(cars){hgm.storage.remove('db_'+DB);if(cars){var newDb=new localStorageDB(DB);newDb.createTableWithData(TABLE,cars.map(function(car){return $.extend({},car,{ts:0});}));newDb.commit();}
db=refreshed=undefined;};}());;;

(function(undefined){'use strict';hgm.showroom.Remote=hgm.showroom.Model.extend({local:null,isModifiable:function(){return true;},init:function(local){this.local=local;},count:function(){return this.local.count();},all:function(){return this.local.all(false);},get:function(id){return this.local.get(id);},add:function(car){if(this.local.add(car)){$.post('/showroom-user-ajax/add',{car:car.id,note:car.note},function(status){hgm.debug(status?'added to server':'already on server');},'json').fail(function(jqxhr){hgm.debug('failed adding car to server',jqxhr.status);});return true;}
return false;},remove:function(id){if(this.local.remove(id)){$.post('/showroom-user-ajax/remove',{car:id},function(status){hgm.debug(status?'removed from server':'already removed from server');},'json').fail(function(jqxhr){hgm.debug('failed removing car from server',jqxhr.status);});return true;}
return false;},clear:function(){this.local.clear();$.post('/showroom-user-ajax/clear',function(status){hgm.debug(status?'cleared server':'failed to clear server');},'json').fail(function(jqxhr){hgm.debug('failed clearing server',jqxhr.status);});},setNote:function(id,note){if(this.local.setNote(id,note)){$.post('/showroom-user-ajax/note',{car:id,note:note},function(status){hgm.debug(status?'note saved on server':'note not saved on server');},'json').fail(function(jqxhr){hgm.debug('failed saving note on server',jqxhr.status);});}}});}());;;

(function(undefined){'use strict';var local;var remote;var active;function init(){active=local=new hgm.showroom.Local();hgm.event.create('showroom.load','unique memory');hgm.event.on('auth.status',function(status){if(status.isLoggedIn()){if(!remote){remote=new hgm.showroom.Remote(local);}
active=remote;}
else{active=local;}
hgm.event.fire('showroom.load',active);hgm.event.fire('showroom.count',{count:active.count(),showroom:active});});hgm.event.on('showroom.add',function(car){active.add(car);});}
hgm.showroom.user={get:function(){return active;},reset:function(){active=local=remote=undefined;init();}};init();}());;;

function validEmail(email){return/^[\s]*[\w-_.]*[\w-_.]\@[\w].+[\w]+[\w][\s]*$/.test(email);}
function closeSigninDialog(){$(".customMsg").remove('');$(".errorMsg").html('');if($('#dialogSigninForm').length>0){$('#dialogSigninForm').resetForm();$('#dialogSignin').dialog('close');}
$('.hgm__iframe_ad').show();}
function closeSignupDialog(){$(".customMsg").remove('');$(".errorMsg").html('');if($('#dialogSignupForm').length>0){$('#dialogSignupForm').resetForm();$('#dialogSignup').dialog('close');}
$('.hgm__iframe_ad').show();}
function nativeSignout(){hgm.cookie.remove("hgm__user");Smooth_Reload.lout();return true;}
hgm.openSigninDialog=function(message){closeSignupDialog();hgm.openMembersDialog('signin',message);};hgm.openSignupDialog=function(message){closeSigninDialog();hgm.openMembersDialog('signup',message);};hgm.signUp=function(){$('#dialogSignupForm').submit();};hgm.processMemberResponse=function(data){if(data.success){closeSigninDialog();closeSignupDialog();$('#dialogSignup').remove();$('#dialogSignin').remove();if('undefined'!==typeof Smooth_Reload){Smooth_Reload.lin();}}else{$('#dialogSignin .errorMsg').html(data.error);var error;for(error in data.errors){$('#dialogSignupForm').find('.errorMsg').html(data.errors[error]);}}};hgm.initMemberForms=function(){hgm.formValidator($('#dialogSigninForm'),{submitHandler:hgm.processMemberResponse,messages:{username:{required:'Username is required'},password:{required:'Password is required'}}});hgm.formValidator($('#dialogSignupForm'),{submitHandler:hgm.processMemberResponse,rules:{username:{minlength:4},password:{minlength:6}},messages:{email:{email:'Invalid email address!'},username:{minlength:'Username is too short. It needs to be at least 4 characters long'},password:{minlength:'Password is too short. It needs to be at least 6 characters long',required:'Password is required'},password2:{minlength:'Password is too short. It needs to be at least 6 characters long',required:'Password is required'}}});};checkOrRequestPermissions=function(){closeSigninDialog();closeSignupDialog();};hgm.openMembersDialog=function(dialog,message){var dialogName='dialog'+dialog.replace(/^(.)|\s(.)/g,function($1){return $1.toUpperCase();});$('.hgm__iframe_ad').hide();if(!hgm.memberDialogs){hgm.memberDialogs=[];}
if($('#dialogSignin').length===0){$.get("/blocks/member-dialogs/",{mode:'local',dialogs:dialog},function(responseText){hgm.memberDialogs[dialogName]=$('#'+dialogName);$("#dialog-container").html(responseText);hgm.initMemberForms();$("#dialogSignin").dialog({autoOpen:false,draggable:false,resizable:false,modal:true,width:650,height:470,closeText:'',title:$('#dialogSignin .dialogTitle')});$("#dialogSignup").dialog({autoOpen:false,draggable:false,resizable:false,modal:true,width:650,height:530,closeText:'',title:$('#dialogSignup .dialogTitle')});$("#dialogLogin").dialog({autoOpen:false,draggable:false,resizable:false,modal:true,width:445,height:150,closeText:'',title:$('#dialogSignup .dialogTitle')});$("#dialogSignin").dialog().parents('.ui-dialog:eq(0)').wrap('<div class="memberDialogScope"></div>');$("#dialogSignup").dialog().parents('.ui-dialog:eq(0)').wrap('<div class="memberDialogScope"></div>');$("#dialogLogin").dialog().parents('.ui-dialog:eq(0)').wrap('<div class="memberDialogScope"></div>');if(typeof message!=='undefined'){$(".dialogTitle").after('<div class="customMsg">'+message+'</div>');}
$('#'+dialogName).dialog('open');});}else{if(typeof message!=='undefined'){$(".dialogTitle").after('<div class="customMsg">'+message+'</div>');}
$("#"+dialogName).dialog('open');}};function submitSignin(myfield,e){var keycode;if(window.event){keycode=window.event.keyCode;}
else if(e){keycode=e.which;}
else{return true;}
if(keycode===13){$('#dialogSigninForm').submit();return false;}
else{return true;}};;

var Smooth_Reload;(function(){'use strict';Smooth_Reload={blocks:{},loggedIn:null,reloadingCount:0,push:function(block){var divId=block.divId;if(!(divId in this.blocks)){this.blocks[divId]=block;}},lin:function(callback){if(this.loggedIn!==true){this.refresh(callback);}
this.closeDialog('#dialogLocal');this.closeDialog('#dialogSignin');this.closeDialog('#dialogSignup');this.closeDialog('#dialogLogin');$('.vote .member-links').hide();this.loggedIn=true;},lout:function(callback){if(this.loggedIn!==false){this.refresh(callback);}
this.closeDialog('#dialogLocal');this.closeDialog('#dialogSignin');this.closeDialog('#dialogSignup');this.loggedIn=false;},closeDialog:function(selector){var $selector=$(selector);if($selector.length){var dialog=$selector.dialog;if($.isFunction(dialog)){dialog('close');}}},refresh:function(callback){setTimeout(function(){Object.keys(this.blocks).forEach(function(divId){var block=this.blocks[divId],controller=block.controller||divId,params=block.params;if($.isFunction(params)){params=params();}
if(!params){params={};}
params.divId=divId;this.reloadingCount++;$('div#'+divId).load('/blocks/'+controller,params,function(){this.reloadingCount--;if(typeof FB!=='undefined'){FB.XFBML.parse();}
if(callback){callback(block);}}.bind(this));},this);}.bind(this),0);}};}());;;

hgm.openLoginDialog=function(){var $loginPromo=$('#login-promo');if($('.login-promo-dialog').hasClass('ui-widget-content')){$loginPromo.dialog('open');}else{$loginPromo.dialog({autoOpen:true,draggable:false,resizable:false,modal:true,width:720,height:340,closeText:'',dialogClass:'login-promo-dialog',title:$('#login-promo .dialogTitle')});}};hgm.closeLoginDialog=function(){var promoLoginDialog=$('#login-promo').dialog('isOpen');if(promoLoginDialog){$('#login-promo').dialog('close');}};$('#login-promo .ask-me-later').live('click',hgm.closeLoginDialog);function synchLocalStorageWithBackEnd(user){$.ajax({url:'/showroom-ajax/load-vehicles',dataType:'json',data:{userid:user},success:function(data){if(data){var cars=$.parseJSON(data);cars.forEach(function(car){if(hgm.showroom.add(car)){hgm.debug('loaded',data);}else{hgm.debug('car already exists in localstorage');}});synchBackEndWithLocalStorage(user);}
if($('#wrapper-showroom').length>0){new hgm.showroom.Ui($('#container'),'/js/showRoomCarTemplate.ejs',new hgm.CarPicker($('#save-new-car'),hgm.showroom.cars));}}});}
function synchBackEndWithLocalStorage(user){hgm.showroom.all().done(function(cars){if(cars.length>0){$.ajax({type:'POST',url:'/showroom-ajax/save-vehicles',data:{userid:user,vehicles:cars},success:function(){hgm.debug('saved into database');}});}});};;

$('#masterSearch').live('click',function(){$("#masterSearch").addClass("hover");});$('#masterSearch').live('mouseleave',function(){$("#masterSearch").removeClass("hover");});$("#masterSearch .stdButton").live('mousedown',function(){$('#masterSearch input.search').unbind("blur");$("#masterSearch form").submit();});;;

(function($){"use strict";$.fn.groupHover=function(opts){var options={timeout:200,hoverClass:'hover'},myGroup=$(this),setHoverClass=function(elem){myGroup.addClass('__gh-temp-inactive');jQuery.data(myGroup[0],'active',true);elem.addClass(options.hoverClass);elem.removeClass('__gh-temp-inactive');myGroup.filter('.__gh-temp-inactive').removeClass(options.hoverClass);myGroup.removeClass('__gh-temp-inactive');};options=$.extend(options,opts);jQuery.data(myGroup[0],'active',false);myGroup.hover(function(){if(!jQuery.data(myGroup[0],'active')){if(jQuery.data(myGroup[0],'timeout')){clearTimeout(jQuery.data(myGroup[0],'timeout'));}
var currentItem=$(this);var newTimeout=setTimeout(function(){setHoverClass(currentItem);currentItem=null;},options.timeout);jQuery.data(myGroup[0],'timeout',newTimeout);}else{clearTimeout(jQuery.data(myGroup[0],'timeout'));setHoverClass($(this));}},function(){if(jQuery.data(myGroup[0],'timeout')){clearTimeout(jQuery.data(myGroup[0],'timeout'));}
var currentItem=$(this);var newTimeout=setTimeout(function(){currentItem.removeClass(options.hoverClass);currentItem=null;jQuery.data(myGroup[0],'active',false);},options.timeout);jQuery.data(myGroup[0],'timeout',newTimeout);});return this;};})(jQuery);;;

var FindCar={};FindCar.uberMakePageUrl='';FindCar.redirect=false;FindCar.attachMakeEventListener_populateModels=function(formNum,range,routes,gaTrack){var $make=$('form#findcar'+formNum+' .find-car-make');$make.change({formNum:formNum,range:range,routes:routes},function(event){var formNum=event.data.formNum,range=event.data.range,routes=event.data.routes,$form=$('form#findcar'+formNum),$make=$form.find('.find-car-make'),$model=$form.find('.find-car-model'),make=$make.val();$model.attr('disabled','disabled');if(make){var params={make:make,type:range};if(routes){params.routes=routes;}
FindCar.retrieveUberMakePageUrl(make,range,routes);$.getJSON('/blocks/find-car-unified/getModelsForMake',params,function(models){hgm.vhc.populateCurrentModelList($model,models,'model_seo_name','model_name','Select Model');$model.removeAttr('disabled');if(hgm.isMobileView()){$model.parent().removeClass('ui-disabled');}
FindCar.refreshBoxItSelect($model);});}else{$model.find('option').not(':first-child').remove();$model.change();FindCar.refreshBoxItSelect($model);}});$make.change();};FindCar.attachModelEventListener_populateYears=function(formNum,range,routes){$('form#findcar'+formNum+' .find-car-model').change({formNum:formNum,range:range,routes:routes},function(event){var formNum=event.data.formNum,range=event.data.range,routes=event.data.routes,$form=$('form#findcar'+formNum),$make=$form.find('find-car-make'),$model=$form.find('find-car-model'),$year=$form.find('find-car-year'),make=$make.val(),model=$model.val();$year.attr('disabled','disabled');$year.html('<option value="">All Years</option>');FindCar.refreshBoxItSelect($year);if(make&&model){var params={make:make,model:model,type:range};if(routes){params.routes=routes;}
$.getJSON('/blocks/find-car-unified/getYearsForModel',params,function(data){if(data){var options='<option value="">All Years</option>',years=data.availableYears,section=0;for(var i=0;i<years.length;i++){if(years[i]>data.lastYear){section=1;options+='<optgroup label="Coming Soon">';}
else if(years[i]<=data.lastYear&&section<2){if(section){options+='</optgroup>';}
section=2;options+='<optgroup label="Available Now">';}
else if(years[i]<data.firstYear&&section<3){if(section){options+='</optgroup>';}
section=3;options+='<optgroup label="Used">';}
options+='<option value="'+years[i]+'">'+years[i]+'</option>';options+='</optgroup>';}
$year.html(options);$year.removeAttr('disabled');FindCar.refreshBoxItSelect($year);}});}});};FindCar.attachModelEventListener_submit=function(formNum,gaTrack){var $form=$('form#findcar'+formNum);$form.find('.find-car-model').change(function(event){var make=$form.find('.find-car-make').val(),model=$form.find('.find-car-model').val(),zipcode=$form.find('.find-car-zipcode').val(),newUrl=$form.attr('action');if(make&&model){newUrl=newUrl.replace(/\{make\}/g,make);newUrl=newUrl.replace(/\{model\}_\{year\}/g,model);newUrl=newUrl.replace(/\{model\}/g,model);if(zipcode){FindCar.setZipcodeCookie(zipcode);newUrl=newUrl.replace(/\:{zip\}/g,':'+zipcode);}else{newUrl=newUrl.replace(/\;zip\:{zip\}/g,'');}
if(!FindCar.redirect){FindCar.redirect=true;if(gaTrack){hgm.trackEvent('header-make-model','redirect',make+' '+model,0,true,function(){window.location=newUrl;});}else{window.location=newUrl;}}}});};FindCar.attachYearEventListener_submit=function(formNum,gaTrack){var $form=$('form#findcar'+formNum);$form.find('.find-car-year').change(function(){var make=$form.find('.find-car-make').val(),model=$form.find('.find-car-model').val(),year=$form.find('.find-car-year').val();if(model&&year){var zipcode=$form.find('.find-car-zipcode').val();var newUrl=$form.data('actionOverview');newUrl=newUrl.replace(/\{make\}/g,make);newUrl=newUrl.replace(/\{model\}/g,model);newUrl=newUrl.replace(/\{model\}/g,model);newUrl=newUrl.replace(/\{year\}/g,year);if(zipcode){FindCar.setZipcodeCookie(zipcode);newUrl=newUrl.replace(/\:{zip\}/g,':'+zipcode);}else{newUrl=newUrl.replace(/\;zip\:{zip\}/g,'');}
if(!FindCar.redirect){FindCar.redirect=true;if(gaTrack){hgm.trackEvent('header-make-model','redirect',year+' '+make+' '+model,0,true,function(){window.location=newUrl;});}else{window.location=newUrl;}}}});};FindCar.attachMakesGoButtonEventListener_submit=function(formNum){var $form=$('form#findcar'+formNum);$form.submit(function(){var makeInput=$form.find('.find-car-make'),modelInput=$form.find('.find-car-model'),zipcode=$form.find('.find-car-zipcode').val();if(makeInput.val()){var newUrl='';if(modelInput.val()){newUrl=$form.attr('action');newUrl=newUrl.replace(/\{make\}/g,makeInput.val());newUrl=newUrl.replace(/\{model\}_\{year\}/g,modelInput.val());newUrl=newUrl.replace(/\{model\}/g,modelInput.val());}else{if(FindCar.uberMakePageUrl.length===0){return;}
newUrl=FindCar.uberMakePageUrl.replace(/\{make\}/,makeInput.val());}
if(zipcode){FindCar.setZipcodeCookie(zipcode);}
window.location=newUrl;}
return false;});};FindCar.attachYearsGoButtonEventListener_submit=function(formNum,gaTrack){var $form=$('form#findcar'+formNum);$form.find('.find-car-go').click(function(event){var make=$form.find('.find-car-make').val(),model=$form.find('.find-car-model').val(),year=$form.find('.find-car-year').val();if(!make){FindCar.makeQtip($form.find('.find-car-make'),'Please select a make');}else if(!model){FindCar.makeQtip($form.find('.find-car-model'),'Please select a model');}else{var zipcode=$form.find('.find-car-zipcode').val();var newUrl=$form.data('actionUber');if(year){newUrl=$form.data('actionOverview');}
newUrl=newUrl.replace(/\{make\}/g,make);newUrl=newUrl.replace(/\{model\}/g,model);newUrl=newUrl.replace(/\{model\}/g,model);newUrl=newUrl.replace(/\{year\}/g,year);if(zipcode){FindCar.setZipcodeCookie(zipcode);newUrl=newUrl.replace(/\:{zip\}/g,':'+zipcode);}else{newUrl=newUrl.replace(/\;zip\:{zip\}/g,'');}
if(!FindCar.redirect){FindCar.redirect=true;if(gaTrack){hgm.trackEvent('header-make-model','redirect',year+' '+make+' '+model,0,true,function(){window.location=newUrl;});}else{window.location=newUrl;}}}});};FindCar.attachModelsGoButtonEventListener_submit=function(formNum){var $form=$('form#findcar'+formNum);$form.submit(function(){var newUrl=$form.attr('action');var model=$form.find('.find-car-model').val();var year=$form.find('.find-car-year').val();var zipcode=$form.find('.find-car-zipcode').val();if(model&&year){newUrl=newUrl.replace(/\{model\}/g,model);newUrl=newUrl.replace(/\{year\}/g,year);if(zipcode){FindCar.setZipcodeCookie(zipcode);}
window.location=newUrl;}
return false;});};FindCar.attachModelsGoButtonEventListener_submit=function(formNum){var $form=$('form#findcar'+formNum);$form.submit(function(){var newUrl=$form.attr('action'),model=$form.find('.find-car-model').val(),year=$form.find('.find-car-year').val(),zipcode=$form.find('.find-car-zipcode').val();if(model&&year){newUrl=newUrl.replace(/\{model\}/g,model);newUrl=newUrl.replace(/\{year\}/g,year);if(zipcode){FindCar.setZipcodeCookie(zipcode);}
window.location=newUrl;}
return false;});};FindCar.attachYearsEventListener_submit=function(formNum){var $form=$('form#findcar'+formNum);$form.find('.find-car-year').change(function(){if($form.find('.find-car-year').val()){var newUrl=$form.attr('action');var year=$form.find('.find-car-year').val();var zipcode=$form.find('.find-car-zipcode').val();newUrl=newUrl.replace(/\{year\}/g,year);if(zipcode){FindCar.setZipcodeCookie(zipcode);}
window.location=newUrl;}});};FindCar.attachModelYearsEventListener_submit=function(formNum){var $form=$('form#findcar'+formNum);$form.find('.find-car-year').change(function(){if($form.find('.find-car-model').val()&&$form.find('.find-car-year').val()){var newUrl=$form.attr('action');var model=$form.find('.find-car-model').val();var year=$form.find('.find-car-year').val();var zipcode=$form.find('.find-car-zipcode').val();newUrl=newUrl.replace(/\{model\}/g,model);newUrl=newUrl.replace(/\{year\}/g,year);if(zipcode){FindCar.setZipcodeCookie(zipcode);}
window.location=newUrl;}});};FindCar.setZipcodeCookie=function(zipcode){var date=new Date();date.setTime(date.getTime()+(180*24*60*60*1000));$.cookie('zipcode',zipcode,{expires:date});};FindCar.retrieveUberMakePageUrl=function(make,type,routes){$.get('/blocks/find-car-unified/getUberMakePageUrl',{make:make,type:type,routes:routes},function(data){FindCar.setUberMakePageUrl(data);});};FindCar.setUberMakePageUrl=function(url){FindCar.uberMakePageUrl=$.trim(url);};FindCar.attachZipcodeEventListener_focus=function(formNum){$('form#findcar'+formNum+' .find-car-zipcode').focus(function(){var $zip=$(this),zip=$zip.val();if(zip==='Zipcode'){$zip.val('');}
return true;});};FindCar.attachZipcodeEventListener_blur=function(formNum){$('form#findcar'+formNum+' .find-car-zipcode').blur(function(){var $zip=$(this),zip=$zip.val();if(!zip){$zip.val('Zipcode');}
return true;});};FindCar.refreshBoxItSelect=function($field){var $box=$field.data('selectBoxIt');if($box){$box.refresh();}};FindCar.makeQtip=function(element,errormessage){$(element).qtip({style:{padding:1,background:'#FE511C',color:'white',textAlign:'center',border:{width:0,radius:10,color:'#FE511C'},tip:true,name:'light'},content:errormessage,position:{corner:{tooltip:'topMiddle',target:'bottomMiddle'}},show:{when:false,ready:true},hide:{when:{event:'click'},effect:{type:'blur'}}});};;;

(function(undefined){'use strict';var CURRENT_MODEL_AGE_YEARS=5;hgm.vhc={populateCurrentModelList:function($select,models,idProperty,nameProperty,defaultOption){var currentModels=[],otherModels=[],firstId=Object.keys(models)[0];hgm.debug(firstId,models[firstId]);$select.empty();$('<option/>').val('').html(defaultOption).appendTo($select);if(firstId&&models[firstId].max_year!==undefined){$.each(models,function(id,model){if(model.max_year>=(new Date().getFullYear()-CURRENT_MODEL_AGE_YEARS)){currentModels.push(model);}else{otherModels.push(model);}});this.populateOptionGroup($select,currentModels,idProperty,nameProperty,'Current Models');this.populateOptionGroup($select,otherModels,idProperty,nameProperty,'Other Models');}else{this.populateOptionGroup($select,models,idProperty,nameProperty);}
$select.val('').change();},sortByModelName:function(models,nameProperty){models.sort(function(l,r){var lval=l[nameProperty].toLowerCase(),rval=r[nameProperty].toLowerCase();return lval>rval?1:lval<rval?-1:0;});return models;},populateOptionGroup:function($select,models,idProperty,nameProperty,groupLabel){var $parent;if(models.length){if(groupLabel){this.sortByModelName(models,nameProperty);$parent=$('<optgroup/>').attr('label',groupLabel).appendTo($select);}else{$parent=$select;}
$.each(models,function(id,model){$('<option/>').val(model[idProperty]).html(model[nameProperty]).appendTo($parent);});}}};}());;;
/*! jquery.selectBoxIt - v3.8.0 - 2013-11-11 
* http://www.selectboxit.com
* Copyright (c) 2013 Greg Franko; Licensed MIT*/
!function(a){"use strict";a(window.jQuery,window,document)}(function(a,b,c,d){"use strict";a.widget("selectBox.selectBoxIt",{VERSION:"3.8.0",options:{showEffect:"none",showEffectOptions:{},showEffectSpeed:"medium",hideEffect:"none",hideEffectOptions:{},hideEffectSpeed:"medium",showFirstOption:!0,defaultText:"",defaultIcon:"",downArrowIcon:"",theme:"default",keydownOpen:!0,isMobile:function(){var a=navigator.userAgent||navigator.vendor||b.opera;return/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(a)},"native":!1,aggressiveChange:!1,selectWhenHidden:!0,viewport:a(b),similarSearch:!1,copyAttributes:["title","rel"],copyClasses:"button",nativeMousedown:!1,customShowHideEvent:!1,autoWidth:!0,html:!0,populate:"",dynamicPositioning:!0,hideCurrent:!1},getThemes:function(){var b=this,c=a(b.element).attr("data-theme")||"c";return{bootstrap:{focus:"active",hover:"",enabled:"enabled",disabled:"disabled",arrow:"caret",button:"btn",list:"dropdown-menu",container:"bootstrap",open:"open"},jqueryui:{focus:"ui-state-focus",hover:"ui-state-hover",enabled:"ui-state-enabled",disabled:"ui-state-disabled",arrow:"ui-icon ui-icon-triangle-1-s",button:"ui-widget ui-state-default",list:"ui-widget ui-widget-content",container:"jqueryui",open:"selectboxit-open"},jquerymobile:{focus:"ui-btn-down-"+c,hover:"ui-btn-hover-"+c,enabled:"ui-enabled",disabled:"ui-disabled",arrow:"ui-icon ui-icon-arrow-d ui-icon-shadow",button:"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+c,list:"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+c,container:"jquerymobile",open:"selectboxit-open"},"default":{focus:"selectboxit-focus",hover:"selectboxit-hover",enabled:"selectboxit-enabled",disabled:"selectboxit-disabled",arrow:"selectboxit-default-arrow",button:"selectboxit-btn",list:"selectboxit-list",container:"selectboxit-container",open:"selectboxit-open"}}},isDeferred:function(b){return a.isPlainObject(b)&&b.promise&&b.done},_create:function(b){var d=this,e=d.options.populate,f=d.options.theme;if(d.element.is("select"))return d.widgetProto=a.Widget.prototype,d.originalElem=d.element[0],d.selectBox=d.element,d.options.populate&&d.add&&!b&&d.add(e),d.selectItems=d.element.find("option"),d.firstSelectItem=d.selectItems.slice(0,1),d.documentHeight=a(c).height(),d.theme=a.isPlainObject(f)?a.extend({},d.getThemes()["default"],f):d.getThemes()[f]?d.getThemes()[f]:d.getThemes()["default"],d.currentFocus=0,d.blur=!0,d.textArray=[],d.currentIndex=0,d.currentText="",d.flipped=!1,b||(d.selectBoxStyles=d.selectBox.attr("style")),d._createDropdownButton()._createUnorderedList()._copyAttributes()._replaceSelectBox()._addClasses(d.theme)._eventHandlers(),d.originalElem.disabled&&d.disable&&d.disable(),d._ariaAccessibility&&d._ariaAccessibility(),d.isMobile=d.options.isMobile(),d._mobile&&d._mobile(),d.options["native"]&&this._applyNativeSelect(),d.triggerEvent("create"),d},_createDropdownButton:function(){var b=this,c=b.originalElemId=b.originalElem.id||"",d=b.originalElemValue=b.originalElem.value||"",e=b.originalElemName=b.originalElem.name||"",f=b.options.copyClasses,g=b.selectBox.attr("class")||"";return b.dropdownText=a("<span/>",{id:c&&c+"SelectBoxItText","class":"selectboxit-text",unselectable:"on",text:b.firstSelectItem.text()}).attr("data-val",d),b.dropdownImageContainer=a("<span/>",{"class":"selectboxit-option-icon-container"}),b.dropdownImage=a("<i/>",{id:c&&c+"SelectBoxItDefaultIcon","class":"selectboxit-default-icon",unselectable:"on"}),b.dropdown=a("<span/>",{id:c&&c+"SelectBoxIt","class":"selectboxit "+("button"===f?g:"")+" "+(b.selectBox.prop("disabled")?b.theme.disabled:b.theme.enabled),name:e,tabindex:b.selectBox.attr("tabindex")||"0",unselectable:"on"}).append(b.dropdownImageContainer.append(b.dropdownImage)).append(b.dropdownText),b.dropdownContainer=a("<span/>",{id:c&&c+"SelectBoxItContainer","class":"selectboxit-container "+b.theme.container+" "+("container"===f?g:"")}).append(b.dropdown),b},_createUnorderedList:function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o=this,p="",q=o.originalElemId||"",r=a("<ul/>",{id:q&&q+"SelectBoxItOptions","class":"selectboxit-options",tabindex:-1});if(o.options.showFirstOption||(o.selectItems.first().attr("disabled","disabled"),o.selectItems=o.selectBox.find("option").slice(1)),o.selectItems.each(function(q){m=a(this),c="",d="",b=m.prop("disabled"),e=m.attr("data-icon")||"",f=m.attr("data-iconurl")||"",g=f?"selectboxit-option-icon-url":"",h=f?"style=\"background-image:url('"+f+"');\"":"",i=m.attr("data-selectedtext"),j=m.attr("data-text"),l=j?j:m.text(),n=m.parent(),n.is("optgroup")&&(c="selectboxit-optgroup-option",0===m.index()&&(d='<span class="selectboxit-optgroup-header '+n.first().attr("class")+'"data-disabled="true">'+n.first().attr("label")+"</span>")),p+=d+'<li data-id="'+q+'" data-val="'+this.value+'" data-disabled="'+b+'" class="'+c+" selectboxit-option "+(a(this).attr("class")||"")+'"><a class="selectboxit-option-anchor"><span class="selectboxit-option-icon-container"><i class="selectboxit-option-icon '+e+" "+(g||o.theme.container)+'"'+h+"></i></span>"+(o.options.html?l:o.htmlEscape(l))+"</a></li>",k=m.attr("data-search"),o.textArray[q]=b?"":k?k:l,this.selected&&(o._setText(o.dropdownText,i||l),o.currentFocus=q)}),o.options.defaultText||o.selectBox.attr("data-text")){var s=o.options.defaultText||o.selectBox.attr("data-text");o._setText(o.dropdownText,s),o.options.defaultText=s}return r.append(p),o.list=r,o.dropdownContainer.append(o.list),o.listItems=o.list.children("li"),o.listAnchors=o.list.find("a"),o.listItems.first().addClass("selectboxit-option-first"),o.listItems.last().addClass("selectboxit-option-last"),o.list.find("li[data-disabled='true']").not(".optgroupHeader").addClass(o.theme.disabled),o.dropdownImage.addClass(o.selectBox.attr("data-icon")||o.options.defaultIcon||o.listItems.eq(o.currentFocus).find("i").attr("class")),o.dropdownImage.attr("style",o.listItems.eq(o.currentFocus).find("i").attr("style")),o},_replaceSelectBox:function(){var b,c,e,f=this,g=f.originalElem.id||"",h=f.selectBox.attr("data-size"),i=f.listSize=h===d?"auto":"0"===h?"auto":+h;return f.selectBox.css("display","none").after(f.dropdownContainer),f.dropdownContainer.appendTo("body").addClass("selectboxit-rendering"),b=f.dropdown.height(),f.downArrow=a("<i/>",{id:g&&g+"SelectBoxItArrow","class":"selectboxit-arrow",unselectable:"on"}),f.downArrowContainer=a("<span/>",{id:g&&g+"SelectBoxItArrowContainer","class":"selectboxit-arrow-container",unselectable:"on"}).append(f.downArrow),f.dropdown.append(f.downArrowContainer),f.listItems.removeClass("selectboxit-selected").eq(f.currentFocus).addClass("selectboxit-selected"),c=f.downArrowContainer.outerWidth(!0),e=f.dropdownImage.outerWidth(!0),f.options.autoWidth&&(f.dropdown.css({width:"auto"}).css({width:f.list.outerWidth(!0)+c+e}),f.list.css({"min-width":f.dropdown.width()})),f.dropdownText.css({"max-width":f.dropdownContainer.outerWidth(!0)-(c+e)}),f.selectBox.after(f.dropdownContainer),f.dropdownContainer.removeClass("selectboxit-rendering"),"number"===a.type(i)&&(f.maxHeight=f.listAnchors.outerHeight(!0)*i),f},_scrollToView:function(a){var b=this,c=b.listItems.eq(b.currentFocus),d=b.list.scrollTop(),e=c.height(),f=c.position().top,g=Math.abs(f),h=b.list.height();return"search"===a?e>h-f?b.list.scrollTop(d+(f-(h-e))):-1>f&&b.list.scrollTop(f-e):"up"===a?-1>f&&b.list.scrollTop(d-g):"down"===a&&e>h-f&&b.list.scrollTop(d+(g-h+e)),b},_callbackSupport:function(b){var c=this;return a.isFunction(b)&&b.call(c,c.dropdown),c},_setText:function(a,b){var c=this;return c.options.html?a.html(b):a.text(b),c},open:function(a){var b=this,c=b.options.showEffect,d=b.options.showEffectSpeed,e=b.options.showEffectOptions,f=b.options["native"],g=b.isMobile;return!b.listItems.length||b.dropdown.hasClass(b.theme.disabled)?b:(f||g||this.list.is(":visible")||(b.triggerEvent("open"),b._dynamicPositioning&&b.options.dynamicPositioning&&b._dynamicPositioning(),"none"===c?b.list.show():"show"===c||"slideDown"===c||"fadeIn"===c?b.list[c](d):b.list.show(c,e,d),b.list.promise().done(function(){b._scrollToView("search")})),b._callbackSupport(a),b)},close:function(a){var b=this,c=b.options.hideEffect,d=b.options.hideEffectSpeed,e=b.options.hideEffectOptions,f=b.options["native"],g=b.isMobile;return f||g||!b.list.is(":visible")||(b.triggerEvent("close"),"none"===c?b.list.hide():"hide"===c||"slideUp"===c||"fadeOut"===c?b.list[c](d):b.list.hide(c,e,d)),b._callbackSupport(a),b},toggle:function(){var a=this,b=a.list.is(":visible");b?a.close():b||a.open()},_keyMappings:{38:"up",40:"down",13:"enter",8:"backspace",9:"tab",32:"space",27:"esc"},_keydownMethods:function(){var a=this,b=a.list.is(":visible")||!a.options.keydownOpen;return{down:function(){a.moveDown&&b&&a.moveDown()},up:function(){a.moveUp&&b&&a.moveUp()},enter:function(){var b=a.listItems.eq(a.currentFocus);a._update(b),"true"!==b.attr("data-preventclose")&&a.close(),a.triggerEvent("enter")},tab:function(){a.triggerEvent("tab-blur"),a.close()},backspace:function(){a.triggerEvent("backspace")},esc:function(){a.close()}}},_eventHandlers:function(){var b,c,d=this,e=d.options.nativeMousedown,f=d.options.customShowHideEvent,g=d.focusClass,h=d.hoverClass,i=d.openClass;return this.dropdown.on({"click.selectBoxIt":function(){d.dropdown.trigger("focus",!0),d.originalElem.disabled||(d.triggerEvent("click"),e||f||d.toggle())},"mousedown.selectBoxIt":function(){a(this).data("mdown",!0),d.triggerEvent("mousedown"),e&&!f&&d.toggle()},"mouseup.selectBoxIt":function(){d.triggerEvent("mouseup")},"blur.selectBoxIt":function(){d.blur&&(d.triggerEvent("blur"),d.close(),a(this).removeClass(g))},"focus.selectBoxIt":function(b,c){var e=a(this).data("mdown");a(this).removeData("mdown"),e||c||setTimeout(function(){d.triggerEvent("tab-focus")},0),c||(a(this).hasClass(d.theme.disabled)||a(this).addClass(g),d.triggerEvent("focus"))},"keydown.selectBoxIt":function(a){var b=d._keyMappings[a.keyCode],c=d._keydownMethods()[b];c&&(c(),!d.options.keydownOpen||"up"!==b&&"down"!==b||d.open()),c&&"tab"!==b&&a.preventDefault()},"keypress.selectBoxIt":function(a){var b=a.charCode||a.keyCode,c=d._keyMappings[a.charCode||a.keyCode],e=String.fromCharCode(b);d.search&&(!c||c&&"space"===c)&&d.search(e,!0,!0),"space"===c&&a.preventDefault()},"mouseenter.selectBoxIt":function(){d.triggerEvent("mouseenter")},"mouseleave.selectBoxIt":function(){d.triggerEvent("mouseleave")}}),d.list.on({"mouseover.selectBoxIt":function(){d.blur=!1},"mouseout.selectBoxIt":function(){d.blur=!0},"focusin.selectBoxIt":function(){d.dropdown.trigger("focus",!0)}}),d.list.on({"mousedown.selectBoxIt":function(){d._update(a(this)),d.triggerEvent("option-click"),"false"===a(this).attr("data-disabled")&&"true"!==a(this).attr("data-preventclose")&&d.close(),setTimeout(function(){d.dropdown.trigger("focus",!0)},0)},"focusin.selectBoxIt":function(){d.listItems.not(a(this)).removeAttr("data-active"),a(this).attr("data-active","");var b=d.list.is(":hidden");(d.options.searchWhenHidden&&b||d.options.aggressiveChange||b&&d.options.selectWhenHidden)&&d._update(a(this)),a(this).addClass(g)},"mouseup.selectBoxIt":function(){e&&!f&&(d._update(a(this)),d.triggerEvent("option-mouseup"),"false"===a(this).attr("data-disabled")&&"true"!==a(this).attr("data-preventclose")&&d.close())},"mouseenter.selectBoxIt":function(){"false"===a(this).attr("data-disabled")&&(d.listItems.removeAttr("data-active"),a(this).addClass(g).attr("data-active",""),d.listItems.not(a(this)).removeClass(g),a(this).addClass(g),d.currentFocus=+a(this).attr("data-id"))},"mouseleave.selectBoxIt":function(){"false"===a(this).attr("data-disabled")&&(d.listItems.not(a(this)).removeClass(g).removeAttr("data-active"),a(this).addClass(g),d.currentFocus=+a(this).attr("data-id"))},"blur.selectBoxIt":function(){a(this).removeClass(g)}},".selectboxit-option"),d.list.on({"click.selectBoxIt":function(a){a.preventDefault()}},"a"),d.selectBox.on({"change.selectBoxIt, internal-change.selectBoxIt":function(a,e){var f,g;e||(f=d.list.find('li[data-val="'+d.originalElem.value+'"]'),f.length&&(d.listItems.eq(d.currentFocus).removeClass(d.focusClass),d.currentFocus=+f.attr("data-id"))),f=d.listItems.eq(d.currentFocus),g=f.attr("data-selectedtext"),b=f.attr("data-text"),c=b?b:f.find("a").text(),d._setText(d.dropdownText,g||c),d.dropdownText.attr("data-val",d.originalElem.value),f.find("i").attr("class")&&(d.dropdownImage.attr("class",f.find("i").attr("class")).addClass("selectboxit-default-icon"),d.dropdownImage.attr("style",f.find("i").attr("style"))),d.triggerEvent("changed")},"disable.selectBoxIt":function(){d.dropdown.addClass(d.theme.disabled)},"enable.selectBoxIt":function(){d.dropdown.removeClass(d.theme.disabled)},"open.selectBoxIt":function(){var a,b=d.list.find("li[data-val='"+d.dropdownText.attr("data-val")+"']");b.length||(b=d.listItems.not("[data-disabled=true]").first()),d.currentFocus=+b.attr("data-id"),a=d.listItems.eq(d.currentFocus),d.dropdown.addClass(i).removeClass(h).addClass(g),d.listItems.removeClass(d.selectedClass).removeAttr("data-active").not(a).removeClass(g),a.addClass(d.selectedClass).addClass(g),d.options.hideCurrent&&(d.listItems.show(),a.hide())},"close.selectBoxIt":function(){d.dropdown.removeClass(i)},"blur.selectBoxIt":function(){d.dropdown.removeClass(g)},"mouseenter.selectBoxIt":function(){a(this).hasClass(d.theme.disabled)||d.dropdown.addClass(h)},"mouseleave.selectBoxIt":function(){d.dropdown.removeClass(h)},destroy:function(a){a.preventDefault(),a.stopPropagation()}}),d},_update:function(a){var b,c,d,e=this,f=e.options.defaultText||e.selectBox.attr("data-text"),g=e.listItems.eq(e.currentFocus);"false"===a.attr("data-disabled")&&(b=e.listItems.eq(e.currentFocus).attr("data-selectedtext"),c=g.attr("data-text"),d=c?c:g.text(),(f&&e.options.html?e.dropdownText.html()===f:e.dropdownText.text()===f)&&e.selectBox.val()===a.attr("data-val")?e.triggerEvent("change"):(e.selectBox.val(a.attr("data-val")),e.currentFocus=+a.attr("data-id"),e.originalElem.value!==e.dropdownText.attr("data-val")&&e.triggerEvent("change")))},_addClasses:function(a){{var b=this,c=(b.focusClass=a.focus,b.hoverClass=a.hover,a.button),d=a.list,e=a.arrow,f=a.container;b.openClass=a.open}return b.selectedClass="selectboxit-selected",b.downArrow.addClass(b.selectBox.attr("data-downarrow")||b.options.downArrowIcon||e),b.dropdownContainer.addClass(f),b.dropdown.addClass(c),b.list.addClass(d),b},refresh:function(a,b){var c=this;return c._destroySelectBoxIt()._create(!0),b||c.triggerEvent("refresh"),c._callbackSupport(a),c},htmlEscape:function(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},triggerEvent:function(a){var b=this,c=b.options.showFirstOption?b.currentFocus:b.currentFocus-1>=0?b.currentFocus:0;return b.selectBox.trigger(a,{selectbox:b.selectBox,selectboxOption:b.selectItems.eq(c),dropdown:b.dropdown,dropdownOption:b.listItems.eq(b.currentFocus)}),b},_copyAttributes:function(){var a=this;return a._addSelectBoxAttributes&&a._addSelectBoxAttributes(),a},_realOuterWidth:function(a){if(a.is(":visible"))return a.outerWidth(!0);var b,c=a.clone();return c.css({visibility:"hidden",display:"block",position:"absolute"}).appendTo("body"),b=c.outerWidth(!0),c.remove(),b}});var e=a.selectBox.selectBoxIt.prototype;e.add=function(b,c){this._populate(b,function(b){var d,e,f=this,g=a.type(b),h=0,i=[],j=f._isJSON(b),k=j&&f._parseJSON(b);if(b&&("array"===g||j&&k.data&&"array"===a.type(k.data))||"object"===g&&b.data&&"array"===a.type(b.data)){for(f._isJSON(b)&&(b=k),b.data&&(b=b.data),e=b.length;e-1>=h;h+=1)d=b[h],a.isPlainObject(d)?i.push(a("<option/>",d)):"string"===a.type(d)&&i.push(a("<option/>",{text:d,value:d}));f.selectBox.append(i)}else b&&"string"===g&&!f._isJSON(b)?f.selectBox.append(b):b&&"object"===g?f.selectBox.append(a("<option/>",b)):b&&f._isJSON(b)&&a.isPlainObject(f._parseJSON(b))&&f.selectBox.append(a("<option/>",f._parseJSON(b)));return f.dropdown?f.refresh(function(){f._callbackSupport(c)},!0):f._callbackSupport(c),f})},e._parseJSON=function(b){return JSON&&JSON.parse&&JSON.parse(b)||a.parseJSON(b)},e._isJSON=function(a){var b,c=this;try{return b=c._parseJSON(a),!0}catch(d){return!1}},e._populate=function(b,c){var d=this;return b=a.isFunction(b)?b.call():b,d.isDeferred(b)?b.done(function(a){c.call(d,a)}):c.call(d,b),d},e._ariaAccessibility=function(){var b=this,c=a("label[for='"+b.originalElem.id+"']");return b.dropdownContainer.attr({role:"combobox","aria-autocomplete":"list","aria-haspopup":"true","aria-expanded":"false","aria-owns":b.list[0].id}),b.dropdownText.attr({"aria-live":"polite"}),b.dropdown.on({"disable.selectBoxIt":function(){b.dropdownContainer.attr("aria-disabled","true")},"enable.selectBoxIt":function(){b.dropdownContainer.attr("aria-disabled","false")}}),c.length&&b.dropdownContainer.attr("aria-labelledby",c[0].id),b.list.attr({role:"listbox","aria-hidden":"true"}),b.listItems.attr({role:"option"}),b.selectBox.on({"open.selectBoxIt":function(){b.list.attr("aria-hidden","false"),b.dropdownContainer.attr("aria-expanded","true")},"close.selectBoxIt":function(){b.list.attr("aria-hidden","true"),b.dropdownContainer.attr("aria-expanded","false")}}),b},e._addSelectBoxAttributes=function(){var b=this;return b._addAttributes(b.selectBox.prop("attributes"),b.dropdown),b.selectItems.each(function(c){b._addAttributes(a(this).prop("attributes"),b.listItems.eq(c))}),b},e._addAttributes=function(b,c){var d=this,e=d.options.copyAttributes;return b.length&&a.each(b,function(b,d){var f=d.name.toLowerCase(),g=d.value;"null"===g||-1===a.inArray(f,e)&&-1===f.indexOf("data")||c.attr(f,g)}),d},e.destroy=function(a){var b=this;return b._destroySelectBoxIt(),b.widgetProto.destroy.call(b),b._callbackSupport(a),b},e._destroySelectBoxIt=function(){var b=this;return b.dropdown.off(".selectBoxIt"),a.contains(b.dropdownContainer[0],b.originalElem)&&b.dropdownContainer.before(b.selectBox),b.dropdownContainer.remove(),b.selectBox.removeAttr("style").attr("style",b.selectBoxStyles),b.selectBox.show(),b.triggerEvent("destroy"),b},e.disable=function(a){var b=this;return b.options.disabled||(b.close(),b.selectBox.attr("disabled","disabled"),b.dropdown.removeAttr("tabindex").removeClass(b.theme.enabled).addClass(b.theme.disabled),b.setOption("disabled",!0),b.triggerEvent("disable")),b._callbackSupport(a),b},e.disableOption=function(b,c){var d,e,f,g=this,h=a.type(b);return"number"===h&&(g.close(),d=g.selectBox.find("option").eq(b),g.triggerEvent("disable-option"),d.attr("disabled","disabled"),g.listItems.eq(b).attr("data-disabled","true").addClass(g.theme.disabled),g.currentFocus===b&&(e=g.listItems.eq(g.currentFocus).nextAll("li").not("[data-disabled='true']").first().length,f=g.listItems.eq(g.currentFocus).prevAll("li").not("[data-disabled='true']").first().length,e?g.moveDown():f?g.moveUp():g.disable())),g._callbackSupport(c),g},e._isDisabled=function(){var a=this;return a.originalElem.disabled&&a.disable(),a},e._dynamicPositioning=function(){var b=this;if("number"===a.type(b.listSize))b.list.css("max-height",b.maxHeight||"none");else{var c=b.dropdown.offset().top,d=b.list.data("max-height")||b.list.outerHeight(),e=b.dropdown.outerHeight(),f=b.options.viewport,g=f.height(),h=a.isWindow(f.get(0))?f.scrollTop():f.offset().top,i=g+h>=c+e+d,j=!i;if(b.list.data("max-height")||b.list.data("max-height",b.list.outerHeight()),j)if(b.dropdown.offset().top-h>=d)b.list.css("max-height",d),b.list.css("top",b.dropdown.position().top-b.list.outerHeight());else{var k=Math.abs(c+e+d-(g+h)),l=Math.abs(b.dropdown.offset().top-h-d);l>k?(b.list.css("max-height",d-k-e/2),b.list.css("top","auto")):(b.list.css("max-height",d-l-e/2),b.list.css("top",b.dropdown.position().top-b.list.outerHeight()))}else b.list.css("max-height",d),b.list.css("top","auto")}return b},e.enable=function(a){var b=this;return b.options.disabled&&(b.triggerEvent("enable"),b.selectBox.removeAttr("disabled"),b.dropdown.attr("tabindex",0).removeClass(b.theme.disabled).addClass(b.theme.enabled),b.setOption("disabled",!1),b._callbackSupport(a)),b},e.enableOption=function(b,c){var d,e=this,f=a.type(b);return"number"===f&&(d=e.selectBox.find("option").eq(b),e.triggerEvent("enable-option"),d.removeAttr("disabled"),e.listItems.eq(b).attr("data-disabled","false").removeClass(e.theme.disabled)),e._callbackSupport(c),e},e.moveDown=function(a){var b=this;b.currentFocus+=1;var c="true"===b.listItems.eq(b.currentFocus).attr("data-disabled")?!0:!1,d=b.listItems.eq(b.currentFocus).nextAll("li").not("[data-disabled='true']").first().length;if(b.currentFocus===b.listItems.length)b.currentFocus-=1;else{if(c&&d)return b.listItems.eq(b.currentFocus-1).blur(),b.moveDown(),void 0;c&&!d?b.currentFocus-=1:(b.listItems.eq(b.currentFocus-1).blur().end().eq(b.currentFocus).focusin(),b._scrollToView("down"),b.triggerEvent("moveDown"))}return b._callbackSupport(a),b},e.moveUp=function(a){var b=this;b.currentFocus-=1;var c="true"===b.listItems.eq(b.currentFocus).attr("data-disabled")?!0:!1,d=b.listItems.eq(b.currentFocus).prevAll("li").not("[data-disabled='true']").first().length;if(-1===b.currentFocus)b.currentFocus+=1;else{if(c&&d)return b.listItems.eq(b.currentFocus+1).blur(),b.moveUp(),void 0;c&&!d?b.currentFocus+=1:(b.listItems.eq(this.currentFocus+1).blur().end().eq(b.currentFocus).focusin(),b._scrollToView("up"),b.triggerEvent("moveUp"))}return b._callbackSupport(a),b},e._setCurrentSearchOption=function(a){var b=this;return(b.options.aggressiveChange||b.options.selectWhenHidden||b.listItems.eq(a).is(":visible"))&&b.listItems.eq(a).data("disabled")!==!0&&(b.listItems.eq(b.currentFocus).blur(),b.currentIndex=a,b.currentFocus=a,b.listItems.eq(b.currentFocus).focusin(),b._scrollToView("search"),b.triggerEvent("search")),b},e._searchAlgorithm=function(a,b){var c,d,e,f,g=this,h=!1,i=g.textArray,j=g.currentText;for(c=a,e=i.length;e>c;c+=1){for(f=i[c],d=0;e>d;d+=1)-1!==i[d].search(b)&&(h=!0,d=e);if(h||(g.currentText=g.currentText.charAt(g.currentText.length-1).replace(/[|()\[{.+*?$\\]/g,"\\$0"),j=g.currentText),b=new RegExp(j,"gi"),j.length<3){if(b=new RegExp(j.charAt(0),"gi"),-1!==f.charAt(0).search(b))return g._setCurrentSearchOption(c),(f.substring(0,j.length).toLowerCase()!==j.toLowerCase()||g.options.similarSearch)&&(g.currentIndex+=1),!1}else if(-1!==f.search(b))return g._setCurrentSearchOption(c),!1;if(f.toLowerCase()===g.currentText.toLowerCase())return g._setCurrentSearchOption(c),g.currentText="",!1}return!0},e.search=function(a,b,c){var d=this;c?d.currentText+=a.replace(/[|()\[{.+*?$\\]/g,"\\$0"):d.currentText=a.replace(/[|()\[{.+*?$\\]/g,"\\$0");var e=d._searchAlgorithm(d.currentIndex,new RegExp(d.currentText,"gi"));return e&&d._searchAlgorithm(0,d.currentText),d._callbackSupport(b),d},e._updateMobileText=function(){var a,b,c,d=this;a=d.selectBox.find("option").filter(":selected"),b=a.attr("data-text"),c=b?b:a.text(),d._setText(d.dropdownText,c),d.list.find('li[data-val="'+a.val()+'"]').find("i").attr("class")&&d.dropdownImage.attr("class",d.list.find('li[data-val="'+a.val()+'"]').find("i").attr("class")).addClass("selectboxit-default-icon")},e._applyNativeSelect=function(){var a=this;return a.dropdownContainer.append(a.selectBox),a.dropdown.attr("tabindex","-1"),a.selectBox.css({display:"block",visibility:"visible",width:a._realOuterWidth(a.dropdown),height:a.dropdown.outerHeight(),opacity:"0",position:"absolute",top:"0",left:"0",cursor:"pointer","z-index":"999999",margin:a.dropdown.css("margin"),padding:"0","-webkit-appearance":"menulist-button"}),a.originalElem.disabled&&a.triggerEvent("disable"),this},e._mobileEvents=function(){var a=this;a.selectBox.on({"changed.selectBoxIt":function(){a.hasChanged=!0,a._updateMobileText(),a.triggerEvent("option-click")},"mousedown.selectBoxIt":function(){a.hasChanged||!a.options.defaultText||a.originalElem.disabled||(a._updateMobileText(),a.triggerEvent("option-click"))},"enable.selectBoxIt":function(){a.selectBox.removeClass("selectboxit-rendering")},"disable.selectBoxIt":function(){a.selectBox.addClass("selectboxit-rendering")}})},e._mobile=function(){var a=this;return a.isMobile&&(a._applyNativeSelect(),a._mobileEvents()),this},e.remove=function(b,c){var d,e,f=this,g=a.type(b),h=0,i="";if("array"===g){for(e=b.length;e-1>=h;h+=1)d=b[h],"number"===a.type(d)&&(i+=i.length?", option:eq("+d+")":"option:eq("+d+")");f.selectBox.find(i).remove()}else"number"===g?f.selectBox.find("option").eq(b).remove():f.selectBox.find("option").remove();return f.dropdown?f.refresh(function(){f._callbackSupport(c)},!0):f._callbackSupport(c),f},e.selectOption=function(b,c){var d=this,e=a.type(b);return"number"===e?d.selectBox.val(d.selectItems.eq(b).val()).change():"string"===e&&d.selectBox.val(b).change(),d._callbackSupport(c),d},e.setOption=function(b,c,d){var e=this;return"string"===a.type(b)&&(e.options[b]=c),e.refresh(function(){e._callbackSupport(d)},!0),e},e.setOptions=function(b,c){var d=this;return a.isPlainObject(b)&&(d.options=a.extend({},d.options,b)),d.refresh(function(){d._callbackSupport(c)},!0),d},e.wait=function(a,b){var c=this;return c.widgetProto._delay.call(c,b,a),c}});